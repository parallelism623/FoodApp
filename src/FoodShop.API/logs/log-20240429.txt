2024-04-29 07:05:40.622 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 07:05:41.123 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 07:05:41.124 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 07:05:41.125 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 07:05:41.125 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 07:05:41.231 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 07:05:41.278 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:05:41.278 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:05:41.279 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:05:41.279 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:05:41.279 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:05:41.280 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:05:41.280 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:05:41.280 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:05:41.280 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:05:41.280 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:05:41.537 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 07:05:41.545 +07:00 [DBG] Creating DbConnection.
2024-04-29 07:05:41.591 +07:00 [DBG] Created DbConnection. (43ms).
2024-04-29 07:05:41.594 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.601 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.757 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.761 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 07:05:41.766 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2024-04-29 07:05:41.767 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (7ms).
2024-04-29 07:05:41.771 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 07:05:41.788 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 07:05:41.789 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.795 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (3ms).
2024-04-29 07:05:41.797 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 07:05:41.798 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 07:05:41.798 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 07:05:41.798 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.799 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.800 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 07:05:41.815 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 07:05:41.815 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.816 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:05:41.817 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.818 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.818 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 07:05:41.819 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 07:05:41.819 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 07:05:41.819 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 07:05:41.821 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 07:05:41.821 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.822 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:05:41.822 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 07:05:41.822 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 07:05:41.823 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 07:05:41.823 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.823 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.824 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 07:05:41.825 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 07:05:41.825 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.826 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:05:41.837 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.837 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.838 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 07:05:41.838 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:05:41.838 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:05:41.839 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 07:05:41.847 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 07:05:41.850 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.851 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 07:05:41.852 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:41.852 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:05:41.859 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 07:05:41.988 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 07:05:42.098 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 07:05:42.117 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.118 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.118 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 07:05:42.119 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:05:42.119 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:05:42.119 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:05:42.124 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:05:42.138 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.138 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 07:05:42.139 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.139 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:05:42.145 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 07:05:42.148 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 07:05:42.149 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.149 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.149 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 07:05:42.150 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:05:42.150 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:05:42.150 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:05:42.154 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:05:42.155 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.155 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 07:05:42.156 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.156 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:05:42.157 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 07:05:42.160 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 07:05:42.161 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.162 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.162 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 07:05:42.162 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:05:42.163 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:05:42.163 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:05:42.167 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:05:42.167 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.168 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 07:05:42.168 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.169 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:05:42.171 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 07:05:42.174 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:05:42.175 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 07:05:42.241 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 07:05:42.304 +07:00 [DBG] Hosting starting
2024-04-29 07:05:42.315 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 07:05:42.322 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 07:05:42.360 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 07:05:42.374 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 07:05:42.380 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 07:05:42.381 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 07:05:42.382 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 07:05:42.384 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 07:05:42.387 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 07:05:42.389 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 07:05:42.390 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 07:05:42.501 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 07:05:42.501 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 07:05:42.501 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 07:05:42.501 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 07:05:42.502 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 07:05:42.502 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 07:05:42.540 +07:00 [DBG] Connection id "0HN37S0E58SJ7" accepted.
2024-04-29 07:05:42.541 +07:00 [DBG] Connection id "0HN37S0E58SJ7" started.
2024-04-29 07:05:42.549 +07:00 [DBG] Connection id "0HN37S0E58SJ8" accepted.
2024-04-29 07:05:42.550 +07:00 [DBG] Connection id "0HN37S0E58SJ8" started.
2024-04-29 07:05:42.561 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 07:05:42.561 +07:00 [INF] Hosting environment: Development
2024-04-29 07:05:42.561 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 07:05:42.561 +07:00 [DBG] Hosting started
2024-04-29 07:05:42.597 +07:00 [DBG] Connection id "0HN37S0E58SJ7" received FIN.
2024-04-29 07:05:42.597 +07:00 [DBG] Connection id "0HN37S0E58SJ8" received FIN.
2024-04-29 07:05:42.601 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 07:05:42.601 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 07:05:42.610 +07:00 [DBG] Connection id "0HN37S0E58SJ7" stopped.
2024-04-29 07:05:42.610 +07:00 [DBG] Connection id "0HN37S0E58SJ8" stopped.
2024-04-29 07:05:42.612 +07:00 [DBG] Connection id "0HN37S0E58SJ8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 07:05:42.612 +07:00 [DBG] Connection id "0HN37S0E58SJ7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 07:05:42.930 +07:00 [DBG] Connection id "0HN37S0E58SJ9" accepted.
2024-04-29 07:05:42.934 +07:00 [DBG] Connection id "0HN37S0E58SJ9" started.
2024-04-29 07:05:42.975 +07:00 [DBG] Connection 0HN37S0E58SJ9 established using the following protocol: "Tls13"
2024-04-29 07:05:43.018 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger - null null
2024-04-29 07:05:43.120 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 07:05:43.156 +07:00 [DBG] No candidates found for the request path '/swagger'
2024-04-29 07:05:43.157 +07:00 [DBG] Request did not match any endpoints
2024-04-29 07:05:43.173 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger - 301 0 null 156.2656ms
2024-04-29 07:05:43.182 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 07:05:43.185 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 07:05:43.185 +07:00 [DBG] Request did not match any endpoints
2024-04-29 07:05:43.216 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 07:05:43.218 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 07:05:43.231 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 07:05:43.231 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 07:05:43.232 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 50.4209ms
2024-04-29 07:05:43.310 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/swagger-ui-bundle.js - null null
2024-04-29 07:05:43.310 +07:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2024-04-29 07:05:43.310 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/swagger-ui-standalone-preset.js - null null
2024-04-29 07:05:43.310 +07:00 [DBG] Request did not match any endpoints
2024-04-29 07:05:43.310 +07:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2024-04-29 07:05:43.311 +07:00 [DBG] Request did not match any endpoints
2024-04-29 07:05:43.311 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 07:05:43.311 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 07:05:43.316 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 4.1949ms
2024-04-29 07:05:43.337 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-04-29 07:05:43.339 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 28.7439ms
2024-04-29 07:05:43.351 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-04-29 07:05:43.352 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 42.2442ms
2024-04-29 07:05:43.373 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.9846ms
2024-04-29 07:05:44.270 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 07:05:44.271 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 07:05:44.271 +07:00 [DBG] Request did not match any endpoints
2024-04-29 07:05:44.427 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 157.7671ms
2024-04-29 07:05:49.763 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7286/api/v1/Users/register - application/json; ver=1.0 178
2024-04-29 07:05:49.787 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1/Users/register'
2024-04-29 07:05:49.788 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Users/register' is valid for the request path '/api/v1/Users/register'
2024-04-29 07:05:49.793 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)'
2024-04-29 07:05:49.795 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 07:05:49.796 +07:00 [INF] Start request......!
2024-04-29 07:05:49.834 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 07:05:49.839 +07:00 [INF] Executing endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)'
2024-04-29 07:05:49.862 +07:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest) on controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation).
2024-04-29 07:05:49.864 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-29 07:05:49.865 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-29 07:05:49.865 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)","Asp.Versioning.ApplyContentTypeVersionActionFilter"]
2024-04-29 07:05:49.866 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-29 07:05:49.866 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2024-04-29 07:05:49.868 +07:00 [DBG] Executing controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 07:05:49.942 +07:00 [DBG] Executed controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 07:05:49.947 +07:00 [DBG] Attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest' ...
2024-04-29 07:05:49.948 +07:00 [DBG] Attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest' using the name '' in request data ...
2024-04-29 07:05:49.950 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; ver=1.0'.
2024-04-29 07:05:49.955 +07:00 [DBG] Connection id "0HN37S0E58SJ9", Request id "0HN37S0E58SJ9:0000000F": started reading request body.
2024-04-29 07:05:49.955 +07:00 [DBG] Connection id "0HN37S0E58SJ9", Request id "0HN37S0E58SJ9:0000000F": done reading request body.
2024-04-29 07:05:49.959 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest'
2024-04-29 07:05:49.959 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest'.
2024-04-29 07:05:49.960 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest'.
2024-04-29 07:05:49.960 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest' ...
2024-04-29 07:05:49.967 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest'.
2024-04-29 07:05:50.007 +07:00 [INF] Executed action FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation) in 139.2335ms
2024-04-29 07:05:50.009 +07:00 [INF] Executed endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)'
2024-04-29 07:05:50.010 +07:00 [ERR] Validation failed: 
 -- Email: 'Email' is not a valid email address. Severity: Error
 -- Password: The length of 'Password' must be at least 8 characters. You entered 6 characters. Severity: Error
 -- ConfirmPassword: The length of 'Confirm Password' must be at least 8 characters. You entered 6 characters. Severity: Error
FluentValidation.ValidationException: Validation failed: 
 -- Email: 'Email' is not a valid email address. Severity: Error
 -- Password: The length of 'Password' must be at least 8 characters. You entered 6 characters. Severity: Error
 -- ConfirmPassword: The length of 'Confirm Password' must be at least 8 characters. You entered 6 characters. Severity: Error
   at FluentValidation.AbstractValidator`1.RaiseValidationException(ValidationContext`1 context, ValidationResult result) in /_/src/FluentValidation/AbstractValidator.cs:line 531
   at FluentValidation.AbstractValidator`1.ValidateInternalAsync(ValidationContext`1 context, Boolean useAsync, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 258
   at FluentValidation.AbstractValidator`1.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 220
   at FluentValidation.DefaultValidatorExtensions.ValidateAndThrowAsync[T](IValidator`1 validator, T instance, CancellationToken cancellationToken) in /_/src/FluentValidation/DefaultValidatorExtensions_Validate.cs:line 72
   at FoodShop.Infrastructure.Identity.UserServices.RegisterAsync(RegisterRequest request, String origin, CancellationToken token) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Identity\UserServices.cs:line 157
   at FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync(RegisterRequest request) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Presentation\Controllers\V1\UsersController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FoodShop.Infrastructure.Auth.CurrentUserMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Auth\CurrentUserMiddleware.cs:line 21
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FoodShop.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API\Middleware\ExceptionHandlingMiddleware.cs:line 22
2024-04-29 07:05:50.057 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7286/api/v1/Users/register - 400 null application/json; ver=1 293.7109ms
2024-04-29 07:07:49.963 +07:00 [DBG] HttpMessageHandler expired after 120000ms for client 'MailTrapApiClient'
2024-04-29 07:07:59.974 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:07:59.976 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0206ms - processed: 0 items - remaining: 1 items
2024-04-29 07:08:01.417 +07:00 [DBG] Connection id "0HN37S0E58SJ9" is closing.
2024-04-29 07:08:01.418 +07:00 [DBG] Connection id "0HN37S0E58SJ9" is closed. The last processed stream ID was 15.
2024-04-29 07:08:01.420 +07:00 [DBG] Connection id "0HN37S0E58SJ9" received FIN.
2024-04-29 07:08:01.421 +07:00 [DBG] Connection id "0HN37S0E58SJ9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 07:08:01.422 +07:00 [DBG] The connection queue processing loop for 0HN37S0E58SJ9 completed.
2024-04-29 07:08:01.424 +07:00 [DBG] Connection id "0HN37S0E58SJ9" stopped.
2024-04-29 07:08:09.984 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:08:09.985 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0077ms - processed: 0 items - remaining: 1 items
2024-04-29 07:08:19.990 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:08:19.991 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0056ms - processed: 0 items - remaining: 1 items
2024-04-29 07:08:30.000 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:08:30.000 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2024-04-29 07:08:40.008 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:08:40.008 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0055ms - processed: 0 items - remaining: 1 items
2024-04-29 07:08:50.013 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:08:50.013 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2024-04-29 07:09:00.024 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:09:00.024 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0058ms - processed: 0 items - remaining: 1 items
2024-04-29 07:09:10.037 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:09:10.038 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0046ms - processed: 0 items - remaining: 1 items
2024-04-29 07:09:20.050 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:09:20.051 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0073ms - processed: 0 items - remaining: 1 items
2024-04-29 07:09:30.054 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:09:30.054 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0085ms - processed: 0 items - remaining: 1 items
2024-04-29 07:09:40.064 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:09:40.065 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0051ms - processed: 0 items - remaining: 1 items
2024-04-29 07:09:50.075 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:09:50.075 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0044ms - processed: 0 items - remaining: 1 items
2024-04-29 07:10:00.087 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:10:00.088 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0072ms - processed: 0 items - remaining: 1 items
2024-04-29 07:10:10.098 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:10:10.099 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0064ms - processed: 0 items - remaining: 1 items
2024-04-29 07:10:20.109 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:10:20.110 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0072ms - processed: 0 items - remaining: 1 items
2024-04-29 07:10:30.120 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:10:30.120 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0048ms - processed: 0 items - remaining: 1 items
2024-04-29 07:10:40.121 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:10:40.122 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0093ms - processed: 0 items - remaining: 1 items
2024-04-29 07:10:53.951 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 07:10:54.440 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 07:10:54.442 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 07:10:54.442 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 07:10:54.443 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 07:10:54.627 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 07:10:54.686 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:10:54.688 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:10:54.689 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:10:54.689 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:10:54.689 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:10:54.690 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:10:54.690 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:10:54.690 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:10:54.691 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:10:54.691 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:10:54.830 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 07:10:54.848 +07:00 [DBG] Creating DbConnection.
2024-04-29 07:10:54.888 +07:00 [DBG] Created DbConnection. (38ms).
2024-04-29 07:10:54.891 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:54.895 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.068 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.079 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 07:10:55.087 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (8ms).
2024-04-29 07:10:55.089 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (15ms).
2024-04-29 07:10:55.095 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 07:10:55.121 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 07:10:55.123 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.131 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 07:10:55.134 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 07:10:55.135 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 07:10:55.135 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2024-04-29 07:10:55.136 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.136 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.137 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 07:10:55.157 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 07:10:55.157 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.158 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:10:55.160 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.160 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.160 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 07:10:55.161 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 07:10:55.161 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 07:10:55.161 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 07:10:55.164 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 07:10:55.165 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.165 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:10:55.166 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 07:10:55.166 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 07:10:55.167 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 07:10:55.167 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.167 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.168 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 07:10:55.169 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 07:10:55.170 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.171 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:10:55.192 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.192 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.193 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 07:10:55.193 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:10:55.194 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:10:55.195 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 07:10:55.201 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 07:10:55.207 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.209 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 5ms reading results.
2024-04-29 07:10:55.211 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.212 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:10:55.228 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 07:10:55.463 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 07:10:55.631 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 07:10:55.649 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.650 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.650 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 07:10:55.650 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:10:55.651 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:10:55.651 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:10:55.655 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:10:55.664 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.664 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 07:10:55.665 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.665 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:10:55.669 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 07:10:55.671 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 07:10:55.672 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.672 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.673 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 07:10:55.673 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:10:55.673 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:10:55.673 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:10:55.677 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:10:55.678 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.678 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 07:10:55.679 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.679 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:10:55.680 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 07:10:55.683 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 07:10:55.684 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.684 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.685 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 07:10:55.685 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:10:55.685 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:10:55.686 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:10:55.689 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:10:55.690 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.690 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 07:10:55.691 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.691 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:10:55.693 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 07:10:55.697 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:10:55.698 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 07:10:55.741 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 07:10:55.818 +07:00 [DBG] Hosting starting
2024-04-29 07:10:55.826 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 07:10:55.831 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 07:10:55.837 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 07:10:55.844 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 07:10:55.846 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 07:10:55.847 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 07:10:55.849 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 07:10:55.850 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 07:10:55.853 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 07:10:55.856 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 07:10:55.857 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 07:10:55.942 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 07:10:55.943 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 07:10:55.943 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 07:10:55.943 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 07:10:55.943 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 07:10:55.944 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 07:10:56.012 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 07:10:56.013 +07:00 [INF] Hosting environment: Development
2024-04-29 07:10:56.013 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 07:10:56.014 +07:00 [DBG] Hosting started
2024-04-29 07:10:56.237 +07:00 [DBG] Connection id "0HN37S3BKTI7T" accepted.
2024-04-29 07:10:56.238 +07:00 [DBG] Connection id "0HN37S3BKTI7T" started.
2024-04-29 07:10:56.262 +07:00 [DBG] Connection id "0HN37S3BKTI7T" received FIN.
2024-04-29 07:10:56.272 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 07:10:56.300 +07:00 [DBG] Connection id "0HN37S3BKTI7T" stopped.
2024-04-29 07:10:56.304 +07:00 [DBG] Connection id "0HN37S3BKTI7T" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 07:10:56.454 +07:00 [DBG] Connection id "0HN37S3BKTI7U" accepted.
2024-04-29 07:10:56.456 +07:00 [DBG] Connection id "0HN37S3BKTI7U" started.
2024-04-29 07:10:56.485 +07:00 [DBG] Connection 0HN37S3BKTI7U established using the following protocol: "Tls13"
2024-04-29 07:10:56.521 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 07:10:56.577 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 07:10:56.606 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 07:10:56.607 +07:00 [DBG] Request did not match any endpoints
2024-04-29 07:10:56.653 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 07:10:56.655 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 07:10:56.676 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 07:10:56.677 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 07:10:56.683 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 162.9926ms
2024-04-29 07:10:56.713 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 07:10:56.719 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 5.153ms
2024-04-29 07:10:56.750 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 07:10:56.781 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.9926ms
2024-04-29 07:10:57.860 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 07:10:57.861 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 07:10:57.861 +07:00 [DBG] Request did not match any endpoints
2024-04-29 07:10:57.990 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 130.3855ms
2024-04-29 07:11:32.901 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7286/api/v1.0/Users/register - application/json; ver=1.0 178
2024-04-29 07:11:32.940 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1.0/Users/register'
2024-04-29 07:11:32.942 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Users/register' is valid for the request path '/api/v1.0/Users/register'
2024-04-29 07:11:32.946 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)'
2024-04-29 07:11:32.948 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 07:11:32.949 +07:00 [INF] Start request......!
2024-04-29 07:11:32.965 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 07:11:32.968 +07:00 [INF] Executing endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)'
2024-04-29 07:11:32.991 +07:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest) on controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation).
2024-04-29 07:11:32.992 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-29 07:11:32.993 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-29 07:11:32.993 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)","Asp.Versioning.ApplyContentTypeVersionActionFilter"]
2024-04-29 07:11:32.994 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-29 07:11:32.994 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2024-04-29 07:11:32.996 +07:00 [DBG] Executing controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 07:11:33.082 +07:00 [DBG] Executed controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 07:11:33.085 +07:00 [DBG] Attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest' ...
2024-04-29 07:11:33.087 +07:00 [DBG] Attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest' using the name '' in request data ...
2024-04-29 07:11:33.088 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; ver=1.0'.
2024-04-29 07:11:33.091 +07:00 [DBG] Connection id "0HN37S3BKTI7U", Request id "0HN37S3BKTI7U:00000009": started reading request body.
2024-04-29 07:11:33.091 +07:00 [DBG] Connection id "0HN37S3BKTI7U", Request id "0HN37S3BKTI7U:00000009": done reading request body.
2024-04-29 07:11:33.105 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest'
2024-04-29 07:11:33.106 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest'.
2024-04-29 07:11:33.106 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest'.
2024-04-29 07:11:33.107 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest' ...
2024-04-29 07:11:33.115 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest'.
2024-04-29 07:11:33.197 +07:00 [INF] Executed action FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation) in 195.5012ms
2024-04-29 07:11:33.200 +07:00 [INF] Executed endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)'
2024-04-29 07:11:33.201 +07:00 [ERR] Validation failed: 
 -- Email: 'Email' is not a valid email address. Severity: Error
 -- Password: The length of 'Password' must be at least 8 characters. You entered 6 characters. Severity: Error
 -- ConfirmPassword: The length of 'Confirm Password' must be at least 8 characters. You entered 6 characters. Severity: Error
FluentValidation.ValidationException: Validation failed: 
 -- Email: 'Email' is not a valid email address. Severity: Error
 -- Password: The length of 'Password' must be at least 8 characters. You entered 6 characters. Severity: Error
 -- ConfirmPassword: The length of 'Confirm Password' must be at least 8 characters. You entered 6 characters. Severity: Error
   at FluentValidation.AbstractValidator`1.RaiseValidationException(ValidationContext`1 context, ValidationResult result) in /_/src/FluentValidation/AbstractValidator.cs:line 531
   at FluentValidation.AbstractValidator`1.ValidateInternalAsync(ValidationContext`1 context, Boolean useAsync, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 258
   at FluentValidation.AbstractValidator`1.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 220
   at FluentValidation.DefaultValidatorExtensions.ValidateAndThrowAsync[T](IValidator`1 validator, T instance, CancellationToken cancellationToken) in /_/src/FluentValidation/DefaultValidatorExtensions_Validate.cs:line 72
   at FoodShop.Infrastructure.Identity.UserServices.RegisterAsync(RegisterRequest request, String origin, CancellationToken token) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Identity\UserServices.cs:line 157
   at FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync(RegisterRequest request) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Presentation\Controllers\V1\UsersController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FoodShop.Infrastructure.Auth.CurrentUserMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Auth\CurrentUserMiddleware.cs:line 21
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FoodShop.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-04-29 07:11:33.271 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7286/api/v1.0/Users/register - 400 null application/json; ver=1.0 369.7965ms
2024-04-29 07:13:33.103 +07:00 [DBG] HttpMessageHandler expired after 120000ms for client 'MailTrapApiClient'
2024-04-29 07:13:43.099 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:13:43.104 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0485ms - processed: 0 items - remaining: 1 items
2024-04-29 07:13:45.099 +07:00 [DBG] Connection id "0HN37S3BKTI7U" is closing.
2024-04-29 07:13:45.099 +07:00 [DBG] Connection id "0HN37S3BKTI7U" is closed. The last processed stream ID was 9.
2024-04-29 07:13:45.101 +07:00 [DBG] Connection id "0HN37S3BKTI7U" received FIN.
2024-04-29 07:13:45.102 +07:00 [DBG] Connection id "0HN37S3BKTI7U" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 07:13:45.114 +07:00 [DBG] The connection queue processing loop for 0HN37S3BKTI7U completed.
2024-04-29 07:13:45.116 +07:00 [DBG] Connection id "0HN37S3BKTI7U" stopped.
2024-04-29 07:13:53.101 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:13:53.102 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0091ms - processed: 0 items - remaining: 1 items
2024-04-29 07:14:03.117 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:14:03.117 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0058ms - processed: 0 items - remaining: 1 items
2024-04-29 07:14:13.121 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:14:13.122 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0041ms - processed: 0 items - remaining: 1 items
2024-04-29 07:14:23.131 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:14:23.132 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0058ms - processed: 0 items - remaining: 1 items
2024-04-29 07:14:33.144 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:14:33.145 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0062ms - processed: 0 items - remaining: 1 items
2024-04-29 07:14:43.155 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:14:43.156 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0073ms - processed: 0 items - remaining: 1 items
2024-04-29 07:14:53.159 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:14:53.160 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.2764ms - processed: 0 items - remaining: 1 items
2024-04-29 07:15:03.169 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:15:03.170 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0055ms - processed: 0 items - remaining: 1 items
2024-04-29 07:15:13.184 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:15:13.184 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0074ms - processed: 0 items - remaining: 1 items
2024-04-29 07:15:23.185 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:15:23.186 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0054ms - processed: 0 items - remaining: 1 items
2024-04-29 07:15:33.192 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:15:33.193 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0057ms - processed: 0 items - remaining: 1 items
2024-04-29 07:15:43.207 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:15:43.207 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0081ms - processed: 0 items - remaining: 1 items
2024-04-29 07:15:53.208 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:15:53.209 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0047ms - processed: 0 items - remaining: 1 items
2024-04-29 07:16:03.210 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:16:03.211 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0114ms - processed: 0 items - remaining: 1 items
2024-04-29 07:16:13.217 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:16:13.218 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0059ms - processed: 0 items - remaining: 1 items
2024-04-29 07:16:23.227 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:16:23.228 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0062ms - processed: 0 items - remaining: 1 items
2024-04-29 07:16:33.235 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:16:33.235 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2024-04-29 07:16:43.244 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:16:43.245 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0061ms - processed: 0 items - remaining: 1 items
2024-04-29 07:16:53.253 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:16:53.254 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0115ms - processed: 0 items - remaining: 1 items
2024-04-29 07:17:03.256 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:17:03.256 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0055ms - processed: 0 items - remaining: 1 items
2024-04-29 07:17:13.261 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:17:13.262 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2024-04-29 07:17:23.264 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 07:17:23.264 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.078ms - processed: 0 items - remaining: 1 items
2024-04-29 07:37:42.578 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 07:37:43.109 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 07:37:43.111 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 07:37:43.111 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 07:37:43.111 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 07:37:43.208 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 07:37:43.267 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:37:43.268 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:37:43.268 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:37:43.269 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:37:43.269 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:37:43.269 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:37:43.270 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:37:43.270 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:37:43.271 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:37:43.271 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 07:37:43.420 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 07:37:43.429 +07:00 [DBG] Creating DbConnection.
2024-04-29 07:37:43.466 +07:00 [DBG] Created DbConnection. (33ms).
2024-04-29 07:37:43.469 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.475 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.636 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.643 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 07:37:43.649 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (5ms).
2024-04-29 07:37:43.650 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (10ms).
2024-04-29 07:37:43.655 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 07:37:43.675 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 07:37:43.677 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.684 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 07:37:43.686 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 07:37:43.686 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 07:37:43.687 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 07:37:43.687 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.688 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.688 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 07:37:43.702 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 07:37:43.702 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.703 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:37:43.704 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.704 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.704 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 07:37:43.705 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 07:37:43.705 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 07:37:43.705 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 07:37:43.706 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 07:37:43.706 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.706 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:37:43.707 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 07:37:43.707 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 07:37:43.707 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 07:37:43.707 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.707 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.707 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 07:37:43.708 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 07:37:43.708 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.708 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:37:43.719 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.719 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.719 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 07:37:43.719 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:37:43.719 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:37:43.720 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 07:37:43.723 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 07:37:43.726 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.727 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 07:37:43.727 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.727 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:37:43.734 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 07:37:43.831 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 07:37:43.938 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 07:37:43.956 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.956 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.956 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 07:37:43.956 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:37:43.957 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:37:43.957 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:37:43.970 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:37:43.979 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.980 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 07:37:43.980 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.980 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:37:43.984 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 07:37:43.986 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 07:37:43.987 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.987 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.987 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 07:37:43.987 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:37:43.987 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:37:43.987 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:37:43.990 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:37:43.991 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.991 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 07:37:43.991 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.991 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:37:43.992 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 07:37:43.993 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 07:37:43.994 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.994 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.995 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 07:37:43.995 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:37:43.995 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 07:37:43.995 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:37:43.997 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 07:37:43.997 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.998 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 07:37:43.998 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:43.998 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 07:37:43.999 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 07:37:44.000 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 07:37:44.001 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 07:37:44.029 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 07:37:44.078 +07:00 [DBG] Hosting starting
2024-04-29 07:37:44.086 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 07:37:44.091 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 07:37:44.095 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 07:37:44.101 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 07:37:44.104 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 07:37:44.105 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 07:37:44.107 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 07:37:44.108 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 07:37:44.112 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 07:37:44.116 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 07:37:44.117 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 07:37:44.207 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 07:37:44.207 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 07:37:44.207 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 07:37:44.207 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 07:37:44.207 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 07:37:44.207 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 07:37:44.295 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 07:37:44.295 +07:00 [INF] Hosting environment: Development
2024-04-29 07:37:44.296 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 07:37:44.296 +07:00 [DBG] Hosting started
2024-04-29 07:37:44.350 +07:00 [DBG] Connection id "0HN37SIAT2O3S" accepted.
2024-04-29 07:37:44.351 +07:00 [DBG] Connection id "0HN37SIAT2O3S" started.
2024-04-29 07:37:44.359 +07:00 [DBG] Connection id "0HN37SIAT2O3T" accepted.
2024-04-29 07:37:44.360 +07:00 [DBG] Connection id "0HN37SIAT2O3T" started.
2024-04-29 07:37:44.385 +07:00 [DBG] Connection 0HN37SIAT2O3S established using the following protocol: "Tls13"
2024-04-29 07:37:44.392 +07:00 [DBG] Connection id "0HN37SIAT2O3T" received FIN.
2024-04-29 07:37:44.393 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 07:37:44.400 +07:00 [DBG] Connection id "0HN37SIAT2O3T" stopped.
2024-04-29 07:37:44.401 +07:00 [DBG] Connection id "0HN37SIAT2O3T" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 07:37:44.405 +07:00 [DBG] Connection id "0HN37SIAT2O3U" accepted.
2024-04-29 07:37:44.406 +07:00 [DBG] Connection id "0HN37SIAT2O3U" started.
2024-04-29 07:37:44.408 +07:00 [DBG] Connection 0HN37SIAT2O3U established using the following protocol: "Tls13"
2024-04-29 07:37:44.422 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 07:37:44.422 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7286/api/v1.0/Users/register - application/json; ver=1.0 178
2024-04-29 07:37:44.428 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 07:37:44.476 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1.0/Users/register'
2024-04-29 07:37:44.478 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Users/register' is valid for the request path '/api/v1.0/Users/register'
2024-04-29 07:37:44.480 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 07:37:44.480 +07:00 [DBG] Request did not match any endpoints
2024-04-29 07:37:44.483 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)'
2024-04-29 07:37:44.489 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 07:37:44.490 +07:00 [INF] Start request......!
2024-04-29 07:37:44.508 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 07:37:44.511 +07:00 [INF] Executing endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)'
2024-04-29 07:37:44.527 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 07:37:44.528 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 07:37:44.532 +07:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest) on controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation).
2024-04-29 07:37:44.534 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-29 07:37:44.534 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-29 07:37:44.537 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)","Asp.Versioning.ApplyContentTypeVersionActionFilter"]
2024-04-29 07:37:44.538 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-29 07:37:44.539 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2024-04-29 07:37:44.540 +07:00 [DBG] Executing controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 07:37:44.545 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 07:37:44.546 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 07:37:44.548 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 126.579ms
2024-04-29 07:37:44.593 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 07:37:44.599 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 5.7617ms
2024-04-29 07:37:44.631 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 07:37:44.664 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.0383ms
2024-04-29 07:37:44.671 +07:00 [DBG] Executed controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 07:37:44.675 +07:00 [DBG] Attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest' ...
2024-04-29 07:37:44.678 +07:00 [DBG] Attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest' using the name '' in request data ...
2024-04-29 07:37:44.679 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; ver=1.0'.
2024-04-29 07:37:44.692 +07:00 [INF] Executed action FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation) in 149.5203ms
2024-04-29 07:37:44.693 +07:00 [INF] Executed endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)'
2024-04-29 07:37:44.694 +07:00 [ERR] The client reset the request stream.
System.IO.IOException: The client reset the request stream.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FoodShop.Infrastructure.Auth.CurrentUserMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Auth\CurrentUserMiddleware.cs:line 21
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FoodShop.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-04-29 07:37:44.729 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7286/api/v1.0/Users/register - 500 null application/json 308.382ms
2024-04-29 07:37:45.152 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 07:37:45.152 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 07:37:45.153 +07:00 [DBG] Request did not match any endpoints
2024-04-29 07:37:45.187 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/favicon-32x32.png - null null
2024-04-29 07:37:45.189 +07:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-04-29 07:37:45.189 +07:00 [DBG] Request did not match any endpoints
2024-04-29 07:37:45.215 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-04-29 07:37:45.216 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/favicon-32x32.png - 200 628 image/png 28.5462ms
2024-04-29 07:37:45.318 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 166.7016ms
2024-04-29 07:37:51.761 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7286/api/v1.0/Users/register - application/json; ver=1.0 178
2024-04-29 07:37:51.766 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1.0/Users/register'
2024-04-29 07:37:51.767 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Users/register' is valid for the request path '/api/v1.0/Users/register'
2024-04-29 07:37:51.767 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)'
2024-04-29 07:37:51.767 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 07:37:51.779 +07:00 [INF] Start request......!
2024-04-29 07:37:51.781 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 07:37:51.782 +07:00 [INF] Executing endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)'
2024-04-29 07:37:51.782 +07:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest) on controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation).
2024-04-29 07:37:51.783 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-29 07:37:51.783 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-29 07:37:51.783 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)","Asp.Versioning.ApplyContentTypeVersionActionFilter"]
2024-04-29 07:37:51.784 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-29 07:37:51.784 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2024-04-29 07:37:51.785 +07:00 [DBG] Executing controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 07:37:51.789 +07:00 [DBG] Executed controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 07:37:51.790 +07:00 [DBG] Attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest' ...
2024-04-29 07:37:51.790 +07:00 [DBG] Attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest' using the name '' in request data ...
2024-04-29 07:37:51.791 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; ver=1.0'.
2024-04-29 07:37:51.792 +07:00 [DBG] Connection id "0HN37SIAT2O3S", Request id "0HN37SIAT2O3S:0000000D": started reading request body.
2024-04-29 07:37:51.793 +07:00 [DBG] Connection id "0HN37SIAT2O3S", Request id "0HN37SIAT2O3S:0000000D": done reading request body.
2024-04-29 07:37:51.796 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest'
2024-04-29 07:37:51.796 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest'.
2024-04-29 07:37:51.797 +07:00 [DBG] Done attempting to bind parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest'.
2024-04-29 07:37:51.797 +07:00 [DBG] Attempting to validate the bound parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest' ...
2024-04-29 07:37:51.804 +07:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.RegisterRequest'.
2024-04-29 07:37:51.840 +07:00 [INF] Executed action FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation) in 55.1768ms
2024-04-29 07:37:51.840 +07:00 [INF] Executed endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync (FoodShop.Presentation)'
2024-04-29 07:37:51.841 +07:00 [ERR] Validation failed: 
 -- Email: safasdfadfads0 Severity: Error
 -- Email: 'Email' is not a valid email address. Severity: Error
 -- Password: The length of 'Password' must be at least 8 characters. You entered 6 characters. Severity: Error
 -- ConfirmPassword: The length of 'Confirm Password' must be at least 8 characters. You entered 6 characters. Severity: Error
FluentValidation.ValidationException: Validation failed: 
 -- Email: safasdfadfads0 Severity: Error
 -- Email: 'Email' is not a valid email address. Severity: Error
 -- Password: The length of 'Password' must be at least 8 characters. You entered 6 characters. Severity: Error
 -- ConfirmPassword: The length of 'Confirm Password' must be at least 8 characters. You entered 6 characters. Severity: Error
   at FluentValidation.AbstractValidator`1.RaiseValidationException(ValidationContext`1 context, ValidationResult result) in /_/src/FluentValidation/AbstractValidator.cs:line 531
   at FluentValidation.AbstractValidator`1.ValidateInternalAsync(ValidationContext`1 context, Boolean useAsync, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 258
   at FluentValidation.AbstractValidator`1.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 220
   at FluentValidation.DefaultValidatorExtensions.ValidateAndThrowAsync[T](IValidator`1 validator, T instance, CancellationToken cancellationToken) in /_/src/FluentValidation/DefaultValidatorExtensions_Validate.cs:line 72
   at FoodShop.Infrastructure.Identity.UserServices.RegisterAsync(RegisterRequest request, String origin, CancellationToken token) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Identity\UserServices.cs:line 157
   at FoodShop.Presentation.Controllers.V1.UsersController.RegisterAsync(RegisterRequest request) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Presentation\Controllers\V1\UsersController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FoodShop.Infrastructure.Auth.CurrentUserMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Auth\CurrentUserMiddleware.cs:line 21
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FoodShop.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-04-29 07:37:51.858 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7286/api/v1.0/Users/register - 400 null application/json; ver=1.0 96.6744ms
2024-04-29 17:28:33.625 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 17:28:34.125 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 17:28:34.127 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 17:28:34.128 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 17:28:34.128 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 17:28:34.244 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 17:28:34.307 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:28:34.308 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:28:34.308 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:28:34.309 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:28:34.309 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:28:34.310 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:28:34.310 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:28:34.311 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:28:34.311 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:28:34.312 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:28:34.557 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 17:28:34.568 +07:00 [DBG] Creating DbConnection.
2024-04-29 17:28:34.620 +07:00 [DBG] Created DbConnection. (50ms).
2024-04-29 17:28:34.622 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.631 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.822 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.830 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 17:28:34.836 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2024-04-29 17:28:34.838 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (11ms).
2024-04-29 17:28:34.847 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:28:34.873 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:28:34.876 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.885 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 17:28:34.888 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 17:28:34.889 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:28:34.889 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2024-04-29 17:28:34.890 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.891 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.892 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:28:34.909 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:28:34.909 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.910 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:28:34.912 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.912 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.912 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 17:28:34.913 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 17:28:34.913 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 17:28:34.913 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:28:34.914 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:28:34.915 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.915 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:28:34.915 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 17:28:34.916 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:28:34.916 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:28:34.916 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.916 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.916 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:28:34.917 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:28:34.918 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.918 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:28:34.948 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.948 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.948 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:28:34.948 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:28:34.949 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:28:34.950 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 17:28:34.981 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 17:28:34.984 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.986 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 3ms reading results.
2024-04-29 17:28:34.987 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:34.988 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:28:35.001 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 17:28:35.181 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 17:28:35.376 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:28:35.421 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.422 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.423 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:28:35.423 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:28:35.424 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-29 17:28:35.424 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:28:35.434 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:28:35.460 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.460 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 3ms reading results.
2024-04-29 17:28:35.461 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.461 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:28:35.469 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 17:28:35.476 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:28:35.477 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.478 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.478 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:28:35.478 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:28:35.478 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:28:35.479 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:28:35.485 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:28:35.486 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.487 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 17:28:35.488 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.488 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:28:35.490 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 17:28:35.494 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:28:35.496 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.496 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.497 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:28:35.497 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:28:35.498 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:28:35.498 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:28:35.504 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:28:35.505 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.505 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 17:28:35.506 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.507 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:28:35.511 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 17:28:35.516 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:28:35.518 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-04-29 17:28:35.628 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 17:28:35.746 +07:00 [DBG] Hosting starting
2024-04-29 17:28:35.759 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 17:28:35.768 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 17:28:35.810 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 17:28:35.826 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 17:28:35.831 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 17:28:35.832 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 17:28:35.834 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 17:28:35.837 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 17:28:35.841 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 17:28:35.846 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 17:28:35.847 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 17:28:35.966 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 17:28:35.967 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 17:28:35.967 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 17:28:35.967 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 17:28:35.968 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 17:28:35.968 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 17:28:36.043 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 17:28:36.043 +07:00 [INF] Hosting environment: Development
2024-04-29 17:28:36.044 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 17:28:36.044 +07:00 [DBG] Hosting started
2024-04-29 17:28:36.309 +07:00 [DBG] Connection id "0HN386SGDA0J4" accepted.
2024-04-29 17:28:36.310 +07:00 [DBG] Connection id "0HN386SGDA0J4" started.
2024-04-29 17:28:36.318 +07:00 [DBG] Connection id "0HN386SGDA0J5" accepted.
2024-04-29 17:28:36.318 +07:00 [DBG] Connection id "0HN386SGDA0J5" started.
2024-04-29 17:28:36.348 +07:00 [DBG] Connection id "0HN386SGDA0J4" received FIN.
2024-04-29 17:28:36.348 +07:00 [DBG] Connection id "0HN386SGDA0J5" received FIN.
2024-04-29 17:28:36.354 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 17:28:36.354 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 17:28:36.367 +07:00 [DBG] Connection id "0HN386SGDA0J5" stopped.
2024-04-29 17:28:36.367 +07:00 [DBG] Connection id "0HN386SGDA0J4" stopped.
2024-04-29 17:28:36.369 +07:00 [DBG] Connection id "0HN386SGDA0J4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 17:28:36.369 +07:00 [DBG] Connection id "0HN386SGDA0J5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 17:28:36.489 +07:00 [DBG] Connection id "0HN386SGDA0J6" accepted.
2024-04-29 17:28:36.490 +07:00 [DBG] Connection id "0HN386SGDA0J6" started.
2024-04-29 17:28:36.525 +07:00 [DBG] Connection 0HN386SGDA0J6 established using the following protocol: "Tls13"
2024-04-29 17:28:36.579 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger - null null
2024-04-29 17:28:36.683 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 17:28:36.715 +07:00 [DBG] No candidates found for the request path '/swagger'
2024-04-29 17:28:36.716 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:28:36.735 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger - 301 0 null 158.468ms
2024-04-29 17:28:36.744 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 17:28:36.748 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 17:28:36.748 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:28:36.787 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 17:28:36.789 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 17:28:36.803 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 17:28:36.803 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 17:28:36.804 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 59.5878ms
2024-04-29 17:28:36.870 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 17:28:36.870 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/swagger-ui-bundle.js - null null
2024-04-29 17:28:36.870 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/swagger-ui.css - null null
2024-04-29 17:28:36.870 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/swagger-ui-standalone-preset.js - null null
2024-04-29 17:28:36.870 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 17:28:36.870 +07:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2024-04-29 17:28:36.871 +07:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2024-04-29 17:28:36.871 +07:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2024-04-29 17:28:36.871 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:28:36.871 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:28:36.871 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:28:36.874 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 4.167ms
2024-04-29 17:28:36.892 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-04-29 17:28:36.895 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-04-29 17:28:36.896 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 25.8653ms
2024-04-29 17:28:36.896 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/swagger-ui.css - 200 143943 text/css 25.8651ms
2024-04-29 17:28:36.912 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-04-29 17:28:36.912 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 42.4631ms
2024-04-29 17:28:36.928 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.7944ms
2024-04-29 17:28:37.759 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 17:28:37.759 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 17:28:37.760 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:28:37.893 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 133.9811ms
2024-04-29 17:29:01.314 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 17:29:02.068 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 17:29:02.074 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 17:29:02.074 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 17:29:02.075 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 17:29:02.202 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 17:29:02.283 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:29:02.284 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:29:02.284 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:29:02.284 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:29:02.284 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:29:02.286 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:29:02.286 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:29:02.286 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:29:02.286 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:29:02.287 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:29:02.422 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 17:29:02.427 +07:00 [DBG] Creating DbConnection.
2024-04-29 17:29:02.453 +07:00 [DBG] Created DbConnection. (23ms).
2024-04-29 17:29:02.455 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.459 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.656 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.667 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 17:29:02.677 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (9ms).
2024-04-29 17:29:02.680 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (17ms).
2024-04-29 17:29:02.691 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:29:02.727 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:29:02.730 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.740 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (6ms).
2024-04-29 17:29:02.744 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 17:29:02.745 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:29:02.746 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2024-04-29 17:29:02.746 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.748 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.749 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:29:02.787 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:29:02.787 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.789 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (1ms).
2024-04-29 17:29:02.790 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.791 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.791 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 17:29:02.792 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 17:29:02.792 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 17:29:02.792 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:29:02.794 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:29:02.795 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.795 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:29:02.796 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 17:29:02.796 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:29:02.796 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:29:02.797 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.797 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.797 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:29:02.799 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:29:02.800 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.801 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:29:02.817 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.818 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.818 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:29:02.818 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:29:02.818 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:29:02.819 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 17:29:02.824 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 17:29:02.828 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.830 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 3ms reading results.
2024-04-29 17:29:02.831 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:02.831 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:29:02.842 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 17:29:03.056 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 17:29:03.200 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:29:03.235 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.236 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.236 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:29:03.237 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:29:03.237 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-29 17:29:03.237 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:29:03.243 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:29:03.258 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.258 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 17:29:03.259 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.260 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:29:03.266 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 17:29:03.271 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:29:03.272 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.273 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.273 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:29:03.274 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:29:03.274 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:29:03.274 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:29:03.278 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:29:03.279 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.279 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 17:29:03.280 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.280 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:29:03.281 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 17:29:03.284 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:29:03.286 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.286 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.286 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:29:03.287 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:29:03.287 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:29:03.287 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:29:03.291 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:29:03.292 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.292 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 17:29:03.293 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.293 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:29:03.295 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 17:29:03.298 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:29:03.300 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 17:29:03.342 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 17:29:03.415 +07:00 [DBG] Hosting starting
2024-04-29 17:29:03.426 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 17:29:03.434 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 17:29:03.441 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 17:29:03.449 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 17:29:03.454 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 17:29:03.456 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 17:29:03.459 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 17:29:03.461 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 17:29:03.464 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 17:29:03.468 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 17:29:03.469 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 17:29:03.570 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 17:29:03.571 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 17:29:03.571 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 17:29:03.571 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 17:29:03.572 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 17:29:03.572 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 17:29:03.635 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 17:29:03.636 +07:00 [INF] Hosting environment: Development
2024-04-29 17:29:03.636 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 17:29:03.636 +07:00 [DBG] Hosting started
2024-04-29 17:29:03.913 +07:00 [DBG] Connection id "0HN386SOKI82U" accepted.
2024-04-29 17:29:03.915 +07:00 [DBG] Connection id "0HN386SOKI82U" started.
2024-04-29 17:29:03.918 +07:00 [DBG] Connection id "0HN386SOKI82V" accepted.
2024-04-29 17:29:03.919 +07:00 [DBG] Connection id "0HN386SOKI82V" started.
2024-04-29 17:29:03.935 +07:00 [DBG] Connection id "0HN386SOKI82U" received FIN.
2024-04-29 17:29:03.935 +07:00 [DBG] Connection id "0HN386SOKI82V" received FIN.
2024-04-29 17:29:03.943 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 17:29:03.943 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 17:29:03.958 +07:00 [DBG] Connection id "0HN386SOKI82V" stopped.
2024-04-29 17:29:03.958 +07:00 [DBG] Connection id "0HN386SOKI82U" stopped.
2024-04-29 17:29:03.960 +07:00 [DBG] Connection id "0HN386SOKI82V" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 17:29:03.960 +07:00 [DBG] Connection id "0HN386SOKI82U" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 17:29:04.310 +07:00 [DBG] Connection id "0HN386SOKI830" accepted.
2024-04-29 17:29:04.311 +07:00 [DBG] Connection id "0HN386SOKI830" started.
2024-04-29 17:29:04.334 +07:00 [DBG] Connection 0HN386SOKI830 established using the following protocol: "Tls13"
2024-04-29 17:29:04.363 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 17:29:04.441 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 17:29:04.478 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 17:29:04.478 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:29:04.560 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 17:29:04.562 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 17:29:04.576 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 17:29:04.581 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 17:29:04.583 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 221.073ms
2024-04-29 17:29:04.659 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 17:29:04.659 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 17:29:04.667 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 8.3454ms
2024-04-29 17:29:04.697 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.6775ms
2024-04-29 17:29:05.557 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 17:29:05.558 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 17:29:05.558 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:29:05.694 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 136.7576ms
2024-04-29 17:30:31.307 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 17:30:31.785 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 17:30:31.787 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 17:30:31.788 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 17:30:31.788 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 17:30:31.893 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 17:30:31.947 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:30:31.948 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:30:31.948 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:30:31.948 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:30:31.950 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:30:31.950 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:30:31.951 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:30:31.951 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:30:31.951 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:30:31.952 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:30:32.091 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 17:30:32.096 +07:00 [DBG] Creating DbConnection.
2024-04-29 17:30:32.129 +07:00 [DBG] Created DbConnection. (30ms).
2024-04-29 17:30:32.133 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.139 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.294 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.303 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 17:30:32.310 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (7ms).
2024-04-29 17:30:32.312 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (13ms).
2024-04-29 17:30:32.320 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:30:32.348 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:30:32.350 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.360 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (5ms).
2024-04-29 17:30:32.363 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 17:30:32.364 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:30:32.364 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:30:32.364 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.365 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.367 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:30:32.385 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:30:32.386 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.387 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:30:32.388 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.388 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.389 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 17:30:32.390 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 17:30:32.392 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2024-04-29 17:30:32.393 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:30:32.396 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:30:32.396 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.397 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:30:32.397 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 17:30:32.397 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:30:32.397 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:30:32.397 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.398 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.398 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:30:32.400 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:30:32.400 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.401 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:30:32.417 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.417 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.417 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:30:32.417 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:30:32.418 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:30:32.418 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 17:30:32.422 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 17:30:32.425 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.426 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 17:30:32.426 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.427 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:30:32.434 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 17:30:32.542 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 17:30:32.666 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:30:32.684 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.684 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.684 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:30:32.684 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:30:32.685 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:30:32.685 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:30:32.699 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:30:32.712 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.713 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 17:30:32.713 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.713 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:30:32.719 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 17:30:32.721 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:30:32.722 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.722 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.722 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:30:32.723 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:30:32.723 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:30:32.723 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:30:32.726 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:30:32.727 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.727 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 17:30:32.727 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.727 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:30:32.728 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 17:30:32.730 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:30:32.731 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.731 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.731 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:30:32.732 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:30:32.732 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:30:32.732 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:30:32.735 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:30:32.736 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.736 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 17:30:32.736 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.736 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:30:32.738 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 17:30:32.741 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:30:32.743 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 17:30:32.782 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 17:30:32.856 +07:00 [DBG] Hosting starting
2024-04-29 17:30:32.866 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 17:30:32.873 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 17:30:32.878 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 17:30:32.886 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 17:30:32.889 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 17:30:32.890 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 17:30:32.893 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 17:30:32.895 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 17:30:32.898 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 17:30:32.901 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 17:30:32.902 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 17:30:32.979 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 17:30:32.979 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 17:30:32.980 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 17:30:32.980 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 17:30:32.980 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 17:30:32.980 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 17:30:33.060 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 17:30:33.060 +07:00 [INF] Hosting environment: Development
2024-04-29 17:30:33.061 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 17:30:33.061 +07:00 [DBG] Hosting started
2024-04-29 17:30:33.318 +07:00 [DBG] Connection id "0HN386TJ96G9D" received FIN.
2024-04-29 17:30:33.325 +07:00 [DBG] Connection id "0HN386TJ96G9D" accepted.
2024-04-29 17:30:33.326 +07:00 [DBG] Connection id "0HN386TJ96G9D" started.
2024-04-29 17:30:33.338 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 17:30:33.348 +07:00 [DBG] Connection id "0HN386TJ96G9D" stopped.
2024-04-29 17:30:33.351 +07:00 [DBG] Connection id "0HN386TJ96G9D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 17:30:33.507 +07:00 [DBG] Connection id "0HN386TJ96G9E" accepted.
2024-04-29 17:30:33.507 +07:00 [DBG] Connection id "0HN386TJ96G9E" started.
2024-04-29 17:30:33.530 +07:00 [DBG] Connection 0HN386TJ96G9E established using the following protocol: "Tls13"
2024-04-29 17:30:33.562 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 17:30:33.619 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 17:30:33.655 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 17:30:33.655 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:30:33.695 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 17:30:33.697 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 17:30:33.709 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 17:30:33.710 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 17:30:33.713 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 151.2697ms
2024-04-29 17:30:33.782 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 17:30:33.782 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 17:30:33.787 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 4.7447ms
2024-04-29 17:30:33.812 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.2902ms
2024-04-29 17:30:34.612 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 17:30:34.612 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 17:30:34.613 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:30:34.774 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 161.7882ms
2024-04-29 17:46:58.480 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 17:46:58.965 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 17:46:58.966 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 17:46:58.967 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 17:46:58.967 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 17:46:59.053 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 17:46:59.115 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:46:59.116 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:46:59.117 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:46:59.117 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:46:59.118 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:46:59.119 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:46:59.119 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:46:59.120 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:46:59.120 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:46:59.121 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:46:59.364 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 17:46:59.370 +07:00 [DBG] Creating DbConnection.
2024-04-29 17:46:59.422 +07:00 [DBG] Created DbConnection. (48ms).
2024-04-29 17:46:59.424 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.429 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.599 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.605 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 17:46:59.612 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2024-04-29 17:46:59.614 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (12ms).
2024-04-29 17:46:59.621 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:46:59.645 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:46:59.647 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.657 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (5ms).
2024-04-29 17:46:59.661 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 17:46:59.661 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:46:59.662 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2024-04-29 17:46:59.662 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.663 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.664 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:46:59.701 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:46:59.702 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.703 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:46:59.705 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.705 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.705 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 17:46:59.706 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 17:46:59.706 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 17:46:59.706 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:46:59.709 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:46:59.709 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.710 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:46:59.710 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 17:46:59.711 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:46:59.711 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:46:59.711 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.712 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.712 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:46:59.713 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:46:59.714 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.714 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:46:59.735 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.735 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.736 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:46:59.736 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:46:59.736 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:46:59.737 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 17:46:59.743 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 17:46:59.747 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.748 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 17:46:59.749 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:46:59.749 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:46:59.762 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 17:46:59.918 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 17:47:00.079 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:47:00.114 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.114 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.114 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:47:00.114 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:47:00.115 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:47:00.115 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:47:00.129 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:47:00.142 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.142 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 17:47:00.143 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.143 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:47:00.148 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 17:47:00.152 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:47:00.153 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.154 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.154 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:47:00.154 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:47:00.154 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:47:00.154 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:47:00.157 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:47:00.158 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.158 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 17:47:00.158 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.159 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:47:00.160 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 17:47:00.162 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:47:00.163 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.163 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.163 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:47:00.163 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:47:00.163 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:47:00.164 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:47:00.167 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:47:00.168 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.168 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 17:47:00.168 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.169 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:47:00.170 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 17:47:00.173 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:47:00.174 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 17:47:00.207 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 17:47:00.263 +07:00 [DBG] Hosting starting
2024-04-29 17:47:00.273 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 17:47:00.280 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 17:47:00.284 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 17:47:00.292 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 17:47:00.295 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 17:47:00.296 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 17:47:00.298 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 17:47:00.300 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 17:47:00.303 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 17:47:00.306 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 17:47:00.306 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 17:47:00.384 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 17:47:00.384 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 17:47:00.384 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 17:47:00.385 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 17:47:00.385 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 17:47:00.385 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 17:47:00.397 +07:00 [DBG] Connection id "0HN3876PEN27N" accepted.
2024-04-29 17:47:00.398 +07:00 [DBG] Connection id "0HN3876PEN27N" started.
2024-04-29 17:47:00.419 +07:00 [DBG] Connection id "0HN3876PEN27N" received FIN.
2024-04-29 17:47:00.425 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 17:47:00.440 +07:00 [DBG] Connection id "0HN3876PEN27N" stopped.
2024-04-29 17:47:00.442 +07:00 [DBG] Connection id "0HN3876PEN27N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 17:47:00.470 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 17:47:00.470 +07:00 [INF] Hosting environment: Development
2024-04-29 17:47:00.471 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 17:47:00.471 +07:00 [DBG] Hosting started
2024-04-29 17:47:00.570 +07:00 [DBG] Connection id "0HN3876PEN27O" accepted.
2024-04-29 17:47:00.570 +07:00 [DBG] Connection id "0HN3876PEN27O" started.
2024-04-29 17:47:00.603 +07:00 [DBG] Connection 0HN3876PEN27O established using the following protocol: "Tls13"
2024-04-29 17:47:00.641 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 17:47:00.706 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 17:47:00.739 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 17:47:00.739 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:47:00.792 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 17:47:00.794 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 17:47:00.809 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 17:47:00.811 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 17:47:00.816 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 174.1398ms
2024-04-29 17:47:00.841 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 17:47:00.845 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 4.1325ms
2024-04-29 17:47:00.889 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 17:47:00.926 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.8398ms
2024-04-29 17:47:01.782 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 17:47:01.783 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 17:47:01.783 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:47:01.940 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 157.3459ms
2024-04-29 17:49:13.738 +07:00 [DBG] Connection id "0HN3876PEN27O" is closing.
2024-04-29 17:49:13.739 +07:00 [DBG] Connection id "0HN3876PEN27O" is closed. The last processed stream ID was 7.
2024-04-29 17:49:13.741 +07:00 [DBG] Connection id "0HN3876PEN27O" received FIN.
2024-04-29 17:49:13.742 +07:00 [DBG] Connection id "0HN3876PEN27O" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 17:49:13.745 +07:00 [DBG] The connection queue processing loop for 0HN3876PEN27O completed.
2024-04-29 17:49:13.748 +07:00 [DBG] Connection id "0HN3876PEN27O" stopped.
2024-04-29 17:49:38.672 +07:00 [DBG] Connection id "0HN3876PEN27P" accepted.
2024-04-29 17:49:38.672 +07:00 [DBG] Connection id "0HN3876PEN27P" started.
2024-04-29 17:49:38.678 +07:00 [DBG] Connection 0HN3876PEN27P established using the following protocol: "Tls13"
2024-04-29 17:49:38.680 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7286/api/v1.0/Categories - application/json; ver=1.0 103
2024-04-29 17:49:38.704 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1.0/Categories'
2024-04-29 17:49:38.706 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.CategoriesController.UpdateCategory (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Categories' is valid for the request path '/api/v1.0/Categories'
2024-04-29 17:49:38.712 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.CategoriesController.UpdateCategory (FoodShop.Presentation)'
2024-04-29 17:49:38.714 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 17:49:38.715 +07:00 [INF] Start request......!
2024-04-29 17:49:38.771 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 17:49:39.037 +07:00 [DBG] Policy authentication schemes  did not succeed
2024-04-29 17:49:39.044 +07:00 [INF] Authorization failed. These requirements were not met:
FoodShop.Infrastructure.Auth.Permission.PermissionRequirement
2024-04-29 17:49:39.048 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-29 17:49:39.052 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7286/api/v1.0/Categories - 401 0 null 372.0941ms
2024-04-29 17:49:39.054 +07:00 [DBG] Connection id "0HN3876PEN27P", Request id "0HN3876PEN27P:00000001": started reading request body.
2024-04-29 17:49:39.054 +07:00 [DBG] Connection id "0HN3876PEN27P", Request id "0HN3876PEN27P:00000001": done reading request body.
2024-04-29 17:49:50.895 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 17:49:51.389 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 17:49:51.390 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 17:49:51.391 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 17:49:51.391 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 17:49:51.490 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 17:49:51.542 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:49:51.542 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:49:51.543 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:49:51.543 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:49:51.543 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:49:51.544 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:49:51.544 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:49:51.545 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:49:51.545 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:49:51.545 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:49:51.670 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 17:49:51.676 +07:00 [DBG] Creating DbConnection.
2024-04-29 17:49:51.709 +07:00 [DBG] Created DbConnection. (29ms).
2024-04-29 17:49:51.713 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.719 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.868 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.875 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 17:49:51.881 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (5ms).
2024-04-29 17:49:51.883 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (10ms).
2024-04-29 17:49:51.889 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:49:51.914 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:49:51.916 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.924 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 17:49:51.927 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 17:49:51.927 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:49:51.927 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:49:51.927 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.928 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.929 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:49:51.952 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:49:51.952 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.953 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:49:51.954 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.954 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.954 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 17:49:51.955 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 17:49:51.955 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 17:49:51.955 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:49:51.956 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:49:51.957 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.957 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:49:51.957 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 17:49:51.957 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:49:51.958 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:49:51.958 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.958 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.958 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:49:51.959 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:49:51.959 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.959 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:49:51.971 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.971 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.972 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:49:51.972 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:49:51.972 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:49:51.973 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 17:49:51.977 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 17:49:51.980 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.981 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 17:49:51.982 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:51.982 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:49:51.991 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 17:49:52.103 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 17:49:52.255 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:49:52.288 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.289 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.289 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:49:52.289 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:49:52.289 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:49:52.290 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:49:52.293 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:49:52.305 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.305 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 17:49:52.306 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.306 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:49:52.311 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 17:49:52.315 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:49:52.317 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.317 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.317 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:49:52.318 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:49:52.318 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:49:52.318 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:49:52.322 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:49:52.322 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.323 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 17:49:52.323 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.323 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:49:52.324 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 17:49:52.326 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:49:52.327 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.327 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.327 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:49:52.328 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:49:52.328 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:49:52.328 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:49:52.330 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:49:52.331 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.331 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 17:49:52.332 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.332 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:49:52.334 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 17:49:52.336 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:49:52.338 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 17:49:52.381 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 17:49:52.467 +07:00 [DBG] Hosting starting
2024-04-29 17:49:52.481 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 17:49:52.491 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 17:49:52.497 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 17:49:52.504 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 17:49:52.506 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 17:49:52.507 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 17:49:52.509 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 17:49:52.510 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 17:49:52.512 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 17:49:52.515 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 17:49:52.515 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 17:49:52.787 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 17:49:52.787 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 17:49:52.787 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 17:49:52.787 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 17:49:52.787 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 17:49:52.788 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 17:49:52.875 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 17:49:52.875 +07:00 [INF] Hosting environment: Development
2024-04-29 17:49:52.876 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 17:49:52.877 +07:00 [DBG] Hosting started
2024-04-29 17:49:53.170 +07:00 [DBG] Connection id "0HN3878CUCSG8" accepted.
2024-04-29 17:49:53.170 +07:00 [DBG] Connection id "0HN3878CUCSG9" accepted.
2024-04-29 17:49:53.171 +07:00 [DBG] Connection id "0HN3878CUCSG9" started.
2024-04-29 17:49:53.171 +07:00 [DBG] Connection id "0HN3878CUCSG8" started.
2024-04-29 17:49:53.175 +07:00 [DBG] Connection id "0HN3878CUCSG8" received FIN.
2024-04-29 17:49:53.175 +07:00 [DBG] Connection id "0HN3878CUCSG9" received FIN.
2024-04-29 17:49:53.190 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 17:49:53.190 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 17:49:53.211 +07:00 [DBG] Connection id "0HN3878CUCSG8" stopped.
2024-04-29 17:49:53.211 +07:00 [DBG] Connection id "0HN3878CUCSG9" stopped.
2024-04-29 17:49:53.214 +07:00 [DBG] Connection id "0HN3878CUCSG8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 17:49:53.214 +07:00 [DBG] Connection id "0HN3878CUCSG9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 17:49:53.330 +07:00 [DBG] Connection id "0HN3878CUCSGA" accepted.
2024-04-29 17:49:53.331 +07:00 [DBG] Connection id "0HN3878CUCSGA" started.
2024-04-29 17:49:53.358 +07:00 [DBG] Connection 0HN3878CUCSGA established using the following protocol: "Tls13"
2024-04-29 17:49:53.386 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 17:49:53.439 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 17:49:53.471 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 17:49:53.472 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:49:53.521 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 17:49:53.523 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 17:49:53.534 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 17:49:53.535 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 17:49:53.537 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 152.2753ms
2024-04-29 17:49:53.605 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 17:49:53.605 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 17:49:53.610 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 5.3905ms
2024-04-29 17:49:53.635 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.0371ms
2024-04-29 17:49:54.355 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 17:49:54.357 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 17:49:54.357 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:49:54.497 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 142.6638ms
2024-04-29 17:50:16.843 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7286/api/v1.0/Categories - application/json; ver=1.0 103
2024-04-29 17:50:16.859 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1.0/Categories'
2024-04-29 17:50:16.862 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.CategoriesController.UpdateCategory (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Categories' is valid for the request path '/api/v1.0/Categories'
2024-04-29 17:50:16.867 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.CategoriesController.UpdateCategory (FoodShop.Presentation)'
2024-04-29 17:50:16.869 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 17:50:16.871 +07:00 [INF] Start request......!
2024-04-29 17:50:16.894 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 17:50:17.016 +07:00 [DBG] Policy authentication schemes  did not succeed
2024-04-29 17:50:17.022 +07:00 [INF] Authorization failed. These requirements were not met:
FoodShop.Infrastructure.Auth.Permission.PermissionRequirement
2024-04-29 17:50:17.026 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-29 17:50:17.028 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7286/api/v1.0/Categories - 401 0 null 184.2098ms
2024-04-29 17:50:17.029 +07:00 [DBG] Connection id "0HN3878CUCSGA", Request id "0HN3878CUCSGA:00000009": started reading request body.
2024-04-29 17:50:17.029 +07:00 [DBG] Connection id "0HN3878CUCSGA", Request id "0HN3878CUCSGA:00000009": done reading request body.
2024-04-29 17:50:32.668 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7286/api/v1.0/Categories - application/json; ver=1.0 139
2024-04-29 17:50:32.670 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1.0/Categories'
2024-04-29 17:50:32.670 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.CategoriesController.UpdateCategory (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Categories' is valid for the request path '/api/v1.0/Categories'
2024-04-29 17:50:32.670 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.CategoriesController.UpdateCategory (FoodShop.Presentation)'
2024-04-29 17:50:32.671 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 17:50:32.680 +07:00 [INF] Start request......!
2024-04-29 17:50:32.685 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 17:50:32.692 +07:00 [DBG] Policy authentication schemes  did not succeed
2024-04-29 17:50:32.693 +07:00 [INF] Authorization failed. These requirements were not met:
FoodShop.Infrastructure.Auth.Permission.PermissionRequirement
2024-04-29 17:50:32.693 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-29 17:50:32.694 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7286/api/v1.0/Categories - 401 0 null 26.2882ms
2024-04-29 17:50:32.694 +07:00 [DBG] Connection id "0HN3878CUCSGA", Request id "0HN3878CUCSGA:0000000B": started reading request body.
2024-04-29 17:50:32.694 +07:00 [DBG] Connection id "0HN3878CUCSGA", Request id "0HN3878CUCSGA:0000000B": done reading request body.
2024-04-29 17:50:46.206 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 17:50:47.452 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 17:50:47.454 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 17:50:47.454 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 17:50:47.455 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 17:50:47.578 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 17:50:47.648 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:50:47.649 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:50:47.649 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:50:47.649 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:50:47.649 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:50:47.650 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:50:47.651 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:50:47.654 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:50:47.658 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:50:47.660 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 17:50:47.974 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 17:50:47.985 +07:00 [DBG] Creating DbConnection.
2024-04-29 17:50:48.040 +07:00 [DBG] Created DbConnection. (51ms).
2024-04-29 17:50:48.043 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.048 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.297 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.303 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 17:50:48.313 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (7ms).
2024-04-29 17:50:48.316 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (14ms).
2024-04-29 17:50:48.325 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:50:48.360 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:50:48.364 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.374 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (7ms).
2024-04-29 17:50:48.378 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 17:50:48.378 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:50:48.379 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:50:48.379 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.380 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.381 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:50:48.401 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:50:48.402 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.403 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:50:48.404 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.405 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.405 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 17:50:48.405 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 17:50:48.405 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 17:50:48.406 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:50:48.408 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 17:50:48.408 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.408 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:50:48.409 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 17:50:48.409 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:50:48.409 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 17:50:48.409 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.409 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.410 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:50:48.411 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 17:50:48.411 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.412 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:50:48.429 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.430 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.430 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:50:48.430 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:50:48.430 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:50:48.431 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 17:50:48.437 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 17:50:48.442 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.446 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 4ms reading results.
2024-04-29 17:50:48.447 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.448 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:50:48.464 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 17:50:48.637 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 17:50:48.766 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:50:48.785 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.785 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.786 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:50:48.786 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:50:48.786 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:50:48.786 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:50:48.789 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:50:48.799 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.799 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 17:50:48.800 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.800 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:50:48.803 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 17:50:48.806 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:50:48.806 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.807 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.807 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:50:48.807 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:50:48.807 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:50:48.807 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:50:48.809 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:50:48.810 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.810 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 17:50:48.810 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.810 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:50:48.811 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 17:50:48.813 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 17:50:48.813 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.814 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.814 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 17:50:48.814 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:50:48.814 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 17:50:48.814 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:50:48.816 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 17:50:48.817 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.817 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 17:50:48.817 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.817 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 17:50:48.819 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 17:50:48.820 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 17:50:48.821 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 17:50:48.894 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 17:51:03.047 +07:00 [DBG] Hosting starting
2024-04-29 17:51:03.073 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 17:51:03.085 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 17:51:03.094 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 17:51:03.108 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 17:51:03.113 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 17:51:03.114 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 17:51:03.116 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 17:51:03.118 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 17:51:03.121 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 17:51:03.127 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 17:51:03.128 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 17:51:03.280 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 17:51:03.280 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 17:51:03.280 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 17:51:03.280 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 17:51:03.280 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 17:51:03.281 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 17:51:03.337 +07:00 [DBG] Connection id "0HN38791RIB7D" accepted.
2024-04-29 17:51:03.338 +07:00 [DBG] Connection id "0HN38791RIB7D" started.
2024-04-29 17:51:03.367 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 17:51:03.368 +07:00 [INF] Hosting environment: Development
2024-04-29 17:51:03.368 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 17:51:03.368 +07:00 [DBG] Hosting started
2024-04-29 17:51:03.421 +07:00 [DBG] Connection id "0HN38791RIB7E" accepted.
2024-04-29 17:51:03.421 +07:00 [DBG] Connection id "0HN38791RIB7E" started.
2024-04-29 17:51:03.750 +07:00 [DBG] Connection id "0HN38791RIB7F" accepted.
2024-04-29 17:51:03.752 +07:00 [DBG] Connection id "0HN38791RIB7F" started.
2024-04-29 17:51:03.794 +07:00 [DBG] Connection 0HN38791RIB7F established using the following protocol: "Tls13"
2024-04-29 17:51:03.866 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 17:51:03.978 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 17:51:04.044 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 17:51:04.045 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:51:04.126 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 17:51:04.129 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 17:51:04.160 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 17:51:04.161 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 17:51:04.169 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 308.6234ms
2024-04-29 17:51:04.277 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 17:51:04.286 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 8.8426ms
2024-04-29 17:51:04.296 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 17:51:04.353 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.2437ms
2024-04-29 17:51:05.319 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 17:51:05.321 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 17:51:05.323 +07:00 [DBG] Request did not match any endpoints
2024-04-29 17:51:13.690 +07:00 [DBG] Authentication of the HTTPS connection timed out.
2024-04-29 17:51:13.690 +07:00 [DBG] Authentication of the HTTPS connection timed out.
2024-04-29 17:51:13.694 +07:00 [DBG] Connection id "0HN38791RIB7E" stopped.
2024-04-29 17:51:13.694 +07:00 [DBG] Connection id "0HN38791RIB7D" stopped.
2024-04-29 17:51:13.696 +07:00 [DBG] Connection id "0HN38791RIB7E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 17:51:13.697 +07:00 [DBG] Connection id "0HN38791RIB7D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 17:51:15.423 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10104.5301ms
2024-04-29 18:03:23.160 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 18:03:23.646 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 18:03:23.648 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 18:03:23.649 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 18:03:23.649 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 18:03:23.747 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 18:03:23.806 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:03:23.807 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:03:23.807 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:03:23.808 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:03:23.809 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:03:23.809 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:03:23.810 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:03:23.810 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:03:23.810 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:03:23.811 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:03:23.957 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 18:03:23.962 +07:00 [DBG] Creating DbConnection.
2024-04-29 18:03:23.995 +07:00 [DBG] Created DbConnection. (29ms).
2024-04-29 18:03:23.997 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.003 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.143 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.150 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:03:24.156 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (5ms).
2024-04-29 18:03:24.158 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (10ms).
2024-04-29 18:03:24.164 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:03:24.185 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:03:24.187 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.194 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 18:03:24.196 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:03:24.197 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:03:24.197 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:03:24.197 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.198 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.199 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:03:24.223 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:03:24.224 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.224 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:03:24.226 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.226 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.226 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:03:24.226 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:03:24.227 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:03:24.227 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:03:24.228 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:03:24.228 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.229 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:03:24.229 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:03:24.229 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:03:24.230 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:03:24.230 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.230 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.230 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:03:24.231 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:03:24.231 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.232 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:03:24.242 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.243 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.243 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:03:24.243 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:03:24.243 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:03:24.244 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:03:24.250 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:03:24.253 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.254 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 18:03:24.255 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.255 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:03:24.264 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 18:03:24.379 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 18:03:24.513 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:03:24.537 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.538 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.539 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:03:24.539 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:03:24.539 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:03:24.539 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:03:24.552 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:03:24.562 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.563 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 18:03:24.563 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.564 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:03:24.568 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 18:03:24.571 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:03:24.572 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.572 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.572 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:03:24.573 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:03:24.573 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:03:24.573 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:03:24.575 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:03:24.576 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.576 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 18:03:24.577 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.577 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:03:24.577 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 18:03:24.580 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:03:24.581 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.581 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.581 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:03:24.581 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:03:24.582 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:03:24.582 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:03:24.585 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:03:24.585 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.586 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 18:03:24.586 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.586 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:03:24.658 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'IdentityUserRole' entity with key '{RoleId: 67ca9d62-faeb-473d-b370-3ec868ef6435, UserId: 6be25528-45b8-4d5d-91d6-08dc683bfd8f}'.
2024-04-29 18:03:24.662 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 18:03:24.664 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:03:24.668 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:03:24.683 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'FoodShop.Persistence.ApplicationDbContext'.
System.InvalidOperationException: The value of 'IdentityUserRole<Guid>.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: The value of 'IdentityUserRole<Guid>.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-04-29 18:03:24.686 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 18:03:24.688 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:03:24.689 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 18:04:00.152 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 18:04:00.686 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 18:04:00.690 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 18:04:00.690 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 18:04:00.690 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 18:04:00.795 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 18:04:00.849 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:04:00.850 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:04:00.850 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:04:00.850 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:04:00.851 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:04:00.851 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:04:00.851 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:04:00.852 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:04:00.852 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:04:00.852 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:04:00.984 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 18:04:00.991 +07:00 [DBG] Creating DbConnection.
2024-04-29 18:04:01.026 +07:00 [DBG] Created DbConnection. (31ms).
2024-04-29 18:04:01.029 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.035 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.184 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.191 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:04:01.200 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2024-04-29 18:04:01.202 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (13ms).
2024-04-29 18:04:01.210 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:04:01.236 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:04:01.239 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.246 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 18:04:01.249 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:04:01.250 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:04:01.250 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:04:01.250 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.251 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.251 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:04:01.264 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:04:01.265 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.265 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:04:01.266 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.266 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.267 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:04:01.267 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:04:01.267 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:04:01.267 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:04:01.269 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:04:01.269 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.270 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:04:01.270 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:04:01.270 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:04:01.270 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:04:01.270 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.271 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.271 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:04:01.272 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:04:01.272 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.272 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:04:01.284 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.285 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.285 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:04:01.285 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:04:01.285 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:04:01.286 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:04:01.287 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:04:01.290 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.292 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 18:04:01.292 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.292 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:04:01.301 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 18:04:01.415 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 18:04:01.567 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:04:01.592 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.592 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.592 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:04:01.593 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:04:01.593 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:04:01.593 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:04:01.595 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:04:01.606 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.606 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 18:04:01.607 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.607 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:04:01.611 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 18:04:01.614 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:04:01.615 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.615 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.615 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:04:01.616 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:04:01.616 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:04:01.616 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:04:01.617 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:04:01.618 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.618 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 18:04:01.618 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.618 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:04:01.619 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 18:04:01.621 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:04:01.622 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.622 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.622 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:04:01.623 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:04:01.623 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:04:01.623 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:04:01.624 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:04:01.624 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.625 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 18:04:01.625 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.625 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:04:01.702 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'IdentityUserRole' entity with key '{RoleId: ab0e0460-6030-469d-ab00-dbd50576f653, UserId: 35fda041-f483-4513-3b87-08dc683c13a3}'.
2024-04-29 18:04:01.706 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 18:04:01.708 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:04:01.712 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:04:01.729 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'FoodShop.Persistence.ApplicationDbContext'.
System.InvalidOperationException: The value of 'IdentityUserRole<Guid>.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: The value of 'IdentityUserRole<Guid>.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-04-29 18:04:01.732 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 18:04:01.735 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:04:01.736 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 18:05:08.988 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 18:05:09.361 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 18:05:09.362 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 18:05:09.364 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 18:05:09.365 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 18:05:09.475 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 18:05:09.544 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:05:09.545 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:05:09.545 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:05:09.545 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:05:09.545 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:05:09.546 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:05:09.546 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:05:09.546 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:05:09.547 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:05:09.547 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:05:09.693 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 18:05:09.698 +07:00 [DBG] Creating DbConnection.
2024-04-29 18:05:09.726 +07:00 [DBG] Created DbConnection. (25ms).
2024-04-29 18:05:09.728 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.733 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.852 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.858 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:05:09.866 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (5ms).
2024-04-29 18:05:09.868 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (12ms).
2024-04-29 18:05:09.874 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:05:09.897 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:05:09.899 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.905 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (3ms).
2024-04-29 18:05:09.908 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:05:09.909 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:05:09.909 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:05:09.909 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.910 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.911 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:05:09.924 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:05:09.924 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.925 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:05:09.926 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.926 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.927 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:05:09.927 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:05:09.927 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:05:09.927 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:05:09.929 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:05:09.929 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.929 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:05:09.930 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:05:09.930 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:05:09.930 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:05:09.930 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.930 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.931 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:05:09.932 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:05:09.932 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.932 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:05:09.944 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.944 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.944 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:05:09.944 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:05:09.945 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:05:09.945 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:05:09.948 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:05:09.950 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.952 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 18:05:09.952 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:09.953 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:05:09.961 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 18:05:10.067 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 18:05:10.199 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:05:10.223 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.224 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.224 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:05:10.224 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:05:10.224 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:05:10.224 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:05:10.227 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:05:10.238 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.238 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 18:05:10.239 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.239 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:05:10.244 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 18:05:10.247 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:05:10.248 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.249 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.249 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:05:10.249 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:05:10.249 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:05:10.250 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:05:10.251 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:05:10.252 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.252 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 18:05:10.252 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.253 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:05:10.334 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'AppRole' entity with key '{Id: c6392c46-30ee-4b70-b46d-afefe465a6bd}'.
2024-04-29 18:05:10.336 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'AppRole' entity with key '{Id: 4e776a5c-8ae2-40e1-b8ce-42b23bc032be}'.
2024-04-29 18:05:10.338 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 18:05:10.341 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:05:10.354 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:05:10.409 +07:00 [DBG] Executing 2 update commands as a batch.
2024-04-29 18:05:10.418 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.421 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.424 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:05:10.425 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:05:10.428 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-29 18:05:10.431 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='4e776a5c-8ae2-40e1-b8ce-42b23bc032be', @p1=NULL (Size = 4000), @p2=NULL (Size = 4000), @p3=NULL (DbType = DateTime2), @p4='Role Basic' (Nullable = false) (Size = 250), @p5='Basic' (Size = 4000), @p6='basic' (Size = 4000), @p7='Basic' (Nullable = false) (Size = 50), @p8=NULL (Size = 4000), @p9=NULL (DbType = DateTime2), @p10='c6392c46-30ee-4b70-b46d-afefe465a6bd', @p11=NULL (Size = 4000), @p12=NULL (Size = 4000), @p13=NULL (DbType = DateTime2), @p14='Role Admin' (Nullable = false) (Size = 250), @p15='Admin' (Size = 4000), @p16='admin' (Size = 4000), @p17='admin' (Nullable = false) (Size = 50), @p18=NULL (Size = 4000), @p19=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppRole] ([Id], [ConcurrencyStamp], [CreateBy], [CreateDate], [Description], [Name], [NormalizedName], [RoleCode], [UpdateBy], [UpdateDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-04-29 18:05:10.465 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@p0='4e776a5c-8ae2-40e1-b8ce-42b23bc032be', @p1=NULL (Size = 4000), @p2=NULL (Size = 4000), @p3=NULL (DbType = DateTime2), @p4='Role Basic' (Nullable = false) (Size = 250), @p5='Basic' (Size = 4000), @p6='basic' (Size = 4000), @p7='Basic' (Nullable = false) (Size = 50), @p8=NULL (Size = 4000), @p9=NULL (DbType = DateTime2), @p10='c6392c46-30ee-4b70-b46d-afefe465a6bd', @p11=NULL (Size = 4000), @p12=NULL (Size = 4000), @p13=NULL (DbType = DateTime2), @p14='Role Admin' (Nullable = false) (Size = 250), @p15='Admin' (Size = 4000), @p16='admin' (Size = 4000), @p17='admin' (Nullable = false) (Size = 50), @p18=NULL (Size = 4000), @p19=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppRole] ([Id], [ConcurrencyStamp], [CreateBy], [CreateDate], [Description], [Name], [NormalizedName], [RoleCode], [UpdateBy], [UpdateDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-04-29 18:05:10.470 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.472 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 6ms reading results.
2024-04-29 18:05:10.474 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.476 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:05:10.489 +07:00 [DBG] The 'AppRole' entity with key '{Id: c6392c46-30ee-4b70-b46d-afefe465a6bd}' tracked by 'ApplicationDbContext' changed state from '"Added"' to '"Unchanged"'.
2024-04-29 18:05:10.490 +07:00 [DBG] The 'AppRole' entity with key '{Id: 4e776a5c-8ae2-40e1-b8ce-42b23bc032be}' tracked by 'ApplicationDbContext' changed state from '"Added"' to '"Unchanged"'.
2024-04-29 18:05:10.492 +07:00 [DBG] SaveChanges completed for 'ApplicationDbContext' with 2 entities written to the database.
2024-04-29 18:05:10.493 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 18:05:10.495 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:05:10.496 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.496 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.497 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:05:10.497 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:05:10.497 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:05:10.497 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:05:10.499 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:05:10.500 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.500 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 18:05:10.500 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.500 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:05:10.534 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'IdentityUserRole' entity with key '{RoleId: c6392c46-30ee-4b70-b46d-afefe465a6bd, UserId: 4dbdabee-aed7-467b-df7d-08dc683c3cad}'.
2024-04-29 18:05:10.535 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 18:05:10.535 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:05:10.537 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:05:10.547 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'FoodShop.Persistence.ApplicationDbContext'.
System.InvalidOperationException: The value of 'IdentityUserRole<Guid>.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: The value of 'IdentityUserRole<Guid>.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-04-29 18:05:10.550 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 18:05:10.553 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:05:10.554 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 18:06:25.701 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 18:06:26.159 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 18:06:26.161 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 18:06:26.162 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 18:06:26.162 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 18:06:26.259 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 18:06:26.318 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:06:26.319 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:06:26.319 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:06:26.320 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:06:26.320 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:06:26.321 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:06:26.321 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:06:26.322 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:06:26.323 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:06:26.324 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:06:26.491 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 18:06:26.497 +07:00 [DBG] Creating DbConnection.
2024-04-29 18:06:26.526 +07:00 [DBG] Created DbConnection. (26ms).
2024-04-29 18:06:26.528 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.533 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.669 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.677 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:06:26.682 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (5ms).
2024-04-29 18:06:26.684 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (10ms).
2024-04-29 18:06:26.690 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:06:26.714 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:06:26.716 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.724 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 18:06:26.728 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:06:26.728 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:06:26.728 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:06:26.728 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.729 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.730 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:06:26.743 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:06:26.743 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.744 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:06:26.745 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.746 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.746 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:06:26.746 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:06:26.746 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:06:26.747 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:06:26.748 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:06:26.748 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.749 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:06:26.749 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:06:26.749 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:06:26.750 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:06:26.750 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.750 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.750 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:06:26.751 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:06:26.751 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.752 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:06:26.762 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.763 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.763 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:06:26.763 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:06:26.763 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:06:26.764 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:06:26.778 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:06:26.781 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.782 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 18:06:26.782 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:26.782 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:06:26.791 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 18:06:26.903 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 18:06:27.047 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:06:27.076 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.077 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.077 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:06:27.077 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:06:27.077 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:06:27.077 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:06:27.080 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:06:27.092 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.093 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 18:06:27.093 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.093 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:06:27.098 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 18:06:27.102 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:06:27.103 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.103 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.103 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:06:27.103 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:06:27.104 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:06:27.104 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:06:27.106 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:06:27.107 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.107 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 18:06:27.107 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.108 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:06:27.108 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 18:06:27.112 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:06:27.112 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.113 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.113 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:06:27.113 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:06:27.113 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:06:27.113 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:06:27.116 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:06:27.116 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.116 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 18:06:27.116 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.117 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:06:27.199 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'IdentityUserRole' entity with key '{RoleId: 449cdedc-8beb-4956-af49-99af2a38db11, UserId: 5643ed98-899f-4ed7-0df7-08dc683c6a5c}'.
2024-04-29 18:06:27.204 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 18:06:27.206 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:06:27.211 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:06:27.229 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'FoodShop.Persistence.ApplicationDbContext'.
System.InvalidOperationException: The value of 'IdentityUserRole<Guid>.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: The value of 'IdentityUserRole<Guid>.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-04-29 18:06:27.231 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 18:06:27.234 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:06:27.235 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 18:07:18.486 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 18:07:18.847 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 18:07:18.848 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 18:07:18.848 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 18:07:18.849 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 18:07:18.919 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 18:07:18.962 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:18.962 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:18.963 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:18.963 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:18.963 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:18.963 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:18.964 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:18.964 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:18.964 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:18.964 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:19.057 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 18:07:19.062 +07:00 [DBG] Creating DbConnection.
2024-04-29 18:07:19.088 +07:00 [DBG] Created DbConnection. (22ms).
2024-04-29 18:07:19.090 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.096 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.222 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.229 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:07:19.235 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2024-04-29 18:07:19.237 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (10ms).
2024-04-29 18:07:19.243 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:07:19.266 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:07:19.268 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.276 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 18:07:19.280 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:07:19.280 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:07:19.280 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:07:19.281 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.282 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.282 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:07:19.297 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:07:19.297 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.298 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:19.299 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.300 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.300 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:07:19.300 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:07:19.300 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:07:19.301 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:07:19.302 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:07:19.303 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.303 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:19.303 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:07:19.304 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:07:19.304 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:07:19.304 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.304 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.304 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:07:19.305 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:07:19.306 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.306 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:19.321 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.321 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.321 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:07:19.322 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:19.322 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:19.322 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:07:19.325 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:07:19.327 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.328 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 18:07:19.329 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.329 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:19.338 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 18:07:19.446 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 18:07:19.570 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:07:19.591 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.592 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.592 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:07:19.592 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:19.592 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:19.592 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:07:19.594 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:07:19.604 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.605 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 18:07:19.605 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.606 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:19.642 +07:00 [DBG] 'ApplicationDbContext' generated value '"c4d525ca-4018-4b7c-3068-08dc683c89a3"' for the property 'AppUser.Id'.
2024-04-29 18:07:19.729 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'AppUser' entity with key '{Id: c4d525ca-4018-4b7c-3068-08dc683c89a3}'.
2024-04-29 18:07:19.732 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 18:07:19.734 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:07:19.755 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:07:19.811 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.813 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.817 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:07:19.818 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:19.821 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-29 18:07:19.829 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='c4d525ca-4018-4b7c-3068-08dc683c89a3', @p1='0', @p2=NULL (Size = 4000), @p3=NULL (Size = 4000), @p4=NULL (Size = 4000), @p5='f217931c-0136-4ba8-8660-bb0a11d7a69a' (Size = 4000), @p6='0001-01-01T00:00:00.0000000', @p7='admin' (Size = 4000), @p8='True', @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13=NULL (DbType = DateTimeOffset), @p14=NULL (Size = 4000), @p15=NULL (Size = 4000), @p16=NULL (Size = 4000), @p17=NULL (Size = 4000), @p18='False', @p19=NULL (Size = 4000), @p20='0001-01-01T00:00:00.0000000', @p21=NULL (Size = 4000), @p22='False', @p23='0001-01-01T00:00:00.0000000', @p24='admin' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUser] ([Id], [AccessFailedCount], [AccessToken], [Address], [Avatar], [ConcurrencyStamp], [CreatedDate], [Email], [EmailConfirmed], [Facebook], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UpdateDate], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2024-04-29 18:07:19.856 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='c4d525ca-4018-4b7c-3068-08dc683c89a3', @p1='0', @p2=NULL (Size = 4000), @p3=NULL (Size = 4000), @p4=NULL (Size = 4000), @p5='f217931c-0136-4ba8-8660-bb0a11d7a69a' (Size = 4000), @p6='0001-01-01T00:00:00.0000000', @p7='admin' (Size = 4000), @p8='True', @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13=NULL (DbType = DateTimeOffset), @p14=NULL (Size = 4000), @p15=NULL (Size = 4000), @p16=NULL (Size = 4000), @p17=NULL (Size = 4000), @p18='False', @p19=NULL (Size = 4000), @p20='0001-01-01T00:00:00.0000000', @p21=NULL (Size = 4000), @p22='False', @p23='0001-01-01T00:00:00.0000000', @p24='admin' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUser] ([Id], [AccessFailedCount], [AccessToken], [Address], [Avatar], [ConcurrencyStamp], [CreatedDate], [Email], [EmailConfirmed], [Facebook], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UpdateDate], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2024-04-29 18:07:19.856 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 18:07:19.860 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:07:19.860 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.862 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 4ms reading results.
2024-04-29 18:07:19.864 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.865 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:19.868 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'FoodShop.Persistence.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
2024-04-29 18:07:19.871 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 18:07:19.873 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:19.873 +07:00 [DBG] The 'AppUser' entity with key '{Id: c4d525ca-4018-4b7c-3068-08dc683c89a3}' tracked by 'ApplicationDbContext' changed state from '"Added"' to '"Unchanged"'.
2024-04-29 18:07:19.875 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 18:07:36.902 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 18:07:37.340 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 18:07:37.342 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 18:07:37.342 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 18:07:37.342 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 18:07:37.418 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 18:07:37.479 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:37.480 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:37.480 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:37.481 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:37.482 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:37.482 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:37.482 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:37.483 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:37.483 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:37.484 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:07:37.609 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 18:07:37.616 +07:00 [DBG] Creating DbConnection.
2024-04-29 18:07:37.649 +07:00 [DBG] Created DbConnection. (32ms).
2024-04-29 18:07:37.652 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.656 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.848 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.855 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:07:37.860 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (5ms).
2024-04-29 18:07:37.862 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (9ms).
2024-04-29 18:07:37.869 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:07:37.893 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:07:37.895 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.903 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (5ms).
2024-04-29 18:07:37.906 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:07:37.907 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:07:37.907 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:07:37.907 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.908 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.909 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:07:37.919 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:07:37.920 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.920 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:37.921 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.922 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.922 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:07:37.922 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:07:37.922 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:07:37.922 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:07:37.923 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:07:37.923 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.924 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:37.924 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:07:37.924 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:07:37.924 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:07:37.924 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.924 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.924 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:07:37.925 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:07:37.925 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.925 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:37.935 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.936 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.936 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:07:37.936 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:37.936 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:37.937 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:07:37.938 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:07:37.940 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.941 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 18:07:37.942 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:37.942 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:37.950 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 18:07:38.059 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 18:07:38.174 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:07:38.193 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:38.194 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:38.194 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:07:38.194 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:38.194 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:38.194 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:07:38.196 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:07:38.206 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:07:38.206 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 18:07:38.207 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:38.207 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:38.210 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 18:07:38.213 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:07:38.214 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:38.214 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:38.214 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:07:38.214 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:38.214 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:38.214 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:07:38.216 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:07:38.216 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:07:38.217 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 18:07:38.217 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:38.217 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:38.218 +07:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<Guid>>()
    .Any()'
2024-04-29 18:07:38.220 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUserRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:07:38.220 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:38.221 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:38.221 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:07:38.221 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:38.221 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:07:38.221 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:07:38.222 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUserRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:07:38.223 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:07:38.223 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 18:07:38.223 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:07:38.223 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:07:38.326 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'IdentityUserRole' entity with key '{RoleId: 4ea69484-9f9e-4602-a738-98a007b84d36, UserId: 9bdd07e8-c229-4cf1-d330-08dc683c94be}'.
2024-04-29 18:07:38.331 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 18:07:38.333 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:07:38.340 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:07:38.363 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'FoodShop.Persistence.ApplicationDbContext'.
System.InvalidOperationException: The value of 'IdentityUserRole<Guid>.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: The value of 'IdentityUserRole<Guid>.UserId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-04-29 18:09:02.315 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 18:09:02.777 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 18:09:02.779 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 18:09:02.779 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 18:09:02.779 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 18:09:02.857 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 18:09:02.901 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:09:02.901 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:09:02.902 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:09:02.902 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:09:02.902 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:09:02.903 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:09:02.903 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:09:02.903 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:09:02.904 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:09:02.904 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:09:03.047 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 18:09:03.054 +07:00 [DBG] Creating DbConnection.
2024-04-29 18:09:03.088 +07:00 [DBG] Created DbConnection. (32ms).
2024-04-29 18:09:03.091 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.098 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.293 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.301 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:09:03.307 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2024-04-29 18:09:03.309 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (11ms).
2024-04-29 18:09:03.315 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:09:03.343 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:09:03.345 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.353 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 18:09:03.356 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:09:03.356 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:09:03.356 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:09:03.357 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.358 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.358 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:09:03.370 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:09:03.370 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.370 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:09:03.371 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.371 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.372 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:09:03.372 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:09:03.372 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:09:03.372 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:09:03.373 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:09:03.374 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.374 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:09:03.374 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:09:03.375 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:09:03.375 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:09:03.375 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.375 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.375 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:09:03.376 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:09:03.376 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.376 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:09:03.386 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.387 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.387 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:09:03.387 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:09:03.387 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:09:03.388 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:09:03.390 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:09:03.392 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.394 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 18:09:03.394 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:03.395 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:09:03.402 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 18:09:05.410 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:09:05.412 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:09:05.688 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 18:09:05.812 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:09:05.835 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:05.835 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:05.835 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:09:05.835 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:09:05.836 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:09:05.836 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:09:05.838 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:09:05.847 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:09:05.848 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 18:09:05.848 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:05.849 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:09:06.102 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:09:06.102 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:09:06.469 +07:00 [DBG] 'ApplicationDbContext' generated value '"fba3b616-79bf-4e45-2465-08dc683cc951"' for the property 'AppUser.Id'.
2024-04-29 18:09:06.563 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'AppUser' entity with key '{Id: fba3b616-79bf-4e45-2465-08dc683cc951}'.
2024-04-29 18:09:06.717 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:09:06.741 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:09:06.821 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:09:06.821 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:09:06.962 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 18:09:06.963 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:09:06.963 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:09:07.022 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:07.028 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:07.033 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:09:07.033 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:09:07.037 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-04-29 18:09:07.040 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='fba3b616-79bf-4e45-2465-08dc683cc951', @p1='0', @p2=NULL (Size = 4000), @p3=NULL (Size = 4000), @p4=NULL (Size = 4000), @p5='00d5a358-3086-4907-895d-89e99c73b137' (Size = 4000), @p6='0001-01-01T00:00:00.0000000', @p7='admin' (Size = 4000), @p8='True', @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13=NULL (DbType = DateTimeOffset), @p14=NULL (Size = 4000), @p15=NULL (Size = 4000), @p16=NULL (Size = 4000), @p17=NULL (Size = 4000), @p18='False', @p19=NULL (Size = 4000), @p20='0001-01-01T00:00:00.0000000', @p21=NULL (Size = 4000), @p22='False', @p23='0001-01-01T00:00:00.0000000', @p24='admin' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUser] ([Id], [AccessFailedCount], [AccessToken], [Address], [Avatar], [ConcurrencyStamp], [CreatedDate], [Email], [EmailConfirmed], [Facebook], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UpdateDate], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2024-04-29 18:09:07.499 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:09:07.500 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:09:09.098 +07:00 [INF] Executed DbCommand (2,055ms) [Parameters=[@p0='fba3b616-79bf-4e45-2465-08dc683cc951', @p1='0', @p2=NULL (Size = 4000), @p3=NULL (Size = 4000), @p4=NULL (Size = 4000), @p5='00d5a358-3086-4907-895d-89e99c73b137' (Size = 4000), @p6='0001-01-01T00:00:00.0000000', @p7='admin' (Size = 4000), @p8='True', @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13=NULL (DbType = DateTimeOffset), @p14=NULL (Size = 4000), @p15=NULL (Size = 4000), @p16=NULL (Size = 4000), @p17=NULL (Size = 4000), @p18='False', @p19=NULL (Size = 4000), @p20='0001-01-01T00:00:00.0000000', @p21=NULL (Size = 4000), @p22='False', @p23='0001-01-01T00:00:00.0000000', @p24='admin' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUser] ([Id], [AccessFailedCount], [AccessToken], [Address], [Avatar], [ConcurrencyStamp], [CreatedDate], [Email], [EmailConfirmed], [Facebook], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UpdateDate], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2024-04-29 18:09:09.271 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:09:09.271 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:09:09.526 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 18:09:09.527 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:09:09.530 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 430ms reading results.
2024-04-29 18:09:09.530 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:09:09.534 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:09:09.535 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (1ms).
2024-04-29 18:09:09.540 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'FoodShop.Persistence.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
2024-04-29 18:09:09.937 +07:00 [DBG] The 'AppUser' entity with key '{Id: fba3b616-79bf-4e45-2465-08dc683cc951}' tracked by 'ApplicationDbContext' changed state from '"Added"' to '"Unchanged"'.
2024-04-29 18:10:26.308 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 18:10:26.834 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 18:10:26.836 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 18:10:26.836 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 18:10:26.836 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 18:10:26.916 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 18:10:26.964 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:10:26.965 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:10:26.965 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:10:26.965 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:10:26.966 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:10:26.966 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:10:26.966 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:10:26.966 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:10:26.967 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:10:26.967 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:10:27.089 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 18:10:27.099 +07:00 [DBG] Creating DbConnection.
2024-04-29 18:10:27.138 +07:00 [DBG] Created DbConnection. (37ms).
2024-04-29 18:10:27.140 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.144 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.357 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.362 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:10:27.367 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2024-04-29 18:10:27.369 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (8ms).
2024-04-29 18:10:27.374 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:10:27.394 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:10:27.396 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.402 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 18:10:27.405 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:10:27.405 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:10:27.405 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:10:27.405 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.406 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.407 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:10:27.417 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:10:27.418 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.418 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:10:27.419 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.419 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.420 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:10:27.420 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:10:27.420 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:10:27.420 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:10:27.421 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:10:27.421 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.421 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:10:27.422 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:10:27.422 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:10:27.422 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:10:27.422 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.422 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.422 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:10:27.423 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:10:27.423 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.423 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:10:27.434 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.434 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.434 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:10:27.434 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:10:27.435 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:10:27.435 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:10:27.448 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:10:27.450 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.451 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 18:10:27.451 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:27.452 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:10:27.459 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 18:10:29.651 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:10:29.653 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:10:29.791 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 18:10:29.907 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:10:29.929 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:29.929 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:29.929 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:10:29.930 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:10:29.930 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:10:29.930 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:10:29.932 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:10:29.942 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:10:29.942 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 18:10:29.943 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:29.943 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:10:30.096 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:10:30.097 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:10:30.128 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:10:30.128 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:10:30.396 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:10:30.397 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:10:30.796 +07:00 [DBG] 'ApplicationDbContext' generated value '"fcb70e3b-dc4c-40f5-ae52-08dc683cfb94"' for the property 'AppUser.Id'.
2024-04-29 18:10:30.883 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'AppUser' entity with key '{Id: fcb70e3b-dc4c-40f5-ae52-08dc683cfb94}'.
2024-04-29 18:10:31.033 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:10:31.049 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:10:31.107 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:10:31.108 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:10:31.151 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 18:10:31.152 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:10:31.152 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:10:31.205 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:31.211 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:31.216 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:10:31.217 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:10:31.222 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-04-29 18:10:31.227 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='fcb70e3b-dc4c-40f5-ae52-08dc683cfb94', @p1='0', @p2=NULL (Size = 4000), @p3=NULL (Size = 4000), @p4=NULL (Size = 4000), @p5='e3018deb-e321-4bc7-ab75-4c9034c22d82' (Size = 4000), @p6='0001-01-01T00:00:00.0000000', @p7='admin' (Size = 4000), @p8='True', @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13=NULL (DbType = DateTimeOffset), @p14=NULL (Size = 4000), @p15=NULL (Size = 4000), @p16=NULL (Size = 4000), @p17=NULL (Size = 4000), @p18='False', @p19=NULL (Size = 4000), @p20='0001-01-01T00:00:00.0000000', @p21=NULL (Size = 4000), @p22='False', @p23='0001-01-01T00:00:00.0000000', @p24='admin' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUser] ([Id], [AccessFailedCount], [AccessToken], [Address], [Avatar], [ConcurrencyStamp], [CreatedDate], [Email], [EmailConfirmed], [Facebook], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UpdateDate], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2024-04-29 18:10:33.356 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:10:33.357 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:10:48.644 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 18:10:48.644 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 18:10:50.721 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 18:10:50.724 +07:00 [INF] Executed DbCommand (19,501ms) [Parameters=[@p0='fcb70e3b-dc4c-40f5-ae52-08dc683cfb94', @p1='0', @p2=NULL (Size = 4000), @p3=NULL (Size = 4000), @p4=NULL (Size = 4000), @p5='e3018deb-e321-4bc7-ab75-4c9034c22d82' (Size = 4000), @p6='0001-01-01T00:00:00.0000000', @p7='admin' (Size = 4000), @p8='True', @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13=NULL (DbType = DateTimeOffset), @p14=NULL (Size = 4000), @p15=NULL (Size = 4000), @p16=NULL (Size = 4000), @p17=NULL (Size = 4000), @p18='False', @p19=NULL (Size = 4000), @p20='0001-01-01T00:00:00.0000000', @p21=NULL (Size = 4000), @p22='False', @p23='0001-01-01T00:00:00.0000000', @p24='admin' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUser] ([Id], [AccessFailedCount], [AccessToken], [Address], [Avatar], [ConcurrencyStamp], [CreatedDate], [Email], [EmailConfirmed], [Facebook], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UpdateDate], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2024-04-29 18:10:50.724 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:10:50.728 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:10:50.730 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 5ms reading results.
2024-04-29 18:10:50.732 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'FoodShop.Persistence.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
2024-04-29 18:10:50.733 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:10:50.742 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (2ms).
2024-04-29 18:15:04.930 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 18:15:05.342 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 18:15:05.344 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 18:15:05.344 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 18:15:05.345 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 18:15:05.425 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 18:15:05.468 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:15:05.469 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:15:05.469 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:15:05.470 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:15:05.470 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:15:05.471 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:15:05.471 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:15:05.471 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:15:05.471 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:15:05.472 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 18:15:05.615 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 18:15:05.620 +07:00 [DBG] Creating DbConnection.
2024-04-29 18:15:05.655 +07:00 [DBG] Created DbConnection. (30ms).
2024-04-29 18:15:05.658 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.665 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.821 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.828 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:15:05.835 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2024-04-29 18:15:05.837 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (12ms).
2024-04-29 18:15:05.843 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:15:05.868 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:15:05.870 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.878 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 18:15:05.881 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:15:05.882 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:15:05.882 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:15:05.882 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.883 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.883 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:15:05.897 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:15:05.897 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.898 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:15:05.898 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.899 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.899 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 18:15:05.899 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:15:05.899 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 18:15:05.899 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:15:05.901 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 18:15:05.901 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.902 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:15:05.902 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 18:15:05.902 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:15:05.902 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 18:15:05.902 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.903 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.903 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:15:05.904 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 18:15:05.904 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.904 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:15:05.915 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.915 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.915 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:15:05.916 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:15:05.916 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:15:05.916 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:15:05.930 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 18:15:05.932 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.934 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 18:15:05.934 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:05.934 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:15:05.944 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 18:15:06.054 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 18:15:06.204 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:15:06.227 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:06.228 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:06.228 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:15:06.228 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:15:06.228 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:15:06.228 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:15:06.242 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:15:06.252 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:15:06.253 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 18:15:06.253 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:06.253 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:15:06.257 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 18:15:06.260 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 18:15:06.261 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:06.261 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:06.261 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 18:15:06.261 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:15:06.262 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 18:15:06.262 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:15:06.265 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 18:15:06.265 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 18:15:06.266 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 18:15:06.266 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:06.266 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 18:15:06.267 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 18:15:06.269 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 18:15:06.270 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 18:15:06.303 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 18:15:06.370 +07:00 [DBG] Hosting starting
2024-04-29 18:15:06.379 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 18:15:06.386 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 18:15:06.391 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 18:15:06.399 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 18:15:06.404 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 18:15:06.405 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 18:15:06.406 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 18:15:06.408 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 18:15:06.410 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 18:15:06.413 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 18:15:06.413 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 18:15:06.488 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 18:15:06.489 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 18:15:06.490 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 18:15:06.490 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 18:15:06.491 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 18:15:06.491 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 18:15:06.571 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 18:15:06.571 +07:00 [INF] Hosting environment: Development
2024-04-29 18:15:06.572 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 18:15:06.572 +07:00 [DBG] Hosting started
2024-04-29 18:15:06.896 +07:00 [DBG] Connection id "0HN387MG2DJTT" accepted.
2024-04-29 18:15:06.897 +07:00 [DBG] Connection id "0HN387MG2DJTT" started.
2024-04-29 18:15:06.937 +07:00 [DBG] Connection id "0HN387MG2DJTT" received FIN.
2024-04-29 18:15:06.942 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 18:15:06.957 +07:00 [DBG] Connection id "0HN387MG2DJTT" stopped.
2024-04-29 18:15:06.960 +07:00 [DBG] Connection id "0HN387MG2DJTT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 18:15:07.085 +07:00 [DBG] Connection id "0HN387MG2DJTU" accepted.
2024-04-29 18:15:07.085 +07:00 [DBG] Connection id "0HN387MG2DJTU" started.
2024-04-29 18:15:07.114 +07:00 [DBG] Connection 0HN387MG2DJTU established using the following protocol: "Tls13"
2024-04-29 18:15:07.152 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 18:15:07.225 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 18:15:07.264 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 18:15:07.265 +07:00 [DBG] Request did not match any endpoints
2024-04-29 18:15:07.316 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 18:15:07.319 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 18:15:07.335 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 18:15:07.336 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 18:15:07.339 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 188.0389ms
2024-04-29 18:15:07.422 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 18:15:07.422 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 18:15:07.427 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 4.9569ms
2024-04-29 18:15:07.455 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.3693ms
2024-04-29 18:15:08.101 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 18:15:08.101 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 18:15:08.102 +07:00 [DBG] Request did not match any endpoints
2024-04-29 18:15:08.287 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 186.8341ms
2024-04-29 18:17:19.486 +07:00 [DBG] Connection id "0HN387MG2DJTU" is closing.
2024-04-29 18:17:19.486 +07:00 [DBG] Connection id "0HN387MG2DJTU" is closed. The last processed stream ID was 7.
2024-04-29 18:17:19.488 +07:00 [DBG] Connection id "0HN387MG2DJTU" received FIN.
2024-04-29 18:17:19.488 +07:00 [DBG] Connection id "0HN387MG2DJTU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 18:17:19.488 +07:00 [DBG] The connection queue processing loop for 0HN387MG2DJTU completed.
2024-04-29 18:17:19.489 +07:00 [DBG] Connection id "0HN387MG2DJTU" stopped.
2024-04-29 20:54:53.521 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 20:54:54.116 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 20:54:54.118 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 20:54:54.118 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 20:54:54.118 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 20:54:54.211 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 20:54:54.280 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:54:54.281 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:54:54.281 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:54:54.281 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:54:54.281 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:54:54.282 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:54:54.282 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:54:54.282 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:54:54.282 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:54:54.283 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:54:54.550 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 20:54:54.559 +07:00 [DBG] Creating DbConnection.
2024-04-29 20:54:54.617 +07:00 [DBG] Created DbConnection. (54ms).
2024-04-29 20:54:54.621 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:54.629 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:54.834 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:54.842 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 20:54:54.850 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (7ms).
2024-04-29 20:54:54.853 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (13ms).
2024-04-29 20:54:54.863 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 20:54:55.001 +07:00 [INF] Executed DbCommand (140ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 20:54:55.020 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.031 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (8ms).
2024-04-29 20:54:55.057 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 20:54:55.057 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 20:54:55.059 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2024-04-29 20:54:55.059 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.061 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.061 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 20:54:55.082 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 20:54:55.107 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.109 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (2ms).
2024-04-29 20:54:55.110 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.111 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.111 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 20:54:55.111 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 20:54:55.111 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 20:54:55.111 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 20:54:55.116 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 20:54:55.118 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.118 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:54:55.119 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 20:54:55.119 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 20:54:55.119 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 20:54:55.119 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.122 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.122 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 20:54:55.123 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 20:54:55.124 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.124 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:54:55.140 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.141 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.141 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 20:54:55.142 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 20:54:55.142 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 20:54:55.143 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 20:54:55.148 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 20:54:55.151 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.152 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 20:54:55.153 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.153 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:54:55.164 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 20:54:55.349 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 20:54:55.500 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 20:54:55.527 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.528 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.528 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 20:54:55.528 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 20:54:55.528 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 20:54:55.529 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 20:54:55.532 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 20:54:55.545 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.545 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 20:54:55.546 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.546 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:54:55.658 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'AppUser' entity with key '{Id: 1c425c69-9a9d-43c9-82b6-553d71881521}'.
2024-04-29 20:54:55.662 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 20:54:55.665 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 20:54:55.689 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 20:54:55.753 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.756 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.761 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 20:54:55.761 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 20:54:55.764 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-29 20:54:55.769 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='1c425c69-9a9d-43c9-82b6-553d71881521', @p1='0', @p2=NULL (Size = 4000), @p3=NULL (Size = 4000), @p4=NULL (Size = 4000), @p5='0adb96fd-accc-4017-8066-8fdf76aef180' (Size = 4000), @p6='0001-01-01T00:00:00.0000000', @p7='admin' (Size = 4000), @p8='True', @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13=NULL (DbType = DateTimeOffset), @p14=NULL (Size = 4000), @p15=NULL (Size = 4000), @p16=NULL (Size = 4000), @p17=NULL (Size = 4000), @p18='False', @p19=NULL (Size = 4000), @p20='0001-01-01T00:00:00.0000000', @p21=NULL (Size = 4000), @p22='False', @p23='0001-01-01T00:00:00.0000000', @p24='admin' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUser] ([Id], [AccessFailedCount], [AccessToken], [Address], [Avatar], [ConcurrencyStamp], [CreatedDate], [Email], [EmailConfirmed], [Facebook], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UpdateDate], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2024-04-29 20:54:55.799 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='1c425c69-9a9d-43c9-82b6-553d71881521', @p1='0', @p2=NULL (Size = 4000), @p3=NULL (Size = 4000), @p4=NULL (Size = 4000), @p5='0adb96fd-accc-4017-8066-8fdf76aef180' (Size = 4000), @p6='0001-01-01T00:00:00.0000000', @p7='admin' (Size = 4000), @p8='True', @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13=NULL (DbType = DateTimeOffset), @p14=NULL (Size = 4000), @p15=NULL (Size = 4000), @p16=NULL (Size = 4000), @p17=NULL (Size = 4000), @p18='False', @p19=NULL (Size = 4000), @p20='0001-01-01T00:00:00.0000000', @p21=NULL (Size = 4000), @p22='False', @p23='0001-01-01T00:00:00.0000000', @p24='admin' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUser] ([Id], [AccessFailedCount], [AccessToken], [Address], [Avatar], [ConcurrencyStamp], [CreatedDate], [Email], [EmailConfirmed], [Facebook], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UpdateDate], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2024-04-29 20:54:55.800 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 20:54:55.804 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 20:54:55.805 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.807 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 7ms reading results.
2024-04-29 20:54:55.810 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.811 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:54:55.813 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'FoodShop.Persistence.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
2024-04-29 20:54:55.815 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 20:54:55.818 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:54:55.819 +07:00 [DBG] The 'AppUser' entity with key '{Id: 1c425c69-9a9d-43c9-82b6-553d71881521}' tracked by 'ApplicationDbContext' changed state from '"Added"' to '"Unchanged"'.
2024-04-29 20:54:55.819 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 20:57:35.044 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 20:57:35.465 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 20:57:35.466 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 20:57:35.466 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 20:57:35.466 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 20:57:35.553 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 20:57:35.611 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:35.611 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:35.611 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:35.611 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:35.611 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:35.611 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:35.611 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:35.611 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:35.611 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:35.638 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:35.933 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 20:57:36.020 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 20:57:36.020 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 20:57:36.020 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 20:57:36.020 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 20:57:36.041 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:36.041 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:36.041 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:36.041 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:36.041 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:36.041 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:36.042 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:36.042 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:36.042 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:36.042 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:36.956 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 20:57:47.675 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 20:57:48.158 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 20:57:48.160 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 20:57:48.160 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 20:57:48.160 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 20:57:48.265 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 20:57:48.328 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:48.329 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:48.329 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:48.329 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:48.329 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:48.329 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:48.329 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:48.329 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:48.329 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:48.329 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:57:48.481 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 20:57:48.500 +07:00 [DBG] Creating DbConnection.
2024-04-29 20:57:48.550 +07:00 [DBG] Created DbConnection. (47ms).
2024-04-29 20:57:48.552 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.560 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.753 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.760 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 20:57:48.767 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2024-04-29 20:57:48.768 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (11ms).
2024-04-29 20:57:48.775 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 20:57:48.800 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 20:57:48.802 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.810 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 20:57:48.812 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 20:57:48.812 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 20:57:48.813 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 20:57:48.813 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.813 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.814 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 20:57:48.828 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 20:57:48.828 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.829 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:57:48.830 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.830 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.830 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 20:57:48.830 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 20:57:48.830 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 20:57:48.830 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 20:57:48.831 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 20:57:48.832 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.832 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:57:48.832 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 20:57:48.832 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 20:57:48.832 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 20:57:48.832 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.832 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.832 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 20:57:48.833 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 20:57:48.833 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.833 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:57:48.845 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.845 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.845 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 20:57:48.845 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 20:57:48.845 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 20:57:48.845 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 20:57:48.849 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 20:57:48.852 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.853 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 20:57:48.854 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.854 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:57:48.865 +07:00 [INF] Applying migration '20240429135736_AddUseRoleToDbContext'.
2024-04-29 20:57:48.906 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.906 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.908 +07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-04-29 20:57:48.914 +07:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-04-29 20:57:48.915 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 20:57:48.968 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (53ms).
2024-04-29 20:57:48.969 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (54ms).
2024-04-29 20:57:48.969 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240429135736_AddUseRoleToDbContext', N'8.0.4');
2024-04-29 20:57:48.975 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240429135736_AddUseRoleToDbContext', N'8.0.4');
2024-04-29 20:57:48.976 +07:00 [DBG] Committing transaction.
2024-04-29 20:57:48.979 +07:00 [DBG] Committed transaction.
2024-04-29 20:57:48.981 +07:00 [DBG] Disposing transaction.
2024-04-29 20:57:48.981 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.981 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:57:48.982 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 20:57:48.984 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:57:48.986 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 20:58:34.017 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 20:58:34.483 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 20:58:34.484 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 20:58:34.484 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 20:58:34.484 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 20:58:34.556 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 20:58:34.596 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:58:34.596 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:58:34.596 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:58:34.597 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:58:34.597 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:58:34.597 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:58:34.597 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:58:34.597 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:58:34.598 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:58:34.598 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 20:58:34.683 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 20:58:34.687 +07:00 [DBG] Creating DbConnection.
2024-04-29 20:58:34.711 +07:00 [DBG] Created DbConnection. (21ms).
2024-04-29 20:58:34.713 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.717 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.817 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.822 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 20:58:34.826 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2024-04-29 20:58:34.828 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (8ms).
2024-04-29 20:58:34.832 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 20:58:34.849 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 20:58:34.851 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.856 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (2ms).
2024-04-29 20:58:34.858 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 20:58:34.858 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 20:58:34.859 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 20:58:34.859 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.859 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.860 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 20:58:34.870 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 20:58:34.870 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.870 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:58:34.871 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.872 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.872 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 20:58:34.872 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 20:58:34.872 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 20:58:34.872 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 20:58:34.873 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 20:58:34.874 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.874 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:58:34.874 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 20:58:34.874 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 20:58:34.874 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 20:58:34.874 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.874 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.875 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 20:58:34.875 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 20:58:34.875 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.875 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:58:34.885 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.885 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.886 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 20:58:34.886 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 20:58:34.886 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 20:58:34.886 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 20:58:34.888 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 20:58:34.889 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.890 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 20:58:34.890 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:34.891 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:58:34.897 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 20:58:34.993 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 20:58:35.095 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 20:58:35.112 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:35.112 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:35.113 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 20:58:35.113 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 20:58:35.113 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 20:58:35.113 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 20:58:35.115 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 20:58:35.123 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 20:58:35.123 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 20:58:35.124 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:35.124 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:58:35.206 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'AppUser' entity with key '{Id: e23c41d0-361e-48ef-82c9-48cb258e248d}'.
2024-04-29 20:58:35.208 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 20:58:35.210 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 20:58:35.228 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 20:58:35.269 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:35.271 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:35.275 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 20:58:35.275 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 20:58:35.277 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-29 20:58:35.280 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='e23c41d0-361e-48ef-82c9-48cb258e248d', @p1='0', @p2=NULL (Size = 4000), @p3=NULL (Size = 4000), @p4=NULL (Size = 4000), @p5='5f08fe38-33f3-47b5-b3c1-e34a10220e31' (Size = 4000), @p6='0001-01-01T00:00:00.0000000', @p7='admin' (Size = 4000), @p8='True', @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13=NULL (DbType = DateTimeOffset), @p14=NULL (Size = 4000), @p15=NULL (Size = 4000), @p16=NULL (Size = 4000), @p17=NULL (Size = 4000), @p18='False', @p19=NULL (Size = 4000), @p20='0001-01-01T00:00:00.0000000', @p21=NULL (Size = 4000), @p22='False', @p23='0001-01-01T00:00:00.0000000', @p24='admin' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUser] ([Id], [AccessFailedCount], [AccessToken], [Address], [Avatar], [ConcurrencyStamp], [CreatedDate], [Email], [EmailConfirmed], [Facebook], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UpdateDate], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2024-04-29 20:58:35.302 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='e23c41d0-361e-48ef-82c9-48cb258e248d', @p1='0', @p2=NULL (Size = 4000), @p3=NULL (Size = 4000), @p4=NULL (Size = 4000), @p5='5f08fe38-33f3-47b5-b3c1-e34a10220e31' (Size = 4000), @p6='0001-01-01T00:00:00.0000000', @p7='admin' (Size = 4000), @p8='True', @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13=NULL (DbType = DateTimeOffset), @p14=NULL (Size = 4000), @p15=NULL (Size = 4000), @p16=NULL (Size = 4000), @p17=NULL (Size = 4000), @p18='False', @p19=NULL (Size = 4000), @p20='0001-01-01T00:00:00.0000000', @p21=NULL (Size = 4000), @p22='False', @p23='0001-01-01T00:00:00.0000000', @p24='admin' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUser] ([Id], [AccessFailedCount], [AccessToken], [Address], [Avatar], [ConcurrencyStamp], [CreatedDate], [Email], [EmailConfirmed], [Facebook], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UpdateDate], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2024-04-29 20:58:35.303 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 20:58:35.305 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 20:58:35.306 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 20:58:35.308 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 4ms reading results.
2024-04-29 20:58:35.310 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:35.310 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 20:58:35.312 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'FoodShop.Persistence.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SplitQueryingEnumerable`1.Enumerator.MoveNext()
2024-04-29 20:58:35.314 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 20:58:35.316 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 20:58:35.317 +07:00 [DBG] The 'AppUser' entity with key '{Id: e23c41d0-361e-48ef-82c9-48cb258e248d}' tracked by 'ApplicationDbContext' changed state from '"Added"' to '"Unchanged"'.
2024-04-29 20:58:35.317 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 21:02:46.685 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 21:02:47.065 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 21:02:47.066 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 21:02:47.066 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 21:02:47.067 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 21:02:47.130 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 21:02:47.167 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:02:47.168 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:02:47.168 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:02:47.168 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:02:47.168 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:02:47.169 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:02:47.169 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:02:47.169 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:02:47.169 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:02:47.169 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:02:47.261 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:02:47.266 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:02:47.288 +07:00 [DBG] Created DbConnection. (20ms).
2024-04-29 21:02:47.290 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.294 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.390 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.395 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:02:47.399 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2024-04-29 21:02:47.401 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (7ms).
2024-04-29 21:02:47.405 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:02:47.422 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:02:47.423 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.429 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (3ms).
2024-04-29 21:02:47.431 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:02:47.431 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:02:47.431 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:02:47.431 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.432 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.432 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:02:47.442 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:02:47.442 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.443 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:02:47.443 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.444 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.444 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:02:47.444 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:02:47.444 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:02:47.444 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:02:47.445 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:02:47.445 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.445 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:02:47.446 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:02:47.446 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:02:47.446 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:02:47.446 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.446 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.446 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:02:47.447 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:02:47.447 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.447 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:02:47.456 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.456 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.456 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:02:47.456 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:02:47.456 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:02:47.457 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:02:47.461 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:02:47.463 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.464 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 21:02:47.464 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.464 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:02:47.471 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 21:02:47.572 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 21:02:47.669 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:02:47.685 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.686 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.686 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:02:47.686 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:02:47.686 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:02:47.686 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:02:47.688 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:02:47.696 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.697 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 21:02:47.697 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.697 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:02:47.793 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'AppUser' entity with key '{Id: d4d25824-d854-4e1d-be37-251154c05338}'.
2024-04-29 21:02:47.796 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 21:02:47.798 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 21:02:47.819 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 21:02:47.868 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.870 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.874 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:02:47.874 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:02:47.878 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-04-29 21:02:47.882 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='d4d25824-d854-4e1d-be37-251154c05338', @p1='0', @p2=NULL (Size = 4000), @p3=NULL (Size = 4000), @p4=NULL (Size = 4000), @p5='ba299103-6c2a-4361-b8be-b7817110a475' (Size = 4000), @p6='0001-01-01T00:00:00.0000000', @p7='admin' (Size = 4000), @p8='True', @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13=NULL (DbType = DateTimeOffset), @p14=NULL (Size = 4000), @p15=NULL (Size = 4000), @p16=NULL (Size = 4000), @p17=NULL (Size = 4000), @p18='False', @p19=NULL (Size = 4000), @p20='0001-01-01T00:00:00.0000000', @p21=NULL (Size = 4000), @p22='False', @p23='0001-01-01T00:00:00.0000000', @p24='admin' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUser] ([Id], [AccessFailedCount], [AccessToken], [Address], [Avatar], [ConcurrencyStamp], [CreatedDate], [Email], [EmailConfirmed], [Facebook], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UpdateDate], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2024-04-29 21:02:47.904 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='d4d25824-d854-4e1d-be37-251154c05338', @p1='0', @p2=NULL (Size = 4000), @p3=NULL (Size = 4000), @p4=NULL (Size = 4000), @p5='ba299103-6c2a-4361-b8be-b7817110a475' (Size = 4000), @p6='0001-01-01T00:00:00.0000000', @p7='admin' (Size = 4000), @p8='True', @p9=NULL (Size = 4000), @p10=NULL (Size = 4000), @p11=NULL (Size = 4000), @p12='False', @p13=NULL (DbType = DateTimeOffset), @p14=NULL (Size = 4000), @p15=NULL (Size = 4000), @p16=NULL (Size = 4000), @p17=NULL (Size = 4000), @p18='False', @p19=NULL (Size = 4000), @p20='0001-01-01T00:00:00.0000000', @p21=NULL (Size = 4000), @p22='False', @p23='0001-01-01T00:00:00.0000000', @p24='admin' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUser] ([Id], [AccessFailedCount], [AccessToken], [Address], [Avatar], [ConcurrencyStamp], [CreatedDate], [Email], [EmailConfirmed], [Facebook], [FirstName], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [SecurityStamp], [TwoFactorEnabled], [UpdateDate], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2024-04-29 21:02:47.908 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.909 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 5ms reading results.
2024-04-29 21:02:47.912 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.913 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:02:47.919 +07:00 [DBG] The 'AppUser' entity with key '{Id: d4d25824-d854-4e1d-be37-251154c05338}' tracked by 'ApplicationDbContext' changed state from '"Added"' to '"Unchanged"'.
2024-04-29 21:02:47.921 +07:00 [DBG] SaveChanges completed for 'ApplicationDbContext' with 1 entities written to the database.
2024-04-29 21:02:47.925 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 21:02:47.928 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:02:47.928 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.928 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.929 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:02:47.929 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:02:47.929 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:02:47.929 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:02:47.932 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:02:47.933 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.933 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 21:02:47.933 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.933 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:02:47.963 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'AppRole' entity with key '{Id: 35593974-7981-4823-8062-1ab6112bd9ca}'.
2024-04-29 21:02:47.964 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'AppRole' entity with key '{Id: 46715243-595a-4513-bfe6-312573436b01}'.
2024-04-29 21:02:47.964 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 21:02:47.964 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 21:02:47.971 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 21:02:47.979 +07:00 [DBG] Executing 2 update commands as a batch.
2024-04-29 21:02:47.980 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.981 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.981 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:02:47.981 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:02:47.981 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:02:47.981 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='35593974-7981-4823-8062-1ab6112bd9ca', @p1=NULL (Size = 4000), @p2=NULL (Size = 4000), @p3=NULL (DbType = DateTime2), @p4='Role Admin' (Nullable = false) (Size = 250), @p5='Admin' (Size = 4000), @p6='admin' (Size = 4000), @p7='admin' (Nullable = false) (Size = 50), @p8=NULL (Size = 4000), @p9=NULL (DbType = DateTime2), @p10='46715243-595a-4513-bfe6-312573436b01', @p11=NULL (Size = 4000), @p12=NULL (Size = 4000), @p13=NULL (DbType = DateTime2), @p14='Role Basic' (Nullable = false) (Size = 250), @p15='Basic' (Size = 4000), @p16='basic' (Size = 4000), @p17='basic' (Nullable = false) (Size = 50), @p18=NULL (Size = 4000), @p19=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppRole] ([Id], [ConcurrencyStamp], [CreateBy], [CreateDate], [Description], [Name], [NormalizedName], [RoleCode], [UpdateBy], [UpdateDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-04-29 21:02:47.984 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='35593974-7981-4823-8062-1ab6112bd9ca', @p1=NULL (Size = 4000), @p2=NULL (Size = 4000), @p3=NULL (DbType = DateTime2), @p4='Role Admin' (Nullable = false) (Size = 250), @p5='Admin' (Size = 4000), @p6='admin' (Size = 4000), @p7='admin' (Nullable = false) (Size = 50), @p8=NULL (Size = 4000), @p9=NULL (DbType = DateTime2), @p10='46715243-595a-4513-bfe6-312573436b01', @p11=NULL (Size = 4000), @p12=NULL (Size = 4000), @p13=NULL (DbType = DateTime2), @p14='Role Basic' (Nullable = false) (Size = 250), @p15='Basic' (Size = 4000), @p16='basic' (Size = 4000), @p17='basic' (Nullable = false) (Size = 50), @p18=NULL (Size = 4000), @p19=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppRole] ([Id], [ConcurrencyStamp], [CreateBy], [CreateDate], [Description], [Name], [NormalizedName], [RoleCode], [UpdateBy], [UpdateDate])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2024-04-29 21:02:47.985 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.985 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 21:02:47.985 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:47.985 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:02:47.986 +07:00 [DBG] The 'AppRole' entity with key '{Id: 35593974-7981-4823-8062-1ab6112bd9ca}' tracked by 'ApplicationDbContext' changed state from '"Added"' to '"Unchanged"'.
2024-04-29 21:02:47.986 +07:00 [DBG] The 'AppRole' entity with key '{Id: 46715243-595a-4513-bfe6-312573436b01}' tracked by 'ApplicationDbContext' changed state from '"Added"' to '"Unchanged"'.
2024-04-29 21:02:47.986 +07:00 [DBG] SaveChanges completed for 'ApplicationDbContext' with 2 entities written to the database.
2024-04-29 21:02:48.002 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'IdentityUserRole' entity with key '{RoleId: 35593974-7981-4823-8062-1ab6112bd9ca, UserId: d4d25824-d854-4e1d-be37-251154c05338}'.
2024-04-29 21:02:48.003 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2024-04-29 21:02:48.003 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 21:02:48.003 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 21:02:48.006 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:48.006 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:48.007 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:02:48.007 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:02:48.007 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:02:48.007 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='35593974-7981-4823-8062-1ab6112bd9ca', @p1='d4d25824-d854-4e1d-be37-251154c05338'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUserRole] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-04-29 21:02:48.010 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='35593974-7981-4823-8062-1ab6112bd9ca', @p1='d4d25824-d854-4e1d-be37-251154c05338'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AppUserRole] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-04-29 21:02:48.011 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:02:48.011 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 21:02:48.011 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:48.011 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:02:48.012 +07:00 [DBG] The 'IdentityUserRole' entity with key '{RoleId: 35593974-7981-4823-8062-1ab6112bd9ca, UserId: d4d25824-d854-4e1d-be37-251154c05338}' tracked by 'ApplicationDbContext' changed state from '"Added"' to '"Unchanged"'.
2024-04-29 21:02:48.012 +07:00 [DBG] SaveChanges completed for 'ApplicationDbContext' with 1 entities written to the database.
2024-04-29 21:02:48.013 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:02:48.015 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:02:48.016 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 21:02:48.054 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 21:02:48.104 +07:00 [DBG] Hosting starting
2024-04-29 21:02:48.113 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 21:02:48.118 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 21:02:48.140 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 21:02:48.147 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 21:02:48.150 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:02:48.150 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 21:02:48.152 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:02:48.153 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 21:02:48.155 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 21:02:48.158 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 21:02:48.158 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 21:02:48.233 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 21:02:48.234 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 21:02:48.234 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 21:02:48.234 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 21:02:48.234 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 21:02:48.235 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 21:02:48.300 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 21:02:48.300 +07:00 [INF] Hosting environment: Development
2024-04-29 21:02:48.301 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 21:02:48.301 +07:00 [DBG] Hosting started
2024-04-29 21:02:48.305 +07:00 [DBG] Connection id "0HN38AK6JFVK2" received FIN.
2024-04-29 21:02:48.308 +07:00 [DBG] Connection id "0HN38AK6JFVK2" accepted.
2024-04-29 21:02:48.309 +07:00 [DBG] Connection id "0HN38AK6JFVK2" started.
2024-04-29 21:02:48.317 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 21:02:48.326 +07:00 [DBG] Connection id "0HN38AK6JFVK2" stopped.
2024-04-29 21:02:48.328 +07:00 [DBG] Connection id "0HN38AK6JFVK2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:02:48.665 +07:00 [DBG] Connection id "0HN38AK6JFVK3" accepted.
2024-04-29 21:02:48.666 +07:00 [DBG] Connection id "0HN38AK6JFVK3" started.
2024-04-29 21:02:48.699 +07:00 [DBG] Connection 0HN38AK6JFVK3 established using the following protocol: "Tls13"
2024-04-29 21:02:48.734 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 21:02:48.823 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 21:02:48.854 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 21:02:48.854 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:02:48.895 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 21:02:48.897 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 21:02:48.908 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 21:02:48.909 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 21:02:48.911 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 178.008ms
2024-04-29 21:02:48.938 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 21:02:48.943 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 5.2848ms
2024-04-29 21:02:48.984 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 21:02:49.037 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.6733ms
2024-04-29 21:02:49.669 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 21:02:49.670 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 21:02:49.670 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:02:49.837 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 167.7273ms
2024-04-29 21:03:26.463 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7286/api/v1.0/Users/login - application/json; ver=1.0 65
2024-04-29 21:03:26.479 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1.0/Users/login'
2024-04-29 21:03:26.482 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Users/login' is valid for the request path '/api/v1.0/Users/login'
2024-04-29 21:03:26.490 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:03:26.492 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 21:03:26.494 +07:00 [INF] Start request......!
2024-04-29 21:03:26.523 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 21:03:26.528 +07:00 [INF] Executing endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:03:26.551 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest) on controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation).
2024-04-29 21:03:26.553 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-29 21:03:26.553 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-29 21:03:26.554 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)","Asp.Versioning.ApplyContentTypeVersionActionFilter"]
2024-04-29 21:03:26.554 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-29 21:03:26.554 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2024-04-29 21:03:26.556 +07:00 [DBG] Executing controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:03:26.632 +07:00 [DBG] Executed controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:03:26.637 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:03:26.638 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' using the name '' in request data ...
2024-04-29 21:03:26.640 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; ver=1.0'.
2024-04-29 21:03:26.644 +07:00 [DBG] Connection id "0HN38AK6JFVK3", Request id "0HN38AK6JFVK3:00000009": started reading request body.
2024-04-29 21:03:26.644 +07:00 [DBG] Connection id "0HN38AK6JFVK3", Request id "0HN38AK6JFVK3:00000009": done reading request body.
2024-04-29 21:03:26.647 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'
2024-04-29 21:03:26.647 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:03:26.647 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:03:26.648 +07:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:03:26.653 +07:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:03:26.671 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:03:26.680 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-04-29 21:03:26.807 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SplitQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.AccessToken (string), 2], [Property: AppUser.Address (string), 3], [Property: AppUser.Avatar (string), 4], [Property: AppUser.ConcurrencyStamp (string), 5], [Property: AppUser.CreatedDate (DateTime) Required, 6], [Property: AppUser.Email (string), 7], [Property: AppUser.EmailConfirmed (bool) Required, 8], [Property: AppUser.Facebook (string), 9], [Property: AppUser.FirstName (string), 10], [Property: AppUser.LastName (string), 11], [Property: AppUser.LockoutEnabled (bool) Required, 12], [Property: AppUser.LockoutEnd (DateTimeOffset?), 13], [Property: AppUser.NormalizedEmail (string), 14], [Property: AppUser.NormalizedUserName (string), 15], [Property: AppUser.PasswordHash (string), 16], [Property: AppUser.PhoneNumber (string), 17], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 18], [Property: AppUser.RefreshToken (string), 19], [Property: AppUser.RefreshTokenExpiryTime (DateTime) Required, 20], [Property: AppUser.SecurityStamp (string), 21], [Property: AppUser.TwoFactorEnabled (bool) Required, 22], [Property: AppUser.UpdateDate (DateTime) Required, 23], [Property: AppUser.UserName (string), 24] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.AccessToken, a.Address, a.Avatar, a.ConcurrencyStamp, a.CreatedDate, a.Email, a.EmailConfirmed, a.Facebook, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.RefreshTokenExpiryTime, a.SecurityStamp, a.TwoFactorEnabled, a.UpdateDate, a.UserName
            FROM AppUser AS a
            WHERE a.NormalizedEmail == @__normalizedEmail_0), 
        ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTimeOffset>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTime>, ReaderColumn<object> }, 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, AppUser>, 
        null, 
        null, 
        FoodShop.Persistence.ApplicationDbContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-29 21:03:26.820 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:03:26.821 +07:00 [DBG] Created DbConnection. (1ms).
2024-04-29 21:03:26.822 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:03:26.822 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:03:26.823 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:03:26.823 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:03:26.823 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:03:26.824 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:03:26.829 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:03:26.840 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:03:26.840 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 3ms reading results.
2024-04-29 21:03:26.840 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:03:26.840 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:03:26.848 +07:00 [INF] Executed action FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation) in 291.0544ms
2024-04-29 21:03:26.849 +07:00 [INF] Executed endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:03:26.851 +07:00 [ERR] BadRequest
FoodShop.Domain.Exceptions.BadRequestException: BadRequest
   at FoodShop.Infrastructure.Identity.UserServices.LoginAsync(LoginRequest loginRequest, CancellationToken token) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Identity\UserServices.cs:line 124
   at FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync(LoginRequest loginRequest) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Presentation\Controllers\V1\UsersController.cs:line 49
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FoodShop.Infrastructure.Auth.CurrentUserMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Auth\CurrentUserMiddleware.cs:line 21
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FoodShop.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-04-29 21:03:26.884 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:03:26.888 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:03:26.889 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 21:03:26.890 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7286/api/v1.0/Users/login - 400 null application/json; ver=1.0 426.9644ms
2024-04-29 21:05:26.641 +07:00 [DBG] HttpMessageHandler expired after 120000ms for client 'MailTrapApiClient'
2024-04-29 21:05:36.640 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:05:36.643 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0214ms - processed: 0 items - remaining: 1 items
2024-04-29 21:05:37.622 +07:00 [DBG] Connection id "0HN38AK6JFVK3" is closing.
2024-04-29 21:05:37.622 +07:00 [DBG] Connection id "0HN38AK6JFVK3" is closed. The last processed stream ID was 9.
2024-04-29 21:05:37.623 +07:00 [DBG] Connection id "0HN38AK6JFVK3" received FIN.
2024-04-29 21:05:37.624 +07:00 [DBG] Connection id "0HN38AK6JFVK3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:05:37.624 +07:00 [DBG] The connection queue processing loop for 0HN38AK6JFVK3 completed.
2024-04-29 21:05:37.626 +07:00 [DBG] Connection id "0HN38AK6JFVK3" stopped.
2024-04-29 21:05:46.644 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:05:46.644 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.006ms - processed: 0 items - remaining: 1 items
2024-04-29 21:05:56.654 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:05:56.654 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2024-04-29 21:06:06.657 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:06:06.658 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2024-04-29 21:06:16.661 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:06:16.661 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2024-04-29 21:06:26.672 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:06:26.672 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2024-04-29 21:06:36.675 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:06:36.675 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2024-04-29 21:06:46.675 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:06:46.675 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0046ms - processed: 0 items - remaining: 1 items
2024-04-29 21:06:56.682 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:06:56.682 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2024-04-29 21:07:06.688 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:07:06.688 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0078ms - processed: 0 items - remaining: 1 items
2024-04-29 21:07:16.693 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:07:16.693 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2024-04-29 21:07:26.700 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:07:26.700 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2024-04-29 21:07:36.702 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:07:36.702 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2024-04-29 21:07:46.702 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:07:46.703 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2024-04-29 21:07:56.707 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:07:56.708 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2024-04-29 21:08:06.727 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:08:06.728 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0048ms - processed: 0 items - remaining: 1 items
2024-04-29 21:08:16.737 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:08:16.737 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2024-04-29 21:08:26.749 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:08:26.749 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0041ms - processed: 0 items - remaining: 1 items
2024-04-29 21:08:36.762 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:08:36.762 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2024-04-29 21:08:46.775 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:08:46.776 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0713ms - processed: 0 items - remaining: 1 items
2024-04-29 21:08:56.777 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:08:56.777 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2024-04-29 21:09:06.778 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:09:06.779 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2024-04-29 21:09:16.781 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:09:16.781 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0051ms - processed: 0 items - remaining: 1 items
2024-04-29 21:09:26.794 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:09:26.795 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2024-04-29 21:09:39.006 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 21:09:39.806 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 21:09:39.809 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 21:09:39.810 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 21:09:39.810 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 21:09:40.053 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 21:09:40.144 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:09:40.145 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:09:40.145 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:09:40.146 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:09:40.146 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:09:40.147 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:09:40.147 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:09:40.147 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:09:40.147 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:09:40.148 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:09:40.376 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:09:40.386 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:09:40.442 +07:00 [DBG] Created DbConnection. (53ms).
2024-04-29 21:09:40.445 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.454 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.770 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.779 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:09:40.792 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (11ms).
2024-04-29 21:09:40.794 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (19ms).
2024-04-29 21:09:40.802 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:09:40.835 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:09:40.838 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.850 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (5ms).
2024-04-29 21:09:40.853 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:09:40.854 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:09:40.854 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:09:40.855 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.856 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.857 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:09:40.877 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:09:40.877 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.878 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:09:40.880 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.881 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.881 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:09:40.881 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:09:40.882 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:09:40.882 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:09:40.883 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:09:40.884 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.884 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:09:40.884 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:09:40.885 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:09:40.885 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:09:40.885 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.885 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.885 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:09:40.887 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:09:40.887 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.887 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:09:40.903 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.904 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.904 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:09:40.904 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:09:40.904 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:09:40.905 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:09:40.913 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:09:40.917 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.919 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 4ms reading results.
2024-04-29 21:09:40.919 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:40.920 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:09:40.932 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 21:09:42.348 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 21:09:42.474 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:09:42.498 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:42.499 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:42.499 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:09:42.499 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:09:42.499 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:09:42.500 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:09:42.502 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:09:42.511 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:09:42.511 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 21:09:42.512 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:42.512 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:09:42.516 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 21:09:42.519 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:09:42.520 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:42.520 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:42.520 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:09:42.520 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:09:42.520 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:09:42.520 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:09:42.522 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:09:42.523 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:09:42.523 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 21:09:42.523 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:42.524 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:09:42.525 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:09:42.527 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:09:42.528 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 21:09:42.597 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 21:10:07.600 +07:00 [DBG] Hosting starting
2024-04-29 21:10:07.620 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 21:10:07.628 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 21:10:07.635 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 21:10:07.645 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 21:10:07.650 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:10:07.651 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 21:10:07.652 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:10:07.654 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 21:10:07.657 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 21:10:07.659 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 21:10:07.660 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 21:10:07.805 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 21:10:07.805 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 21:10:07.806 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 21:10:07.806 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 21:10:07.806 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 21:10:07.806 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 21:10:07.830 +07:00 [DBG] Connection id "0HN38AO9J48PJ" accepted.
2024-04-29 21:10:07.831 +07:00 [DBG] Connection id "0HN38AO9J48PJ" started.
2024-04-29 21:10:07.891 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 21:10:07.892 +07:00 [INF] Hosting environment: Development
2024-04-29 21:10:07.892 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 21:10:07.892 +07:00 [DBG] Hosting started
2024-04-29 21:10:07.982 +07:00 [DBG] Connection id "0HN38AO9J48PK" accepted.
2024-04-29 21:10:07.982 +07:00 [DBG] Connection id "0HN38AO9J48PK" started.
2024-04-29 21:10:08.172 +07:00 [DBG] Connection id "0HN38AO9J48PL" accepted.
2024-04-29 21:10:08.173 +07:00 [DBG] Connection id "0HN38AO9J48PL" started.
2024-04-29 21:10:08.205 +07:00 [DBG] Connection 0HN38AO9J48PL established using the following protocol: "Tls13"
2024-04-29 21:10:08.258 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 21:10:08.340 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 21:10:08.373 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 21:10:08.374 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:10:08.420 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 21:10:08.422 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 21:10:08.440 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 21:10:08.441 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 21:10:08.444 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 189.5784ms
2024-04-29 21:10:08.519 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 21:10:08.527 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 8.6557ms
2024-04-29 21:10:08.534 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 21:10:08.616 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.1265ms
2024-04-29 21:10:09.624 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 21:10:09.626 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 21:10:09.626 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:10:27.434 +07:00 [DBG] Authentication of the HTTPS connection timed out.
2024-04-29 21:10:27.434 +07:00 [DBG] Authentication of the HTTPS connection timed out.
2024-04-29 21:10:27.560 +07:00 [DBG] Connection id "0HN38AO9J48PK" stopped.
2024-04-29 21:10:27.560 +07:00 [DBG] Connection id "0HN38AO9J48PJ" stopped.
2024-04-29 21:10:27.561 +07:00 [DBG] Connection id "0HN38AO9J48PJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:10:27.561 +07:00 [DBG] Connection id "0HN38AO9J48PK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:10:27.597 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17973.5296ms
2024-04-29 21:11:23.602 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7286/api/v1/Users/login - application/json; ver=1.0 65
2024-04-29 21:11:23.626 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1/Users/login'
2024-04-29 21:11:23.629 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Users/login' is valid for the request path '/api/v1/Users/login'
2024-04-29 21:11:23.633 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:11:23.636 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 21:11:23.637 +07:00 [INF] Start request......!
2024-04-29 21:11:23.692 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 21:11:23.696 +07:00 [INF] Executing endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:11:23.721 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest) on controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation).
2024-04-29 21:11:23.723 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-29 21:11:23.724 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-29 21:11:23.725 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)","Asp.Versioning.ApplyContentTypeVersionActionFilter"]
2024-04-29 21:11:23.725 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-29 21:11:23.726 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2024-04-29 21:11:23.727 +07:00 [DBG] Executing controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:11:23.826 +07:00 [DBG] Executed controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:11:23.831 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:11:23.833 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' using the name '' in request data ...
2024-04-29 21:11:23.835 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; ver=1.0'.
2024-04-29 21:11:23.839 +07:00 [DBG] Connection id "0HN38AO9J48PL", Request id "0HN38AO9J48PL:00000009": started reading request body.
2024-04-29 21:11:23.839 +07:00 [DBG] Connection id "0HN38AO9J48PL", Request id "0HN38AO9J48PL:00000009": done reading request body.
2024-04-29 21:11:23.844 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'
2024-04-29 21:11:23.845 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:11:23.845 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:11:23.845 +07:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:11:23.853 +07:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:11:26.235 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:11:26.243 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-04-29 21:11:26.474 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SplitQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.AccessToken (string), 2], [Property: AppUser.Address (string), 3], [Property: AppUser.Avatar (string), 4], [Property: AppUser.ConcurrencyStamp (string), 5], [Property: AppUser.CreatedDate (DateTime) Required, 6], [Property: AppUser.Email (string), 7], [Property: AppUser.EmailConfirmed (bool) Required, 8], [Property: AppUser.Facebook (string), 9], [Property: AppUser.FirstName (string), 10], [Property: AppUser.LastName (string), 11], [Property: AppUser.LockoutEnabled (bool) Required, 12], [Property: AppUser.LockoutEnd (DateTimeOffset?), 13], [Property: AppUser.NormalizedEmail (string), 14], [Property: AppUser.NormalizedUserName (string), 15], [Property: AppUser.PasswordHash (string), 16], [Property: AppUser.PhoneNumber (string), 17], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 18], [Property: AppUser.RefreshToken (string), 19], [Property: AppUser.RefreshTokenExpiryTime (DateTime) Required, 20], [Property: AppUser.SecurityStamp (string), 21], [Property: AppUser.TwoFactorEnabled (bool) Required, 22], [Property: AppUser.UpdateDate (DateTime) Required, 23], [Property: AppUser.UserName (string), 24] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.AccessToken, a.Address, a.Avatar, a.ConcurrencyStamp, a.CreatedDate, a.Email, a.EmailConfirmed, a.Facebook, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.RefreshTokenExpiryTime, a.SecurityStamp, a.TwoFactorEnabled, a.UpdateDate, a.UserName
            FROM AppUser AS a
            WHERE a.NormalizedEmail == @__normalizedEmail_0), 
        ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTimeOffset>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTime>, ReaderColumn<object> }, 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, AppUser>, 
        null, 
        null, 
        FoodShop.Persistence.ApplicationDbContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-29 21:11:26.488 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:11:26.488 +07:00 [DBG] Created DbConnection. (0ms).
2024-04-29 21:11:26.490 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:11:26.492 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:11:26.493 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:11:26.493 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:11:26.495 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-29 21:11:26.498 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:11:26.530 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:11:26.558 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:11:26.558 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 6ms reading results.
2024-04-29 21:11:26.559 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:11:26.560 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:12:02.028 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2024-04-29 21:12:02.030 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2024-04-29 21:15:14.266 +07:00 [DBG] HttpMessageHandler expired after 120000ms for client 'MailTrapApiClient'
2024-04-29 21:15:14.270 +07:00 [INF] Executed action FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation) in 230541.2147ms
2024-04-29 21:15:14.271 +07:00 [INF] Executed endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:15:14.354 +07:00 [ERR] BadRequest
FoodShop.Domain.Exceptions.BadRequestException: BadRequest
   at FoodShop.Infrastructure.Identity.UserServices.LoginAsync(LoginRequest loginRequest, CancellationToken token) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Identity\UserServices.cs:line 124
   at FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync(LoginRequest loginRequest) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Presentation\Controllers\V1\UsersController.cs:line 49
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FoodShop.Infrastructure.Auth.CurrentUserMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Auth\CurrentUserMiddleware.cs:line 21
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FoodShop.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-04-29 21:15:14.371 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:15:14.374 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:15:14.375 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 21:15:14.375 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7286/api/v1/Users/login - 400 null application/json; ver=1 230773.1714ms
2024-04-29 21:15:24.272 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:15:24.275 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0674ms - processed: 0 items - remaining: 1 items
2024-04-29 21:15:34.276 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:15:34.276 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2024-04-29 21:15:44.289 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:15:44.289 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0043ms - processed: 0 items - remaining: 1 items
2024-04-29 21:16:58.755 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 21:16:59.212 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 21:16:59.218 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 21:16:59.220 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 21:16:59.223 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 21:16:59.327 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 21:16:59.451 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:16:59.529 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:16:59.531 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:16:59.531 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:16:59.531 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:16:59.533 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:16:59.534 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:16:59.534 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:16:59.534 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:16:59.535 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:16:59.696 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:16:59.704 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:16:59.733 +07:00 [DBG] Created DbConnection. (26ms).
2024-04-29 21:16:59.736 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 21:16:59.746 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:16:59.918 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:16:59.925 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:16:59.932 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2024-04-29 21:16:59.935 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (12ms).
2024-04-29 21:16:59.942 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:16:59.966 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:16:59.968 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:16:59.977 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (5ms).
2024-04-29 21:16:59.980 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:16:59.981 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:16:59.981 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:16:59.981 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:16:59.982 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:16:59.983 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:16:59.997 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:16:59.998 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:16:59.999 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:00.000 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.000 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.001 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:17:00.001 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:17:00.001 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:17:00.001 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:17:00.002 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:17:00.003 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.003 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:00.003 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:17:00.003 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:17:00.003 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:17:00.004 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.004 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.006 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:17:00.009 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:17:00.010 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.010 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:00.025 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.026 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.026 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:17:00.026 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:00.026 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:00.027 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:17:00.031 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:17:00.033 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.035 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 21:17:00.035 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.035 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:00.045 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 21:17:00.178 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 21:17:00.321 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:17:00.347 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.347 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.348 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:17:00.348 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:00.348 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:00.348 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:17:00.351 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:17:00.362 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.363 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 21:17:00.363 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.363 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:00.367 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 21:17:00.370 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:17:00.371 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.371 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.371 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:17:00.371 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:00.371 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:00.372 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:17:00.374 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:17:00.375 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.375 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 21:17:00.375 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.375 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:00.377 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:17:00.380 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:00.381 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 21:17:00.416 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 21:17:00.476 +07:00 [DBG] Hosting starting
2024-04-29 21:17:00.487 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 21:17:00.495 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 21:17:00.500 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 21:17:00.507 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 21:17:00.511 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:17:00.512 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 21:17:00.513 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:17:00.515 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 21:17:00.517 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 21:17:00.520 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 21:17:00.521 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 21:17:00.610 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 21:17:00.610 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 21:17:00.611 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 21:17:00.611 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 21:17:00.611 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 21:17:00.611 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 21:17:00.700 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 21:17:00.700 +07:00 [INF] Hosting environment: Development
2024-04-29 21:17:00.701 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 21:17:00.701 +07:00 [DBG] Hosting started
2024-04-29 21:17:00.709 +07:00 [DBG] Connection id "0HN38AS4KL0K9" accepted.
2024-04-29 21:17:00.710 +07:00 [DBG] Connection id "0HN38AS4KL0K9" started.
2024-04-29 21:17:00.713 +07:00 [DBG] Connection id "0HN38AS4KL0KA" received FIN.
2024-04-29 21:17:00.715 +07:00 [DBG] Connection id "0HN38AS4KL0KA" accepted.
2024-04-29 21:17:00.715 +07:00 [DBG] Connection id "0HN38AS4KL0K9" received FIN.
2024-04-29 21:17:00.716 +07:00 [DBG] Connection id "0HN38AS4KL0KA" started.
2024-04-29 21:17:00.721 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 21:17:00.721 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 21:17:00.734 +07:00 [DBG] Connection id "0HN38AS4KL0KA" stopped.
2024-04-29 21:17:00.734 +07:00 [DBG] Connection id "0HN38AS4KL0K9" stopped.
2024-04-29 21:17:00.736 +07:00 [DBG] Connection id "0HN38AS4KL0KA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:17:00.736 +07:00 [DBG] Connection id "0HN38AS4KL0K9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:17:00.830 +07:00 [DBG] Connection id "0HN38AS4KL0KB" accepted.
2024-04-29 21:17:00.830 +07:00 [DBG] Connection id "0HN38AS4KL0KB" started.
2024-04-29 21:17:00.856 +07:00 [DBG] Connection 0HN38AS4KL0KB established using the following protocol: "Tls13"
2024-04-29 21:17:00.893 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 21:17:00.955 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 21:17:00.987 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 21:17:00.987 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:17:01.031 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 21:17:01.032 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 21:17:01.044 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 21:17:01.044 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 21:17:01.047 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 156.1348ms
2024-04-29 21:17:01.112 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 21:17:01.112 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 21:17:01.117 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 4.4007ms
2024-04-29 21:17:01.145 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.2736ms
2024-04-29 21:17:01.859 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 21:17:01.859 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 21:17:01.860 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:17:02.020 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 161.3922ms
2024-04-29 21:17:16.055 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7286/api/v1.0/Users/login - application/json; ver=1.0 65
2024-04-29 21:17:16.068 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1.0/Users/login'
2024-04-29 21:17:16.071 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Users/login' is valid for the request path '/api/v1.0/Users/login'
2024-04-29 21:17:16.078 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:17:16.080 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 21:17:16.081 +07:00 [INF] Start request......!
2024-04-29 21:17:16.103 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 21:17:16.107 +07:00 [INF] Executing endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:17:16.126 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest) on controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation).
2024-04-29 21:17:16.127 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-29 21:17:16.128 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-29 21:17:16.129 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)","Asp.Versioning.ApplyContentTypeVersionActionFilter"]
2024-04-29 21:17:16.129 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-29 21:17:16.129 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2024-04-29 21:17:16.130 +07:00 [DBG] Executing controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:17:16.212 +07:00 [DBG] Executed controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:17:16.216 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:17:16.217 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' using the name '' in request data ...
2024-04-29 21:17:16.218 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; ver=1.0'.
2024-04-29 21:17:16.221 +07:00 [DBG] Connection id "0HN38AS4KL0KB", Request id "0HN38AS4KL0KB:00000009": started reading request body.
2024-04-29 21:17:16.222 +07:00 [DBG] Connection id "0HN38AS4KL0KB", Request id "0HN38AS4KL0KB:00000009": done reading request body.
2024-04-29 21:17:16.225 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'
2024-04-29 21:17:16.225 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:17:16.225 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:17:16.226 +07:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:17:16.232 +07:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:17:16.253 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:17:16.262 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-04-29 21:17:16.400 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SplitQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.AccessToken (string), 2], [Property: AppUser.Address (string), 3], [Property: AppUser.Avatar (string), 4], [Property: AppUser.ConcurrencyStamp (string), 5], [Property: AppUser.CreatedDate (DateTime) Required, 6], [Property: AppUser.Email (string), 7], [Property: AppUser.EmailConfirmed (bool) Required, 8], [Property: AppUser.Facebook (string), 9], [Property: AppUser.FirstName (string), 10], [Property: AppUser.LastName (string), 11], [Property: AppUser.LockoutEnabled (bool) Required, 12], [Property: AppUser.LockoutEnd (DateTimeOffset?), 13], [Property: AppUser.NormalizedEmail (string), 14], [Property: AppUser.NormalizedUserName (string), 15], [Property: AppUser.PasswordHash (string), 16], [Property: AppUser.PhoneNumber (string), 17], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 18], [Property: AppUser.RefreshToken (string), 19], [Property: AppUser.RefreshTokenExpiryTime (DateTime) Required, 20], [Property: AppUser.SecurityStamp (string), 21], [Property: AppUser.TwoFactorEnabled (bool) Required, 22], [Property: AppUser.UpdateDate (DateTime) Required, 23], [Property: AppUser.UserName (string), 24] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.AccessToken, a.Address, a.Avatar, a.ConcurrencyStamp, a.CreatedDate, a.Email, a.EmailConfirmed, a.Facebook, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.RefreshTokenExpiryTime, a.SecurityStamp, a.TwoFactorEnabled, a.UpdateDate, a.UserName
            FROM AppUser AS a
            WHERE a.NormalizedEmail == @__normalizedEmail_0), 
        ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTimeOffset>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTime>, ReaderColumn<object> }, 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, AppUser>, 
        null, 
        null, 
        FoodShop.Persistence.ApplicationDbContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-29 21:17:16.417 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:17:16.418 +07:00 [DBG] Created DbConnection. (1ms).
2024-04-29 21:17:16.419 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:16.421 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:16.421 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:17:16.421 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:16.425 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-29 21:17:16.427 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:17:16.450 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:17:16.460 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:17:16.460 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 4ms reading results.
2024-04-29 21:17:16.462 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:16.462 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:16.468 +07:00 [INF] Executed action FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation) in 337.0816ms
2024-04-29 21:17:16.469 +07:00 [INF] Executed endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:17:16.470 +07:00 [ERR] BadRequest
FoodShop.Domain.Exceptions.BadRequestException: BadRequest
   at FoodShop.Infrastructure.Identity.UserServices.LoginAsync(LoginRequest loginRequest, CancellationToken token) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Identity\UserServices.cs:line 124
   at FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync(LoginRequest loginRequest) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Presentation\Controllers\V1\UsersController.cs:line 49
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FoodShop.Infrastructure.Auth.CurrentUserMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Auth\CurrentUserMiddleware.cs:line 21
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FoodShop.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-04-29 21:17:16.482 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:17:16.484 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:16.485 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 21:17:16.486 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7286/api/v1.0/Users/login - 400 null application/json; ver=1.0 430.8998ms
2024-04-29 21:17:48.602 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 21:17:49.047 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 21:17:49.049 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 21:17:49.049 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 21:17:49.050 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 21:17:49.126 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 21:17:49.166 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:17:49.166 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:17:49.166 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:17:49.166 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:17:49.167 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:17:49.167 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:17:49.167 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:17:49.167 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:17:49.167 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:17:49.168 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:17:49.282 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:17:49.291 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:17:49.325 +07:00 [DBG] Created DbConnection. (32ms).
2024-04-29 21:17:49.327 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.333 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.511 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.516 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:17:49.522 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2024-04-29 21:17:49.524 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (9ms).
2024-04-29 21:17:49.529 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:17:49.550 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:17:49.552 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.558 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (4ms).
2024-04-29 21:17:49.560 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:17:49.561 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:17:49.561 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:17:49.561 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.562 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.562 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:17:49.573 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:17:49.574 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.574 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:49.575 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.576 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.576 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:17:49.576 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:17:49.576 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:17:49.576 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:17:49.577 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:17:49.578 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.578 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:49.578 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:17:49.578 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:17:49.578 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:17:49.578 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.578 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.578 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:17:49.579 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:17:49.580 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.580 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:49.590 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.590 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.591 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:17:49.591 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:49.591 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:49.591 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:17:49.594 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:17:49.597 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.598 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 21:17:49.598 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:49.598 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:49.606 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 21:17:49.963 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 21:17:50.117 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:17:50.136 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:50.136 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:50.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:17:50.137 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:50.137 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:50.137 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:17:50.139 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:17:50.148 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:17:50.148 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 21:17:50.149 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:50.149 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:50.152 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 21:17:50.155 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:17:50.155 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:50.156 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:50.156 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:17:50.156 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:50.156 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:17:50.156 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:17:50.158 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:17:50.159 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:17:50.159 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 21:17:50.159 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:50.160 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:17:50.161 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:17:50.162 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:17:50.163 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 21:17:50.214 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 21:18:08.907 +07:00 [DBG] Hosting starting
2024-04-29 21:18:08.926 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 21:18:08.931 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 21:18:08.937 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 21:18:08.945 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 21:18:08.949 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:18:08.950 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 21:18:08.951 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:18:08.953 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 21:18:08.956 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 21:18:08.959 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 21:18:08.960 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 21:18:09.097 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 21:18:09.097 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 21:18:09.097 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 21:18:09.097 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 21:18:09.097 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 21:18:09.098 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 21:18:09.165 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 21:18:09.166 +07:00 [INF] Hosting environment: Development
2024-04-29 21:18:09.166 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 21:18:09.166 +07:00 [DBG] Hosting started
2024-04-29 21:18:09.198 +07:00 [DBG] Connection id "0HN38ASP1Q4DH" accepted.
2024-04-29 21:18:09.198 +07:00 [DBG] Connection id "0HN38ASP1Q4DH" started.
2024-04-29 21:18:09.206 +07:00 [DBG] Connection id "0HN38ASP1Q4DI" accepted.
2024-04-29 21:18:09.206 +07:00 [DBG] Connection id "0HN38ASP1Q4DI" started.
2024-04-29 21:18:09.223 +07:00 [DBG] Connection id "0HN38ASP1Q4DH" received FIN.
2024-04-29 21:18:09.223 +07:00 [DBG] Connection id "0HN38ASP1Q4DI" received FIN.
2024-04-29 21:18:09.237 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 21:18:09.237 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 21:18:09.253 +07:00 [DBG] Connection id "0HN38ASP1Q4DH" stopped.
2024-04-29 21:18:09.253 +07:00 [DBG] Connection id "0HN38ASP1Q4DI" stopped.
2024-04-29 21:18:09.255 +07:00 [DBG] Connection id "0HN38ASP1Q4DH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:18:09.255 +07:00 [DBG] Connection id "0HN38ASP1Q4DI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:18:09.419 +07:00 [DBG] Connection id "0HN38ASP1Q4DJ" accepted.
2024-04-29 21:18:09.419 +07:00 [DBG] Connection id "0HN38ASP1Q4DJ" started.
2024-04-29 21:18:09.444 +07:00 [DBG] Connection 0HN38ASP1Q4DJ established using the following protocol: "Tls13"
2024-04-29 21:18:09.494 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 21:18:09.582 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 21:18:09.620 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 21:18:09.621 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:18:09.669 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 21:18:09.671 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 21:18:09.693 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 21:18:09.694 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 21:18:09.701 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 211.0585ms
2024-04-29 21:18:09.708 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 21:18:09.716 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 7.1336ms
2024-04-29 21:18:09.761 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 21:18:09.801 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.249ms
2024-04-29 21:18:10.336 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 21:18:10.337 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 21:18:10.337 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:18:22.361 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12025.5535ms
2024-04-29 21:18:54.838 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7286/api/v1.0/Users/login - application/json; ver=1.0 65
2024-04-29 21:18:54.866 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1.0/Users/login'
2024-04-29 21:18:54.869 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Users/login' is valid for the request path '/api/v1.0/Users/login'
2024-04-29 21:18:54.873 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:18:54.877 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 21:18:54.879 +07:00 [INF] Start request......!
2024-04-29 21:18:54.936 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 21:18:54.940 +07:00 [INF] Executing endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:18:54.966 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest) on controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation).
2024-04-29 21:18:54.968 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-29 21:18:54.968 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-29 21:18:54.969 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)","Asp.Versioning.ApplyContentTypeVersionActionFilter"]
2024-04-29 21:18:54.969 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-29 21:18:54.969 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2024-04-29 21:18:54.971 +07:00 [DBG] Executing controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:18:55.083 +07:00 [DBG] Executed controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:18:55.090 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:18:55.094 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' using the name '' in request data ...
2024-04-29 21:18:55.095 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; ver=1.0'.
2024-04-29 21:18:55.100 +07:00 [DBG] Connection id "0HN38ASP1Q4DJ", Request id "0HN38ASP1Q4DJ:00000009": started reading request body.
2024-04-29 21:18:55.100 +07:00 [DBG] Connection id "0HN38ASP1Q4DJ", Request id "0HN38ASP1Q4DJ:00000009": done reading request body.
2024-04-29 21:18:55.105 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'
2024-04-29 21:18:55.106 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:18:55.107 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:18:55.107 +07:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:18:55.116 +07:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:19:01.244 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:19:01.253 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-04-29 21:19:01.524 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SplitQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.AccessToken (string), 2], [Property: AppUser.Address (string), 3], [Property: AppUser.Avatar (string), 4], [Property: AppUser.ConcurrencyStamp (string), 5], [Property: AppUser.CreatedDate (DateTime) Required, 6], [Property: AppUser.Email (string), 7], [Property: AppUser.EmailConfirmed (bool) Required, 8], [Property: AppUser.Facebook (string), 9], [Property: AppUser.FirstName (string), 10], [Property: AppUser.LastName (string), 11], [Property: AppUser.LockoutEnabled (bool) Required, 12], [Property: AppUser.LockoutEnd (DateTimeOffset?), 13], [Property: AppUser.NormalizedEmail (string), 14], [Property: AppUser.NormalizedUserName (string), 15], [Property: AppUser.PasswordHash (string), 16], [Property: AppUser.PhoneNumber (string), 17], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 18], [Property: AppUser.RefreshToken (string), 19], [Property: AppUser.RefreshTokenExpiryTime (DateTime) Required, 20], [Property: AppUser.SecurityStamp (string), 21], [Property: AppUser.TwoFactorEnabled (bool) Required, 22], [Property: AppUser.UpdateDate (DateTime) Required, 23], [Property: AppUser.UserName (string), 24] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.AccessToken, a.Address, a.Avatar, a.ConcurrencyStamp, a.CreatedDate, a.Email, a.EmailConfirmed, a.Facebook, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.RefreshTokenExpiryTime, a.SecurityStamp, a.TwoFactorEnabled, a.UpdateDate, a.UserName
            FROM AppUser AS a
            WHERE a.NormalizedEmail == @__normalizedEmail_0), 
        ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTimeOffset>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTime>, ReaderColumn<object> }, 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, AppUser>, 
        null, 
        null, 
        FoodShop.Persistence.ApplicationDbContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-29 21:19:01.541 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:19:01.541 +07:00 [DBG] Created DbConnection. (0ms).
2024-04-29 21:19:01.543 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:19:01.545 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:19:01.546 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:19:01.546 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:19:01.549 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-29 21:19:01.552 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:19:01.603 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:19:01.619 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:19:01.619 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 7ms reading results.
2024-04-29 21:19:01.621 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:19:01.621 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:24:42.807 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 21:24:43.276 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 21:24:43.278 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 21:24:43.278 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 21:24:43.278 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 21:24:43.357 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 21:24:43.418 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:24:43.418 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:24:43.419 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:24:43.419 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:24:43.419 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:24:43.420 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:24:43.420 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:24:43.421 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:24:43.421 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:24:43.422 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:24:43.543 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:24:43.548 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:24:43.571 +07:00 [DBG] Created DbConnection. (20ms).
2024-04-29 21:24:43.573 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.577 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.682 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.686 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:24:43.691 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2024-04-29 21:24:43.693 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (8ms).
2024-04-29 21:24:43.698 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:24:43.717 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:24:43.720 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.727 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (3ms).
2024-04-29 21:24:43.730 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:24:43.731 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:24:43.731 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:24:43.731 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.732 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.732 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:24:43.744 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:24:43.744 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.745 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:24:43.746 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.746 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.746 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:24:43.747 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:24:43.747 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:24:43.747 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:24:43.748 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:24:43.749 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.749 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:24:43.749 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:24:43.749 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:24:43.750 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:24:43.750 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.750 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.750 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:24:43.751 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:24:43.751 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.751 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:24:43.763 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.763 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.764 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:24:43.764 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:24:43.764 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:24:43.765 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:24:43.768 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:24:43.771 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.773 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 21:24:43.773 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:43.774 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:24:43.784 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 21:24:43.906 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 21:24:44.038 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:24:44.061 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:44.062 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:44.062 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:24:44.062 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:24:44.062 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:24:44.062 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:24:44.065 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:24:44.077 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:24:44.078 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 21:24:44.078 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:44.078 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:24:44.082 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 21:24:44.085 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:24:44.086 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:44.086 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:44.087 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:24:44.088 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:24:44.088 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:24:44.088 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:24:44.091 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:24:44.091 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:24:44.092 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 21:24:44.092 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:44.092 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:24:44.093 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:24:44.096 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:24:44.098 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 21:24:44.138 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 21:24:44.203 +07:00 [DBG] Hosting starting
2024-04-29 21:24:44.212 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 21:24:44.217 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 21:24:44.222 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 21:24:44.228 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 21:24:44.230 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:24:44.231 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 21:24:44.232 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:24:44.234 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 21:24:44.236 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 21:24:44.238 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 21:24:44.239 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 21:24:44.308 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 21:24:44.308 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 21:24:44.308 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 21:24:44.309 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 21:24:44.309 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 21:24:44.309 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 21:24:44.396 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 21:24:44.397 +07:00 [INF] Hosting environment: Development
2024-04-29 21:24:44.397 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 21:24:44.397 +07:00 [DBG] Hosting started
2024-04-29 21:24:44.574 +07:00 [DBG] Connection id "0HN38B0ESDJQ9" received FIN.
2024-04-29 21:24:44.574 +07:00 [DBG] Connection id "0HN38B0ESDJQ8" received FIN.
2024-04-29 21:24:44.579 +07:00 [DBG] Connection id "0HN38B0ESDJQ9" accepted.
2024-04-29 21:24:44.579 +07:00 [DBG] Connection id "0HN38B0ESDJQ8" accepted.
2024-04-29 21:24:44.580 +07:00 [DBG] Connection id "0HN38B0ESDJQ9" started.
2024-04-29 21:24:44.580 +07:00 [DBG] Connection id "0HN38B0ESDJQ8" started.
2024-04-29 21:24:44.589 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 21:24:44.589 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 21:24:44.601 +07:00 [DBG] Connection id "0HN38B0ESDJQ9" stopped.
2024-04-29 21:24:44.601 +07:00 [DBG] Connection id "0HN38B0ESDJQ8" stopped.
2024-04-29 21:24:44.603 +07:00 [DBG] Connection id "0HN38B0ESDJQ9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:24:44.603 +07:00 [DBG] Connection id "0HN38B0ESDJQ8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:24:44.698 +07:00 [DBG] Connection id "0HN38B0ESDJQA" accepted.
2024-04-29 21:24:44.698 +07:00 [DBG] Connection id "0HN38B0ESDJQA" started.
2024-04-29 21:24:44.729 +07:00 [DBG] Connection 0HN38B0ESDJQA established using the following protocol: "Tls13"
2024-04-29 21:24:44.765 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 21:24:44.862 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 21:24:44.896 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 21:24:44.897 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:24:44.943 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 21:24:44.944 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 21:24:44.958 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 21:24:44.958 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 21:24:44.961 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 197.326ms
2024-04-29 21:24:45.023 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 21:24:45.023 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 21:24:45.027 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 3.7158ms
2024-04-29 21:24:45.061 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.51ms
2024-04-29 21:24:45.659 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 21:24:45.661 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 21:24:45.662 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:24:45.853 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 194.3976ms
2024-04-29 21:25:00.430 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7286/api/v1.0/Users/login - application/json; ver=1.0 71
2024-04-29 21:25:00.443 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1.0/Users/login'
2024-04-29 21:25:00.446 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Users/login' is valid for the request path '/api/v1.0/Users/login'
2024-04-29 21:25:00.452 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:25:00.454 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 21:25:00.456 +07:00 [INF] Start request......!
2024-04-29 21:25:00.474 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 21:25:00.477 +07:00 [INF] Executing endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:25:00.497 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest) on controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation).
2024-04-29 21:25:00.498 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-29 21:25:00.498 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-29 21:25:00.500 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)","Asp.Versioning.ApplyContentTypeVersionActionFilter"]
2024-04-29 21:25:00.500 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-29 21:25:00.501 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2024-04-29 21:25:00.502 +07:00 [DBG] Executing controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:25:00.576 +07:00 [DBG] Executed controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:25:00.578 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:25:00.580 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' using the name '' in request data ...
2024-04-29 21:25:00.581 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; ver=1.0'.
2024-04-29 21:25:00.584 +07:00 [DBG] Connection id "0HN38B0ESDJQA", Request id "0HN38B0ESDJQA:00000009": started reading request body.
2024-04-29 21:25:00.585 +07:00 [DBG] Connection id "0HN38B0ESDJQA", Request id "0HN38B0ESDJQA:00000009": done reading request body.
2024-04-29 21:25:00.587 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'
2024-04-29 21:25:00.588 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:25:00.588 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:25:00.588 +07:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:25:00.593 +07:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:25:00.610 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:25:00.618 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-04-29 21:25:00.722 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SplitQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.AccessToken (string), 2], [Property: AppUser.Address (string), 3], [Property: AppUser.Avatar (string), 4], [Property: AppUser.ConcurrencyStamp (string), 5], [Property: AppUser.CreatedDate (DateTime) Required, 6], [Property: AppUser.Email (string), 7], [Property: AppUser.EmailConfirmed (bool) Required, 8], [Property: AppUser.Facebook (string), 9], [Property: AppUser.FirstName (string), 10], [Property: AppUser.LastName (string), 11], [Property: AppUser.LockoutEnabled (bool) Required, 12], [Property: AppUser.LockoutEnd (DateTimeOffset?), 13], [Property: AppUser.NormalizedEmail (string), 14], [Property: AppUser.NormalizedUserName (string), 15], [Property: AppUser.PasswordHash (string), 16], [Property: AppUser.PhoneNumber (string), 17], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 18], [Property: AppUser.RefreshToken (string), 19], [Property: AppUser.RefreshTokenExpiryTime (DateTime) Required, 20], [Property: AppUser.SecurityStamp (string), 21], [Property: AppUser.TwoFactorEnabled (bool) Required, 22], [Property: AppUser.UpdateDate (DateTime) Required, 23], [Property: AppUser.UserName (string), 24] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.AccessToken, a.Address, a.Avatar, a.ConcurrencyStamp, a.CreatedDate, a.Email, a.EmailConfirmed, a.Facebook, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.RefreshTokenExpiryTime, a.SecurityStamp, a.TwoFactorEnabled, a.UpdateDate, a.UserName
            FROM AppUser AS a
            WHERE a.NormalizedEmail == @__normalizedEmail_0), 
        ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTimeOffset>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTime>, ReaderColumn<object> }, 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, AppUser>, 
        null, 
        null, 
        FoodShop.Persistence.ApplicationDbContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-29 21:25:00.735 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:25:00.736 +07:00 [DBG] Created DbConnection. (0ms).
2024-04-29 21:25:00.738 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:25:00.740 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:25:00.740 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:25:00.741 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:25:00.744 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-04-29 21:25:00.747 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:25:00.773 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:25:00.786 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:25:00.787 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 5ms reading results.
2024-04-29 21:25:00.788 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:25:00.789 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:25:00.797 +07:00 [INF] Executed action FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation) in 293.0723ms
2024-04-29 21:25:00.813 +07:00 [INF] Executed endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:25:00.815 +07:00 [ERR] BadRequest
FoodShop.Domain.Exceptions.BadRequestException: BadRequest
   at FoodShop.Infrastructure.Identity.UserServices.LoginAsync(LoginRequest loginRequest, CancellationToken token) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Identity\UserServices.cs:line 124
   at FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync(LoginRequest loginRequest) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Presentation\Controllers\V1\UsersController.cs:line 49
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FoodShop.Infrastructure.Auth.CurrentUserMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Auth\CurrentUserMiddleware.cs:line 21
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FoodShop.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-04-29 21:25:00.836 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:25:00.839 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:25:00.840 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 21:25:00.841 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7286/api/v1.0/Users/login - 400 null application/json; ver=1.0 411.196ms
2024-04-29 21:36:39.599 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 21:36:39.948 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 21:36:39.949 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 21:36:39.950 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 21:36:39.950 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 21:36:40.013 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 21:36:40.058 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:36:40.058 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:36:40.059 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:36:40.059 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:36:40.059 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:36:40.059 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:36:40.060 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:36:40.060 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:36:40.060 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:36:40.060 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:36:40.171 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:36:40.175 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:36:40.201 +07:00 [DBG] Created DbConnection. (23ms).
2024-04-29 21:36:40.203 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.207 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.329 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.334 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:36:40.338 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2024-04-29 21:36:40.340 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (8ms).
2024-04-29 21:36:40.345 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:36:40.362 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:36:40.363 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.369 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (3ms).
2024-04-29 21:36:40.370 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:36:40.371 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:36:40.371 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:36:40.371 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.371 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.372 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:36:40.382 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:36:40.383 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.383 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:36:40.384 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.384 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.384 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:36:40.384 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:36:40.384 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:36:40.384 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:36:40.385 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:36:40.385 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.386 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:36:40.386 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:36:40.386 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:36:40.386 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:36:40.386 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.386 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.386 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:36:40.387 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:36:40.387 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.387 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:36:40.396 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.396 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.396 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:36:40.396 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:36:40.396 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:36:40.397 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:36:40.399 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:36:40.401 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.402 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 21:36:40.402 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.402 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:36:40.409 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 21:36:40.504 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 21:36:40.595 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:36:40.611 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.612 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.612 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:36:40.612 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:36:40.612 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:36:40.612 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:36:40.614 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:36:40.622 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.623 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 21:36:40.623 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.623 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:36:40.626 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 21:36:40.628 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:36:40.629 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.629 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.629 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:36:40.630 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:36:40.630 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:36:40.630 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:36:40.631 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:36:40.632 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.632 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 21:36:40.632 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.632 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:36:40.633 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:36:40.635 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:40.635 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 21:36:40.660 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 21:36:40.702 +07:00 [DBG] Hosting starting
2024-04-29 21:36:40.709 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 21:36:40.714 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 21:36:40.717 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 21:36:40.724 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 21:36:40.727 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:36:40.728 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 21:36:40.729 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:36:40.730 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 21:36:40.733 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 21:36:40.735 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 21:36:40.735 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 21:36:40.789 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 21:36:40.789 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 21:36:40.789 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 21:36:40.789 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 21:36:40.790 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 21:36:40.790 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 21:36:40.839 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 21:36:40.839 +07:00 [INF] Hosting environment: Development
2024-04-29 21:36:40.839 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 21:36:40.839 +07:00 [DBG] Hosting started
2024-04-29 21:36:41.175 +07:00 [DBG] Connection id "0HN38B74EEJVQ" accepted.
2024-04-29 21:36:41.175 +07:00 [DBG] Connection id "0HN38B74EEJVQ" started.
2024-04-29 21:36:41.188 +07:00 [DBG] Connection id "0HN38B74EEJVQ" received FIN.
2024-04-29 21:36:41.191 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 21:36:41.199 +07:00 [DBG] Connection id "0HN38B74EEJVQ" stopped.
2024-04-29 21:36:41.200 +07:00 [DBG] Connection id "0HN38B74EEJVQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:36:41.315 +07:00 [DBG] Connection id "0HN38B74EEJVR" accepted.
2024-04-29 21:36:41.315 +07:00 [DBG] Connection id "0HN38B74EEJVR" started.
2024-04-29 21:36:41.341 +07:00 [DBG] Connection 0HN38B74EEJVR established using the following protocol: "Tls13"
2024-04-29 21:36:41.377 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 21:36:41.436 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 21:36:41.470 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 21:36:41.471 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:36:41.522 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 21:36:41.524 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 21:36:41.539 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 21:36:41.540 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 21:36:41.542 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 166.6709ms
2024-04-29 21:36:41.619 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 21:36:41.619 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 21:36:41.628 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 8.3137ms
2024-04-29 21:36:41.657 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.1764ms
2024-04-29 21:36:42.260 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 21:36:42.260 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 21:36:42.261 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:36:42.431 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 171.453ms
2024-04-29 21:36:57.593 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7286/api/v1.0/Users/login - application/json; ver=1.0 71
2024-04-29 21:36:57.616 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1.0/Users/login'
2024-04-29 21:36:57.634 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Users/login' is valid for the request path '/api/v1.0/Users/login'
2024-04-29 21:36:57.642 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:36:57.647 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 21:36:57.650 +07:00 [INF] Start request......!
2024-04-29 21:36:57.671 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 21:36:57.674 +07:00 [INF] Executing endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:36:57.697 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest) on controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation).
2024-04-29 21:36:57.699 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-29 21:36:57.699 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-29 21:36:57.700 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)","Asp.Versioning.ApplyContentTypeVersionActionFilter"]
2024-04-29 21:36:57.700 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-29 21:36:57.700 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2024-04-29 21:36:57.702 +07:00 [DBG] Executing controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:36:57.795 +07:00 [DBG] Executed controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:36:57.799 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:36:57.801 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' using the name '' in request data ...
2024-04-29 21:36:57.803 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; ver=1.0'.
2024-04-29 21:36:57.806 +07:00 [DBG] Connection id "0HN38B74EEJVR", Request id "0HN38B74EEJVR:00000009": started reading request body.
2024-04-29 21:36:57.806 +07:00 [DBG] Connection id "0HN38B74EEJVR", Request id "0HN38B74EEJVR:00000009": done reading request body.
2024-04-29 21:36:57.810 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'
2024-04-29 21:36:57.811 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:36:57.811 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:36:57.811 +07:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:36:57.818 +07:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:36:57.838 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:36:57.846 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-04-29 21:36:57.963 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SplitQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.AccessToken (string), 2], [Property: AppUser.Address (string), 3], [Property: AppUser.Avatar (string), 4], [Property: AppUser.ConcurrencyStamp (string), 5], [Property: AppUser.CreatedDate (DateTime) Required, 6], [Property: AppUser.Email (string), 7], [Property: AppUser.EmailConfirmed (bool) Required, 8], [Property: AppUser.Facebook (string), 9], [Property: AppUser.FirstName (string), 10], [Property: AppUser.LastName (string), 11], [Property: AppUser.LockoutEnabled (bool) Required, 12], [Property: AppUser.LockoutEnd (DateTimeOffset?), 13], [Property: AppUser.NormalizedEmail (string), 14], [Property: AppUser.NormalizedUserName (string), 15], [Property: AppUser.PasswordHash (string), 16], [Property: AppUser.PhoneNumber (string), 17], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 18], [Property: AppUser.RefreshToken (string), 19], [Property: AppUser.RefreshTokenExpiryTime (DateTime) Required, 20], [Property: AppUser.SecurityStamp (string), 21], [Property: AppUser.TwoFactorEnabled (bool) Required, 22], [Property: AppUser.UpdateDate (DateTime) Required, 23], [Property: AppUser.UserName (string), 24] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.AccessToken, a.Address, a.Avatar, a.ConcurrencyStamp, a.CreatedDate, a.Email, a.EmailConfirmed, a.Facebook, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.RefreshTokenExpiryTime, a.SecurityStamp, a.TwoFactorEnabled, a.UpdateDate, a.UserName
            FROM AppUser AS a
            WHERE a.NormalizedEmail == @__normalizedEmail_0), 
        ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTimeOffset>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTime>, ReaderColumn<object> }, 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, AppUser>, 
        null, 
        null, 
        FoodShop.Persistence.ApplicationDbContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-29 21:36:57.978 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:36:57.978 +07:00 [DBG] Created DbConnection. (0ms).
2024-04-29 21:36:57.980 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:57.982 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:57.982 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:36:57.982 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:36:57.984 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-29 21:36:57.986 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:36:58.007 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:36:58.019 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:36:58.019 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 5ms reading results.
2024-04-29 21:36:58.020 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:58.021 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:36:58.027 +07:00 [INF] Executed action FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation) in 324.6417ms
2024-04-29 21:36:58.028 +07:00 [INF] Executed endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:36:58.029 +07:00 [ERR] BadRequest
FoodShop.Domain.Exceptions.BadRequestException: BadRequest
   at FoodShop.Infrastructure.Identity.UserServices.LoginAsync(LoginRequest loginRequest, CancellationToken token) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Identity\UserServices.cs:line 124
   at FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync(LoginRequest loginRequest) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Presentation\Controllers\V1\UsersController.cs:line 49
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FoodShop.Infrastructure.Auth.CurrentUserMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Auth\CurrentUserMiddleware.cs:line 21
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FoodShop.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-04-29 21:36:58.056 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:36:58.060 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:36:58.061 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 21:36:58.061 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7286/api/v1.0/Users/login - 400 null application/json; ver=1.0 467.9858ms
2024-04-29 21:38:57.791 +07:00 [DBG] HttpMessageHandler expired after 120000ms for client 'MailTrapApiClient'
2024-04-29 21:39:07.793 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:39:07.797 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.032ms - processed: 0 items - remaining: 1 items
2024-04-29 21:39:09.685 +07:00 [DBG] Connection id "0HN38B74EEJVR" is closing.
2024-04-29 21:39:09.685 +07:00 [DBG] Connection id "0HN38B74EEJVR" is closed. The last processed stream ID was 9.
2024-04-29 21:39:09.686 +07:00 [DBG] Connection id "0HN38B74EEJVR" received FIN.
2024-04-29 21:39:09.686 +07:00 [DBG] Connection id "0HN38B74EEJVR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:39:09.687 +07:00 [DBG] The connection queue processing loop for 0HN38B74EEJVR completed.
2024-04-29 21:39:09.688 +07:00 [DBG] Connection id "0HN38B74EEJVR" stopped.
2024-04-29 21:39:17.797 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:39:17.797 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0051ms - processed: 0 items - remaining: 1 items
2024-04-29 21:39:27.809 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:39:27.809 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2024-04-29 21:39:37.812 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:39:37.813 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2024-04-29 21:39:47.820 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:39:47.820 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2024-04-29 21:39:57.821 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:39:57.821 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2024-04-29 21:40:07.825 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:40:07.825 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2024-04-29 21:40:17.830 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:40:17.831 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2024-04-29 21:40:27.846 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:40:27.847 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2024-04-29 21:40:37.854 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:40:37.854 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2024-04-29 21:40:47.857 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:40:47.857 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2024-04-29 21:40:57.863 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:40:57.864 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0049ms - processed: 0 items - remaining: 1 items
2024-04-29 21:41:07.866 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:41:07.867 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2024-04-29 21:41:17.878 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:41:17.878 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2024-04-29 21:41:27.879 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:41:27.880 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0062ms - processed: 0 items - remaining: 1 items
2024-04-29 21:41:37.880 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:41:37.881 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2024-04-29 21:41:47.890 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:41:47.890 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2024-04-29 21:41:57.903 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:41:57.904 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2024-04-29 21:42:07.905 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:42:07.905 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0041ms - processed: 0 items - remaining: 1 items
2024-04-29 21:42:17.910 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:42:17.911 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2024-04-29 21:42:27.921 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:42:27.921 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2024-04-29 21:42:37.929 +07:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2024-04-29 21:42:37.929 +07:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2024-04-29 21:42:42.656 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 21:42:42.975 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 21:42:42.977 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 21:42:42.977 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 21:42:42.977 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 21:42:43.039 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 21:42:43.075 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:42:43.075 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:42:43.075 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:42:43.075 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:42:43.076 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:42:43.076 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:42:43.076 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:42:43.076 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:42:43.077 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:42:43.077 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:42:43.161 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:42:43.168 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:42:43.190 +07:00 [DBG] Created DbConnection. (20ms).
2024-04-29 21:42:43.192 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.196 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.299 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.305 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:42:43.311 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2024-04-29 21:42:43.312 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (11ms).
2024-04-29 21:42:43.317 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:42:43.339 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:42:43.341 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.347 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (3ms).
2024-04-29 21:42:43.349 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:42:43.349 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:42:43.349 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:42:43.349 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.350 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.351 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:42:43.361 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:42:43.361 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.362 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:42:43.362 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.363 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.363 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:42:43.363 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:42:43.363 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:42:43.363 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:42:43.365 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:42:43.365 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.365 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:42:43.365 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:42:43.365 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:42:43.366 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:42:43.366 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.366 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.366 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:42:43.367 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:42:43.367 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.367 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:42:43.378 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.378 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.378 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:42:43.378 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:42:43.378 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:42:43.379 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:42:43.381 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:42:43.384 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.385 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 21:42:43.386 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.386 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:42:43.393 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 21:42:43.485 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 21:42:43.591 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:42:43.616 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.616 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.616 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:42:43.616 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:42:43.617 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:42:43.617 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:42:43.620 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:42:43.631 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.631 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 21:42:43.632 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.632 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:42:43.636 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 21:42:43.639 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:42:43.640 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.640 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.641 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:42:43.641 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:42:43.641 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:42:43.641 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:42:43.644 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:42:43.644 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.645 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 21:42:43.645 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.645 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:42:43.646 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:42:43.649 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:42:43.650 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-29 21:42:43.690 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 21:42:43.772 +07:00 [DBG] Hosting starting
2024-04-29 21:42:43.784 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 21:42:43.792 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 21:42:43.797 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 21:42:43.805 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 21:42:43.808 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:42:43.809 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 21:42:43.811 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:42:43.812 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 21:42:43.815 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 21:42:43.818 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 21:42:43.818 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 21:42:43.900 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 21:42:43.903 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 21:42:43.903 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 21:42:43.903 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 21:42:43.903 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 21:42:43.903 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 21:42:43.979 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 21:42:43.980 +07:00 [INF] Hosting environment: Development
2024-04-29 21:42:43.980 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 21:42:43.980 +07:00 [DBG] Hosting started
2024-04-29 21:42:44.230 +07:00 [DBG] Connection id "0HN38BAGKQD88" received FIN.
2024-04-29 21:42:44.230 +07:00 [DBG] Connection id "0HN38BAGKQD89" received FIN.
2024-04-29 21:42:44.234 +07:00 [DBG] Connection id "0HN38BAGKQD89" accepted.
2024-04-29 21:42:44.234 +07:00 [DBG] Connection id "0HN38BAGKQD88" accepted.
2024-04-29 21:42:44.235 +07:00 [DBG] Connection id "0HN38BAGKQD89" started.
2024-04-29 21:42:44.235 +07:00 [DBG] Connection id "0HN38BAGKQD88" started.
2024-04-29 21:42:44.238 +07:00 [DBG] Connection id "0HN38BAGKQD8A" accepted.
2024-04-29 21:42:44.239 +07:00 [DBG] Connection id "0HN38BAGKQD8A" started.
2024-04-29 21:42:44.243 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 21:42:44.243 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 21:42:44.252 +07:00 [DBG] Connection id "0HN38BAGKQD89" stopped.
2024-04-29 21:42:44.252 +07:00 [DBG] Connection id "0HN38BAGKQD88" stopped.
2024-04-29 21:42:44.254 +07:00 [DBG] Connection id "0HN38BAGKQD89" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:42:44.254 +07:00 [DBG] Connection id "0HN38BAGKQD88" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:42:44.263 +07:00 [DBG] Connection 0HN38BAGKQD8A established using the following protocol: "Tls13"
2024-04-29 21:42:44.288 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 21:42:44.336 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 21:42:44.374 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 21:42:44.375 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:42:44.430 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 21:42:44.432 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 21:42:44.446 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 21:42:44.447 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 21:42:44.449 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 162.6105ms
2024-04-29 21:42:44.503 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 21:42:44.506 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 3.0804ms
2024-04-29 21:42:44.510 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 21:42:44.532 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.1488ms
2024-04-29 21:42:45.044 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 21:42:45.044 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 21:42:45.044 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:42:45.090 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/favicon-32x32.png - null null
2024-04-29 21:42:45.092 +07:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-04-29 21:42:45.092 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:42:45.099 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-04-29 21:42:45.100 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/favicon-32x32.png - 200 628 image/png 9.2561ms
2024-04-29 21:42:45.159 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 115.5366ms
2024-04-29 21:43:06.062 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7286/api/v1/Users/login - application/json; ver=1.0 71
2024-04-29 21:43:06.075 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1/Users/login'
2024-04-29 21:43:06.077 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Users/login' is valid for the request path '/api/v1/Users/login'
2024-04-29 21:43:06.083 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:43:06.084 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 21:43:06.085 +07:00 [INF] Start request......!
2024-04-29 21:43:06.101 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 21:43:06.104 +07:00 [INF] Executing endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:43:06.121 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest) on controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation).
2024-04-29 21:43:06.122 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-29 21:43:06.123 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-29 21:43:06.123 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)","Asp.Versioning.ApplyContentTypeVersionActionFilter"]
2024-04-29 21:43:06.124 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-29 21:43:06.124 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2024-04-29 21:43:06.125 +07:00 [DBG] Executing controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:43:06.195 +07:00 [DBG] Executed controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:43:06.198 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:43:06.199 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' using the name '' in request data ...
2024-04-29 21:43:06.201 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; ver=1.0'.
2024-04-29 21:43:06.203 +07:00 [DBG] Connection id "0HN38BAGKQD8A", Request id "0HN38BAGKQD8A:0000000B": started reading request body.
2024-04-29 21:43:06.203 +07:00 [DBG] Connection id "0HN38BAGKQD8A", Request id "0HN38BAGKQD8A:0000000B": done reading request body.
2024-04-29 21:43:06.206 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'
2024-04-29 21:43:06.207 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:43:06.207 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:43:06.207 +07:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:43:06.212 +07:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:43:06.228 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:43:06.235 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-04-29 21:43:06.335 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SplitQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.AccessToken (string), 2], [Property: AppUser.Address (string), 3], [Property: AppUser.Avatar (string), 4], [Property: AppUser.ConcurrencyStamp (string), 5], [Property: AppUser.CreatedDate (DateTime) Required, 6], [Property: AppUser.Email (string), 7], [Property: AppUser.EmailConfirmed (bool) Required, 8], [Property: AppUser.Facebook (string), 9], [Property: AppUser.FirstName (string), 10], [Property: AppUser.LastName (string), 11], [Property: AppUser.LockoutEnabled (bool) Required, 12], [Property: AppUser.LockoutEnd (DateTimeOffset?), 13], [Property: AppUser.NormalizedEmail (string), 14], [Property: AppUser.NormalizedUserName (string), 15], [Property: AppUser.PasswordHash (string), 16], [Property: AppUser.PhoneNumber (string), 17], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 18], [Property: AppUser.RefreshToken (string), 19], [Property: AppUser.RefreshTokenExpiryTime (DateTime) Required, 20], [Property: AppUser.SecurityStamp (string), 21], [Property: AppUser.TwoFactorEnabled (bool) Required, 22], [Property: AppUser.UpdateDate (DateTime) Required, 23], [Property: AppUser.UserName (string), 24] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.AccessToken, a.Address, a.Avatar, a.ConcurrencyStamp, a.CreatedDate, a.Email, a.EmailConfirmed, a.Facebook, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.RefreshTokenExpiryTime, a.SecurityStamp, a.TwoFactorEnabled, a.UpdateDate, a.UserName
            FROM AppUser AS a
            WHERE a.NormalizedEmail == @__normalizedEmail_0), 
        ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTimeOffset>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTime>, ReaderColumn<object> }, 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, AppUser>, 
        null, 
        null, 
        FoodShop.Persistence.ApplicationDbContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-29 21:43:06.350 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:43:06.351 +07:00 [DBG] Created DbConnection. (0ms).
2024-04-29 21:43:06.353 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:06.355 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:06.355 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:43:06.355 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:43:06.357 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-29 21:43:06.360 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:43:06.381 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:43:06.391 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:43:06.391 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 4ms reading results.
2024-04-29 21:43:06.393 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:06.393 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:43:06.398 +07:00 [INF] Executed action FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation) in 272.4265ms
2024-04-29 21:43:06.399 +07:00 [INF] Executed endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:43:06.401 +07:00 [ERR] BadRequest
FoodShop.Domain.Exceptions.BadRequestException: BadRequest
   at FoodShop.Infrastructure.Identity.UserServices.LoginAsync(LoginRequest loginRequest, CancellationToken token) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Identity\UserServices.cs:line 124
   at FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync(LoginRequest loginRequest) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Presentation\Controllers\V1\UsersController.cs:line 49
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FoodShop.Infrastructure.Auth.CurrentUserMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Auth\CurrentUserMiddleware.cs:line 21
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FoodShop.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-04-29 21:43:06.412 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:43:06.415 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:06.415 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 21:43:06.416 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7286/api/v1/Users/login - 400 null application/json; ver=1 354.1304ms
2024-04-29 21:43:19.914 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-29 21:43:20.456 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'CartProduct' as the properties are already covered by the index {'ProductId', 'CartId'}.
2024-04-29 21:43:20.458 +07:00 [DBG] The index {'OrderId'} was not created on entity type 'OrderProduct' as the properties are already covered by the index {'OrderId', 'ProductId'}.
2024-04-29 21:43:20.459 +07:00 [DBG] The index {'ProductId'} was not created on entity type 'ProductCategory' as the properties are already covered by the index {'ProductId', 'CategoryId'}.
2024-04-29 21:43:20.459 +07:00 [DBG] The index {'RoleId'} was not created on entity type 'IdentityUserRole<Guid>' as the properties are already covered by the index {'RoleId', 'UserId'}.
2024-04-29 21:43:20.596 +07:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-04-29 21:43:20.699 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Cart'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:43:20.717 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CartProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:43:20.717 +07:00 [WRN] No store type was specified for the decimal property 'Amout' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:43:20.717 +07:00 [WRN] No store type was specified for the decimal property 'AmoutTotal' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:43:20.717 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:43:20.717 +07:00 [WRN] No store type was specified for the decimal property 'Shipping' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:43:20.718 +07:00 [WRN] No store type was specified for the decimal property 'Tax' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:43:20.718 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'OrderProduct'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:43:20.718 +07:00 [WRN] No store type was specified for the decimal property 'Discount' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:43:20.719 +07:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2024-04-29 21:43:20.860 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:43:20.865 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:43:20.896 +07:00 [DBG] Created DbConnection. (28ms).
2024-04-29 21:43:20.898 +07:00 [DBG] Migrating using database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:20.903 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.028 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.036 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:43:21.043 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2024-04-29 21:43:21.044 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (12ms).
2024-04-29 21:43:21.050 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:43:21.074 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:43:21.076 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.083 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (3ms).
2024-04-29 21:43:21.085 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:43:21.085 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:43:21.085 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:43:21.085 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.086 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.087 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:43:21.098 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:43:21.098 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.099 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:43:21.100 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.100 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.100 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-04-29 21:43:21.100 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:43:21.101 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-04-29 21:43:21.101 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:43:21.103 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-04-29 21:43:21.103 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.103 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:43:21.103 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-04-29 21:43:21.104 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:43:21.104 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-04-29 21:43:21.104 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.104 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.104 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:43:21.105 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-04-29 21:43:21.105 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.105 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:43:21.117 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.117 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.118 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:43:21.118 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:43:21.118 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:43:21.119 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:43:21.120 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-04-29 21:43:21.123 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.124 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 2ms reading results.
2024-04-29 21:43:21.125 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.125 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:43:21.133 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-04-29 21:43:21.242 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .Any()'
2024-04-29 21:43:21.378 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppUser AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:43:21.397 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.397 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.397 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:43:21.398 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:43:21.398 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:43:21.398 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:43:21.399 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppUser] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:43:21.409 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.410 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 1ms reading results.
2024-04-29 21:43:21.410 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.410 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:43:21.414 +07:00 [DBG] Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2024-04-29 21:43:21.417 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SplitQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AppRole AS a)), 
    ReaderColumn[] { ReaderColumn<bool> }, 
    Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, bool>, 
    null, 
    null, 
    FoodShop.Persistence.ApplicationDbContext, 
    False, 
    True, 
    True
)
    .Single()'
2024-04-29 21:43:21.418 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.418 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.418 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:43:21.418 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:43:21.418 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:43:21.419 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:43:21.419 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AppRole] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-29 21:43:21.420 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.420 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 0ms reading results.
2024-04-29 21:43:21.421 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.421 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:43:21.422 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:43:21.424 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:21.425 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 21:43:21.459 +07:00 [DBG] Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-29 21:43:21.520 +07:00 [DBG] Hosting starting
2024-04-29 21:43:21.529 +07:00 [INF] User profile is available. Using 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-29 21:43:21.536 +07:00 [DBG] Reading data from file 'C:\Users\hieud\AppData\Local\ASP.NET\DataProtection-Keys\key-5b2baa0a-904f-4101-af08-7ac673b8db2c.xml'.
2024-04-29 21:43:21.542 +07:00 [DBG] Found key {5b2baa0a-904f-4101-af08-7ac673b8db2c}.
2024-04-29 21:43:21.551 +07:00 [DBG] Considering key {5b2baa0a-904f-4101-af08-7ac673b8db2c} with expiration date 2024-05-20 17:09:10Z as default key.
2024-04-29 21:43:21.555 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:43:21.556 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-29 21:43:21.557 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-29 21:43:21.559 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-29 21:43:21.562 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-29 21:43:21.563 +07:00 [DBG] Using key {5b2baa0a-904f-4101-af08-7ac673b8db2c} as the default key.
2024-04-29 21:43:21.564 +07:00 [DBG] Key ring with default key {5b2baa0a-904f-4101-af08-7ac673b8db2c} was loaded during application startup.
2024-04-29 21:43:21.633 +07:00 [INF] Now listening on: https://localhost:7286
2024-04-29 21:43:21.633 +07:00 [INF] Now listening on: http://localhost:5010
2024-04-29 21:43:21.633 +07:00 [DBG] Loaded hosting startup assembly FoodShop.API
2024-04-29 21:43:21.633 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-04-29 21:43:21.634 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-29 21:43:21.634 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-29 21:43:21.705 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-29 21:43:21.705 +07:00 [INF] Hosting environment: Development
2024-04-29 21:43:21.706 +07:00 [INF] Content root path: C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API
2024-04-29 21:43:21.706 +07:00 [DBG] Hosting started
2024-04-29 21:43:21.789 +07:00 [DBG] Connection id "0HN38BARR09SH" accepted.
2024-04-29 21:43:21.790 +07:00 [DBG] Connection id "0HN38BARR09SH" started.
2024-04-29 21:43:21.818 +07:00 [DBG] Connection 0HN38BARR09SH established using the following protocol: "Tls13"
2024-04-29 21:43:21.829 +07:00 [DBG] Connection id "0HN38BARR09SI" accepted.
2024-04-29 21:43:21.830 +07:00 [DBG] Connection id "0HN38BARR09SI" started.
2024-04-29 21:43:21.833 +07:00 [DBG] Connection 0HN38BARR09SI established using the following protocol: "Tls13"
2024-04-29 21:43:21.853 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 21:43:21.907 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-29 21:43:21.944 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 21:43:21.945 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:43:21.993 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 21:43:21.994 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 21:43:22.008 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 21:43:22.009 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 21:43:22.012 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 161.3384ms
2024-04-29 21:43:22.041 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 21:43:22.041 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 21:43:22.047 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 6.1539ms
2024-04-29 21:43:22.070 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.9947ms
2024-04-29 21:43:22.736 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 21:43:22.737 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 21:43:22.737 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:43:22.892 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 156.4966ms
2024-04-29 21:43:35.569 +07:00 [DBG] Connection id "0HN38BARR09SJ" received FIN.
2024-04-29 21:43:35.570 +07:00 [DBG] Connection id "0HN38BARR09SJ" accepted.
2024-04-29 21:43:35.571 +07:00 [DBG] Connection id "0HN38BARR09SJ" started.
2024-04-29 21:43:35.575 +07:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-29 21:43:35.587 +07:00 [DBG] Connection id "0HN38BARR09SJ" stopped.
2024-04-29 21:43:35.588 +07:00 [DBG] Connection id "0HN38BARR09SJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-29 21:43:35.594 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/index.html - null null
2024-04-29 21:43:35.600 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-29 21:43:35.601 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:43:35.603 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-29 21:43:35.603 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-29 21:43:35.606 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-29 21:43:35.606 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-29 21:43:35.607 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/index.html - 200 null text/html;charset=utf-8 12.8578ms
2024-04-29 21:43:35.649 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - null null
2024-04-29 21:43:35.649 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/_vs/browserLink - null null
2024-04-29 21:43:35.652 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 2.7903ms
2024-04-29 21:43:35.662 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.6969ms
2024-04-29 21:43:36.366 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - null null
2024-04-29 21:43:36.366 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-29 21:43:36.367 +07:00 [DBG] Request did not match any endpoints
2024-04-29 21:43:36.394 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7286/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.125ms
2024-04-29 21:43:46.854 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7286/api/v1/Users/login - application/json; ver=1.0 71
2024-04-29 21:43:46.869 +07:00 [DBG] 1 candidate(s) found for the request path '/api/v1/Users/login'
2024-04-29 21:43:46.871 +07:00 [DBG] Endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)' with route pattern 'api/v{version:apiVersion}/Users/login' is valid for the request path '/api/v1/Users/login'
2024-04-29 21:43:46.877 +07:00 [DBG] Request matched endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:43:46.878 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-29 21:43:46.880 +07:00 [INF] Start request......!
2024-04-29 21:43:46.897 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-29 21:43:46.902 +07:00 [INF] Executing endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:43:46.920 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest) on controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation).
2024-04-29 21:43:46.922 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-29 21:43:46.922 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-29 21:43:46.923 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)","Asp.Versioning.ApplyContentTypeVersionActionFilter"]
2024-04-29 21:43:46.924 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-29 21:43:46.924 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2024-04-29 21:43:46.925 +07:00 [DBG] Executing controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:43:47.002 +07:00 [DBG] Executed controller factory for controller FoodShop.Presentation.Controllers.V1.UsersController (FoodShop.Presentation)
2024-04-29 21:43:47.005 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:43:47.007 +07:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' using the name '' in request data ...
2024-04-29 21:43:47.008 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; ver=1.0'.
2024-04-29 21:43:47.012 +07:00 [DBG] Connection id "0HN38BARR09SH", Request id "0HN38BARR09SH:00000011": started reading request body.
2024-04-29 21:43:47.012 +07:00 [DBG] Connection id "0HN38BARR09SH", Request id "0HN38BARR09SH:00000011": done reading request body.
2024-04-29 21:43:47.015 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'
2024-04-29 21:43:47.015 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:43:47.015 +07:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:43:47.015 +07:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest' ...
2024-04-29 21:43:47.021 +07:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'FoodShop.Application.Common.DataTransferObjects.Request.V1.LoginRequest'.
2024-04-29 21:43:47.038 +07:00 [DBG] Entity Framework Core 8.0.4 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.3' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled using lazy loading proxies QuerySplittingBehavior=SplitQuery MigrationsAssembly=FoodShop.Persistence 
2024-04-29 21:43:47.046 +07:00 [DBG] Compiling query expression: 
'DbSet<AppUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2024-04-29 21:43:47.154 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: new SplitQueryingEnumerable<AppUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.AccessToken (string), 2], [Property: AppUser.Address (string), 3], [Property: AppUser.Avatar (string), 4], [Property: AppUser.ConcurrencyStamp (string), 5], [Property: AppUser.CreatedDate (DateTime) Required, 6], [Property: AppUser.Email (string), 7], [Property: AppUser.EmailConfirmed (bool) Required, 8], [Property: AppUser.Facebook (string), 9], [Property: AppUser.FirstName (string), 10], [Property: AppUser.LastName (string), 11], [Property: AppUser.LockoutEnabled (bool) Required, 12], [Property: AppUser.LockoutEnd (DateTimeOffset?), 13], [Property: AppUser.NormalizedEmail (string), 14], [Property: AppUser.NormalizedUserName (string), 15], [Property: AppUser.PasswordHash (string), 16], [Property: AppUser.PhoneNumber (string), 17], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 18], [Property: AppUser.RefreshToken (string), 19], [Property: AppUser.RefreshTokenExpiryTime (DateTime) Required, 20], [Property: AppUser.SecurityStamp (string), 21], [Property: AppUser.TwoFactorEnabled (bool) Required, 22], [Property: AppUser.UpdateDate (DateTime) Required, 23], [Property: AppUser.UserName (string), 24] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.AccessToken, a.Address, a.Avatar, a.ConcurrencyStamp, a.CreatedDate, a.Email, a.EmailConfirmed, a.Facebook, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.RefreshToken, a.RefreshTokenExpiryTime, a.SecurityStamp, a.TwoFactorEnabled, a.UpdateDate, a.UserName
            FROM AppUser AS a
            WHERE a.NormalizedEmail == @__normalizedEmail_0), 
        ReaderColumn[] { ReaderColumn<Guid>, ReaderColumn<int>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTimeOffset>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<object>, ReaderColumn<DateTime>, ReaderColumn<object>, ReaderColumn<bool>, ReaderColumn<DateTime>, ReaderColumn<object> }, 
        Func<QueryContext, DbDataReader, ResultContext, SplitQueryResultCoordinator, AppUser>, 
        null, 
        null, 
        FoodShop.Persistence.ApplicationDbContext, 
        False, 
        True, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-29 21:43:47.169 +07:00 [DBG] Creating DbConnection.
2024-04-29 21:43:47.170 +07:00 [DBG] Created DbConnection. (0ms).
2024-04-29 21:43:47.172 +07:00 [DBG] Opening connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:47.174 +07:00 [DBG] Opened connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:47.174 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-29 21:43:47.174 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-29 21:43:47.176 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-29 21:43:47.179 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:43:47.200 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__normalizedEmail_0='ADMIN' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AccessToken], [a].[Address], [a].[Avatar], [a].[ConcurrencyStamp], [a].[CreatedDate], [a].[Email], [a].[EmailConfirmed], [a].[Facebook], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdateDate], [a].[UserName]
FROM [AppUser] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2024-04-29 21:43:47.210 +07:00 [DBG] Closing data reader to 'FoodShop' on server 'localhost'.
2024-04-29 21:43:47.210 +07:00 [DBG] A data reader for 'FoodShop' on server 'localhost' is being disposed after spending 4ms reading results.
2024-04-29 21:43:47.212 +07:00 [DBG] Closing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:47.213 +07:00 [DBG] Closed connection to database 'FoodShop' on server 'localhost' (0ms).
2024-04-29 21:43:47.218 +07:00 [INF] Executed action FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation) in 291.7034ms
2024-04-29 21:43:47.218 +07:00 [INF] Executed endpoint 'FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync (FoodShop.Presentation)'
2024-04-29 21:43:47.220 +07:00 [ERR] BadRequest
FoodShop.Domain.Exceptions.BadRequestException: BadRequest
   at FoodShop.Infrastructure.Identity.UserServices.LoginAsync(LoginRequest loginRequest, CancellationToken token) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Identity\UserServices.cs:line 124
   at FoodShop.Presentation.Controllers.V1.UsersController.LoginAsync(LoginRequest loginRequest) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Presentation\Controllers\V1\UsersController.cs:line 49
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FoodShop.Infrastructure.Auth.CurrentUserMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.Infrastructure\Auth\CurrentUserMiddleware.cs:line 21
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FoodShop.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hieud\Code\C#\FoodApp-API\src\FoodShop.API\Middleware\ExceptionHandlingMiddleware.cs:line 23
2024-04-29 21:43:47.245 +07:00 [DBG] 'ApplicationDbContext' disposed.
2024-04-29 21:43:47.247 +07:00 [DBG] Disposing connection to database 'FoodShop' on server 'localhost'.
2024-04-29 21:43:47.248 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-29 21:43:47.248 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7286/api/v1/Users/login - 400 null application/json; ver=1 394.1623ms
